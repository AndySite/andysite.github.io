<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ä¸€ã€Taro çš„å®‰è£…ä¸ä½¿ç”¨ | é¢è¯•æŒ‡å—</title>
    <meta name="description" content="å‰ç«¯é¢è¯•æŒ‡å—ï¼Œå‰ç«¯é¢è¯•é¢˜æ•´ç†ï¼ŒæŒ‰æ¨¡å—åˆ†ç±»æ•´ç†æ€»ç»“ï¼Œæ‰“é€ æœ€å…¨é¢çš„å‰ç«¯é¢è¯•é¢˜">
    <link rel="icon" href="/logo.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
  <meta name="apple-mobile-web-app-status-bar-style">

    <link rel="preload" href="/assets/css/0.styles.9ad7bc48.css" as="style"><link rel="preload" href="/assets/js/app.f60bfc34.js" as="script"><link rel="preload" href="/assets/js/6.7f8a8777.js" as="script"><link rel="preload" href="/assets/js/3.9d86cf58.js" as="script"><link rel="preload" href="/assets/js/66.74665605.js" as="script"><link rel="preload" href="/assets/js/11.fb060006.js" as="script"><link rel="prefetch" href="/assets/js/1.9e1b498f.js"><link rel="prefetch" href="/assets/js/10.fbc04ea9.js"><link rel="prefetch" href="/assets/js/100.c06a0f53.js"><link rel="prefetch" href="/assets/js/101.54402ede.js"><link rel="prefetch" href="/assets/js/102.d3860a7d.js"><link rel="prefetch" href="/assets/js/103.51a83ab2.js"><link rel="prefetch" href="/assets/js/104.4107118f.js"><link rel="prefetch" href="/assets/js/105.aada2418.js"><link rel="prefetch" href="/assets/js/106.4ce7d3b7.js"><link rel="prefetch" href="/assets/js/107.ca87a327.js"><link rel="prefetch" href="/assets/js/108.df939701.js"><link rel="prefetch" href="/assets/js/109.9f0c8605.js"><link rel="prefetch" href="/assets/js/110.016c3eb7.js"><link rel="prefetch" href="/assets/js/111.ff5dbcc4.js"><link rel="prefetch" href="/assets/js/112.ab20caec.js"><link rel="prefetch" href="/assets/js/113.6c12e76f.js"><link rel="prefetch" href="/assets/js/114.48e1a019.js"><link rel="prefetch" href="/assets/js/115.f291caf1.js"><link rel="prefetch" href="/assets/js/116.0188d28e.js"><link rel="prefetch" href="/assets/js/117.9b579bae.js"><link rel="prefetch" href="/assets/js/118.89da516f.js"><link rel="prefetch" href="/assets/js/119.c70b5105.js"><link rel="prefetch" href="/assets/js/12.9774db85.js"><link rel="prefetch" href="/assets/js/120.fcf3186f.js"><link rel="prefetch" href="/assets/js/13.ac14541c.js"><link rel="prefetch" href="/assets/js/14.155007f0.js"><link rel="prefetch" href="/assets/js/15.2d9ec2b2.js"><link rel="prefetch" href="/assets/js/16.aec442e8.js"><link rel="prefetch" href="/assets/js/17.59c81a6b.js"><link rel="prefetch" href="/assets/js/18.c38ff446.js"><link rel="prefetch" href="/assets/js/19.8203bd99.js"><link rel="prefetch" href="/assets/js/20.103004c4.js"><link rel="prefetch" href="/assets/js/21.1e6e08c9.js"><link rel="prefetch" href="/assets/js/22.5abbfd40.js"><link rel="prefetch" href="/assets/js/23.4cd5fd4d.js"><link rel="prefetch" href="/assets/js/24.602403ee.js"><link rel="prefetch" href="/assets/js/25.da971f83.js"><link rel="prefetch" href="/assets/js/26.43589785.js"><link rel="prefetch" href="/assets/js/27.6d18f825.js"><link rel="prefetch" href="/assets/js/28.843b905f.js"><link rel="prefetch" href="/assets/js/29.81e33cc0.js"><link rel="prefetch" href="/assets/js/30.7a4491ed.js"><link rel="prefetch" href="/assets/js/31.4275e9d2.js"><link rel="prefetch" href="/assets/js/32.6e6c282b.js"><link rel="prefetch" href="/assets/js/33.35641348.js"><link rel="prefetch" href="/assets/js/34.7737e542.js"><link rel="prefetch" href="/assets/js/35.3d539e4d.js"><link rel="prefetch" href="/assets/js/36.78f70288.js"><link rel="prefetch" href="/assets/js/37.ed0997e2.js"><link rel="prefetch" href="/assets/js/38.6d35141d.js"><link rel="prefetch" href="/assets/js/39.3b4241bb.js"><link rel="prefetch" href="/assets/js/4.cda2fc13.js"><link rel="prefetch" href="/assets/js/40.dd7b6d84.js"><link rel="prefetch" href="/assets/js/41.05fcd6ed.js"><link rel="prefetch" href="/assets/js/42.24fc3ac4.js"><link rel="prefetch" href="/assets/js/43.27b59a40.js"><link rel="prefetch" href="/assets/js/44.ac552dd9.js"><link rel="prefetch" href="/assets/js/45.6b1e07c4.js"><link rel="prefetch" href="/assets/js/46.8bf4b340.js"><link rel="prefetch" href="/assets/js/47.57a13e6c.js"><link rel="prefetch" href="/assets/js/48.8ef881a7.js"><link rel="prefetch" href="/assets/js/49.b76df872.js"><link rel="prefetch" href="/assets/js/5.eb1f29dc.js"><link rel="prefetch" href="/assets/js/50.f04492e5.js"><link rel="prefetch" href="/assets/js/51.e000ebea.js"><link rel="prefetch" href="/assets/js/52.bfbd5e6e.js"><link rel="prefetch" href="/assets/js/53.fc0a60dd.js"><link rel="prefetch" href="/assets/js/54.a798cd42.js"><link rel="prefetch" href="/assets/js/55.5ccb6ae1.js"><link rel="prefetch" href="/assets/js/56.1605b000.js"><link rel="prefetch" href="/assets/js/57.79350f4e.js"><link rel="prefetch" href="/assets/js/58.dcff3859.js"><link rel="prefetch" href="/assets/js/59.a366020b.js"><link rel="prefetch" href="/assets/js/60.2c42a67f.js"><link rel="prefetch" href="/assets/js/61.4d471001.js"><link rel="prefetch" href="/assets/js/62.07f7a685.js"><link rel="prefetch" href="/assets/js/63.3774b497.js"><link rel="prefetch" href="/assets/js/64.d8437f45.js"><link rel="prefetch" href="/assets/js/65.eaf10ccb.js"><link rel="prefetch" href="/assets/js/67.072c35ca.js"><link rel="prefetch" href="/assets/js/68.764ab8cb.js"><link rel="prefetch" href="/assets/js/69.6a27592a.js"><link rel="prefetch" href="/assets/js/7.9a5c64fa.js"><link rel="prefetch" href="/assets/js/70.2e7f3527.js"><link rel="prefetch" href="/assets/js/71.c6365fbe.js"><link rel="prefetch" href="/assets/js/72.15cfe1be.js"><link rel="prefetch" href="/assets/js/73.d56ee920.js"><link rel="prefetch" href="/assets/js/74.f848ccac.js"><link rel="prefetch" href="/assets/js/75.905f5556.js"><link rel="prefetch" href="/assets/js/76.49d98a04.js"><link rel="prefetch" href="/assets/js/77.4b62003f.js"><link rel="prefetch" href="/assets/js/78.5a4046ff.js"><link rel="prefetch" href="/assets/js/79.eb3ec067.js"><link rel="prefetch" href="/assets/js/8.bccf8145.js"><link rel="prefetch" href="/assets/js/80.c8247597.js"><link rel="prefetch" href="/assets/js/81.69952221.js"><link rel="prefetch" href="/assets/js/82.4439fbe3.js"><link rel="prefetch" href="/assets/js/83.df1321d3.js"><link rel="prefetch" href="/assets/js/84.23d01b47.js"><link rel="prefetch" href="/assets/js/85.c983047a.js"><link rel="prefetch" href="/assets/js/86.29b0f2d4.js"><link rel="prefetch" href="/assets/js/87.12e2e192.js"><link rel="prefetch" href="/assets/js/88.fb19aa58.js"><link rel="prefetch" href="/assets/js/89.ee2be7d8.js"><link rel="prefetch" href="/assets/js/9.ce1180ae.js"><link rel="prefetch" href="/assets/js/90.479f4d9d.js"><link rel="prefetch" href="/assets/js/91.619e0c8d.js"><link rel="prefetch" href="/assets/js/92.ae858703.js"><link rel="prefetch" href="/assets/js/93.f90a7ae1.js"><link rel="prefetch" href="/assets/js/94.8894adb4.js"><link rel="prefetch" href="/assets/js/95.683396f3.js"><link rel="prefetch" href="/assets/js/96.f65dc164.js"><link rel="prefetch" href="/assets/js/97.75bd77e0.js"><link rel="prefetch" href="/assets/js/98.892b530a.js"><link rel="prefetch" href="/assets/js/99.7d033614.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9ad7bc48.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button" onclick="openSlider()"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active">   </a>  <div class="links" style="max-width: 1309px; background: rgb(255, 255, 255);"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value="" class="" placeholder=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div><a href="/docs/base.html" class="nav-link">åŸºç¡€ç¯‡
      </a></div></div><div class="nav-item"><div><a href="/docs/simply.html" class="nav-link">âœ¨è¿›é˜¶ç¯‡
      </a></div></div><div class="nav-item"><div><a href="/excellent-docs/1-HTMLæ¨¡å—.html" class="nav-link">ğŸ”¥ç²¾é€‰ç¯‡
      </a></div></div><div class="nav-item"><div><a href="/docs/handwritten.html" class="nav-link">æ‰‹å†™ç¯‡
      </a></div></div><div class="nav-item"><div><a href="/qa/1-å‰ç«¯100é¢˜è‡ªæ£€.html" class="nav-link">è‡ªæ£€ç¯‡
      </a></div></div><div class="nav-item"><div><a href="/docs/questions.html" class="nav-link">é—®é¢˜ç¯‡
      </a></div></div><div class="nav-item"><div><a href="/interview-exp/å‰ç«¯é¢ç»æ±‡æ€».html" class="nav-link">é¢ç»ç¯‡
      </a></div></div><div class="nav-item"><div><a href="/days/æ¯æ—¥ä¸€é¢˜.html" class="nav-link">æ¯æ—¥ä¸€é¢˜
      </a></div></div><div class="nav-item"><div><a href="/docs/design-pattern.html" class="nav-link router-link-exact-active router-link-active" aria-current="page">è®¾è®¡æ¨¡å¼
      </a></div></div><div class="nav-item"><div><a href="/principle-docs/comprehensive/01-è™šæ‹ŸDOMåŸç†åˆ†æ.html" class="nav-link">åŸç†ç¯‡
      </a></div></div><div class="nav-item"><div><a href="/docs/detail-expain.html" class="nav-link">ç»¼åˆ
      </a></div></div><div class="nav-item"><div><a href="/algorithm-interview/note/01-å¿«é€Ÿä¸Šæ‰‹â€”â€”ä»0åˆ°1æŒæ¡ç®—æ³•é¢è¯•éœ€è¦çš„æ•°æ®ç»“æ„ï¼ˆä¸€ï¼‰.html" class="nav-link">ç®—æ³•ç¯‡
      </a></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ‹“å±•é˜…è¯»" class="dropdown-title"><span class="title">æ‹“å±•é˜…è¯»</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display: none;"><li class="dropdown-item"><h4>ä¸“é¢˜</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-base-docs/compute-docs/Linux.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        å‰ç«¯åŸºç¡€
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-mobile-docs/h5-docs/1-å¤§å‚ H5 å¼€å‘æ¦‚è¿°.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        ç§»åŠ¨ç«¯
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-css-inspiration-docs/css-docs/note/01-æµè§ˆå™¨.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        CSS
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-vue-docs/learn-vue-base/base/1-Vue CLI 3 é¡¹ç›®æ„å»ºåŸºç¡€.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        Vue
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-react-docs/react-web-action/01-å‰ç«¯å¼€å‘çš„å››ä¸ªæ—¶ä»£.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        React
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-engineering-docs/docs/npm-script.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        å‰ç«¯å·¥ç¨‹
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-micro-docs/docs/01-å¾®å‰ç«¯çš„è¯ç”Ÿ.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        å¾®å‰ç«¯
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-nodejs-docs/nodejs-docs/base/01-ç¯å¢ƒæ­å»º.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        NodeæŒ‡å—
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-ts-axios-docs/ts-axios/chapter1/" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        Typesctipt
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-algorithm-docs/algorithm/prepare/01-å¦‚ä½•ç³»ç»Ÿé«˜æ•ˆåœ°å­¦ä¹ æ•°æ®ç»“æ„ä¸ç®—æ³•.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        æ•°æ®ç»“æ„ä¸ç®—æ³•
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li></ul></li><li class="dropdown-item"><h4>å…¶ä»–</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-blog-docs/blog-docs/javascript/-Ajaxæ€»ç»“ç¯‡.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        æ—¥å¸¸ç§¯ç´¯
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://blog.poetries.top/archives/" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        åšå®¢æ–‡ç« 
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="https://blog.poetries.top/css-reference" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        CSSå¯è§†åŒ–
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->   <ul class="sidebar-links"><li><a href="/docs/base.html" class="sidebar-link">åŸºç¡€</a></li><li><a href="/docs/simply.html" class="sidebar-link">è¿›é˜¶</a></li><li><a href="/docs/excellent.html" class="sidebar-link">é«˜é¢‘</a></li><li><a href="/docs/guide.html" class="sidebar-link">æŒ‡å—</a></li><li><a href="/docs/performance.html" class="sidebar-link">æ€§èƒ½</a></li><li><a href="/docs/qa.html" class="sidebar-link">è‡ªæ£€</a></li><li><a href="/docs/detail-expain.html" class="sidebar-link">ç»¼åˆ</a></li><li><a href="/docs/handwritten.html" class="sidebar-link">æ‰‹å†™</a></li><li><a href="/docs/design-pattern.html" class="sidebar-link">è®¾è®¡æ¨¡å¼</a></li></ul> </aside> <main class="page"> <div id="container" class="theme-default-content"><div class="content__default"><h2 id="ä¸€ã€taro-çš„å®‰è£…ä¸ä½¿ç”¨"><a href="#ä¸€ã€taro-çš„å®‰è£…ä¸ä½¿ç”¨" class="header-anchor">#</a> ä¸€ã€Taro çš„å®‰è£…ä¸ä½¿ç”¨</h2> <h3 id="_1-1-å®‰è£…"><a href="#_1-1-å®‰è£…" class="header-anchor">#</a> 1.1 å®‰è£…</h3> <div class="language- extra-class"><pre class="language-text"><code>$ npm install -g @tarojs/cli
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>taro -V
</code></pre></div><h3 id="_1-2-ä½¿ç”¨"><a href="#_1-2-ä½¿ç”¨" class="header-anchor">#</a> 1.2 ä½¿ç”¨</h3> <p>ä½¿ç”¨å‘½ä»¤åˆ›å»ºæ¨¡æ¿é¡¹ç›®</p> <div class="language- extra-class"><pre class="language-text"><code>$ taro init myApp
</code></pre></div><p><img src="https://poetries1.gitee.io/img-repo/2020/09/92.png" alt=""></p> <h4 id="_1-2-1-å¾®ä¿¡å°ç¨‹åº"><a href="#_1-2-1-å¾®ä¿¡å°ç¨‹åº" class="header-anchor">#</a> 1.2.1 å¾®ä¿¡å°ç¨‹åº</h4> <blockquote><p>é€‰æ‹©å¾®ä¿¡å°ç¨‹åºæ¨¡å¼ï¼Œéœ€è¦è‡ªè¡Œä¸‹è½½å¹¶æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œç„¶åé€‰æ‹©é¡¹ç›®æ ¹ç›®å½•è¿›è¡Œé¢„è§ˆ</p></blockquote> <p>å¾®ä¿¡å°ç¨‹åºç¼–è¯‘é¢„è§ˆåŠæ‰“åŒ…</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># npm script</span>
$ <span class="token function">npm</span> run dev:weapp
$ <span class="token function">npm</span> run build:weapp
</code></pre></div><h4 id="_1-2-2-ç™¾åº¦å°ç¨‹åº"><a href="#_1-2-2-ç™¾åº¦å°ç¨‹åº" class="header-anchor">#</a> 1.2.2 ç™¾åº¦å°ç¨‹åº</h4> <blockquote><p>é€‰æ‹©ç™¾åº¦å°ç¨‹åºæ¨¡å¼ï¼Œéœ€è¦è‡ªè¡Œä¸‹è½½å¹¶æ‰“å¼€<a href="https://smartprogram.baidu.com/docs/develop/devtools/show_sur/" target="_blank" rel="noopener noreferrer">ç™¾åº¦å¼€å‘è€…å·¥å…·<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼Œç„¶ååœ¨é¡¹ç›®ç¼–è¯‘å®Œåé€‰æ‹©é¡¹ç›®æ ¹ç›®å½•ä¸‹ dist ç›®å½•è¿›è¡Œé¢„è§ˆ</p></blockquote> <p>ç™¾åº¦å°ç¨‹åºç¼–è¯‘é¢„è§ˆåŠæ‰“åŒ…</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># npm script</span>
$ <span class="token function">npm</span> run dev:swan
$ <span class="token function">npm</span> run build:swan
</code></pre></div><h4 id="_1-2-3-æ”¯ä»˜å®å°ç¨‹åº"><a href="#_1-2-3-æ”¯ä»˜å®å°ç¨‹åº" class="header-anchor">#</a> 1.2.3 æ”¯ä»˜å®å°ç¨‹åº</h4> <blockquote><p>é€‰æ‹©æ”¯ä»˜å®å°ç¨‹åºæ¨¡å¼ï¼Œéœ€è¦è‡ªè¡Œä¸‹è½½å¹¶æ‰“å¼€<a href="https://docs.alipay.com/mini/developer/getting-started/" target="_blank" rel="noopener noreferrer">æ”¯ä»˜å®å°ç¨‹åºå¼€å‘è€…å·¥å…·<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼Œç„¶ååœ¨é¡¹ç›®ç¼–è¯‘å®Œåé€‰æ‹©é¡¹ç›®æ ¹ç›®å½•ä¸‹ dist ç›®å½•è¿›è¡Œé¢„è§ˆ</p></blockquote> <p>æ”¯ä»˜å®å°ç¨‹åºç¼–è¯‘é¢„è§ˆåŠæ‰“åŒ…ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># npm script</span>
$ <span class="token function">npm</span> run dev:alipay
$ <span class="token function">npm</span> run build:alipay
</code></pre></div><h4 id="_1-2-4-h5"><a href="#_1-2-4-h5" class="header-anchor">#</a> 1.2.4 H5</h4> <p>H5 ç¼–è¯‘é¢„è§ˆåŠæ‰“åŒ…ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># npm script</span>
$ <span class="token function">npm</span> run dev:h5

<span class="token comment"># ä»…é™å…¨å±€å®‰è£…</span>
$ taro build --type h5 --watch
</code></pre></div><h4 id="_1-2-5-react-native"><a href="#_1-2-5-react-native" class="header-anchor">#</a> 1.2.5 React Native</h4> <blockquote><p><code>React Native</code> ç«¯è¿è¡Œéœ€æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œ<code>React Native</code> ç«¯ç›¸å…³çš„è¿è¡Œè¯´æ˜è¯·å‚è§ <code>React Native</code> <a href="https://nervjs.github.io/taro/docs/react-native.html" target="_blank" rel="noopener noreferrer">æ•™ç¨‹<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># npm script</span>
$ <span class="token function">npm</span> run dev:rn
</code></pre></div><h3 id="_1-3-æ›´æ–°-taro"><a href="#_1-3-æ›´æ–°-taro" class="header-anchor">#</a> 1.3 æ›´æ–° Taro</h3> <blockquote><p><code>Taro</code> æä¾›äº†æ›´æ–°å‘½ä»¤æ¥æ›´æ–° <code>CLI</code>å·¥å…·è‡ªèº«å’Œé¡¹ç›®ä¸­ <code>Taro</code> ç›¸å…³çš„ä¾èµ–ã€‚</p></blockquote> <p>æ›´æ–° <code>taro-cli</code> å·¥å…·</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># taro</span>
$ taro update self
<span class="token comment"># npm </span>
</code></pre></div><blockquote><p>æ›´æ–°é¡¹ç›®ä¸­ <code>Taro</code> ç›¸å…³çš„ä¾èµ–ï¼Œè¿™ä¸ªéœ€è¦åœ¨ä½ çš„é¡¹ç›®ä¸‹æ‰§è¡Œ</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>$ taro update project
</code></pre></div><h2 id="äºŒã€taro-å¼€å‘è¯´æ˜ä¸æ³¨æ„äº‹é¡¹"><a href="#äºŒã€taro-å¼€å‘è¯´æ˜ä¸æ³¨æ„äº‹é¡¹" class="header-anchor">#</a> äºŒã€Taro å¼€å‘è¯´æ˜ä¸æ³¨æ„äº‹é¡¹</h2> <h3 id="_2-1-å¾®ä¿¡å°ç¨‹åºå¼€å‘å·¥å…·çš„é…ç½®"><a href="#_2-1-å¾®ä¿¡å°ç¨‹åºå¼€å‘å·¥å…·çš„é…ç½®" class="header-anchor">#</a> 2.1 å¾®ä¿¡å°ç¨‹åºå¼€å‘å·¥å…·çš„é…ç½®</h3> <blockquote><p>ç”±äº <code>Taro</code> ç¼–è¯‘åçš„ä»£ç å·²ç»ç»è¿‡äº†è½¬ä¹‰å’Œå‹ç¼©ï¼Œå› æ­¤è¿˜éœ€è¦æ³¨æ„å¾®ä¿¡å¼€å‘è€…å·¥å…·çš„é¡¹ç›®è®¾ç½®</p></blockquote> <ul><li>è®¾ç½®å…³é—­ <code>ES6</code> è½¬ <code>ES5</code> åŠŸèƒ½</li> <li>è®¾ç½®å…³é—­ä¸Šä¼ ä»£ç æ—¶æ ·å¼è‡ªåŠ¨è¡¥å…¨</li> <li>è®¾ç½®å…³é—­ä»£ç å‹ç¼©ä¸Šä¼ </li></ul> <p><img src="https://poetries1.gitee.io/img-repo/2020/09/239.png" alt=""></p> <h3 id="_2-2-taro-ä¸-react-çš„å·®å¼‚"><a href="#_2-2-taro-ä¸-react-çš„å·®å¼‚" class="header-anchor">#</a> 2.2 Taro ä¸ React çš„å·®å¼‚</h3> <blockquote><p>ç”±äºå¾®ä¿¡å°ç¨‹åºçš„é™åˆ¶ï¼Œ<code>React</code> ä¸­æŸäº›å†™æ³•å’Œç‰¹æ€§åœ¨ <code>Taro</code> ä¸­è¿˜æœªèƒ½å®ç°ï¼Œåç»­å°†ä¼šé€æ¸å®Œå–„ã€‚ æˆªæ­¢åˆ°æœ¬å°å†Œå‘å¸ƒå‰ï¼Œ<code>Taro</code> çš„æœ€æ–°ç‰ˆæœ¬ä¸º <code>1.1</code>ï¼Œå› æ­¤ä»¥ä¸‹è®²è§£é»˜è®¤ç‰ˆæœ¬ä¸º <code>1.1</code></p></blockquote> <h4 id="_2-2-1-æš‚ä¸æ”¯æŒåœ¨-render-ä¹‹å¤–çš„æ–¹æ³•å®šä¹‰-jsx"><a href="#_2-2-1-æš‚ä¸æ”¯æŒåœ¨-render-ä¹‹å¤–çš„æ–¹æ³•å®šä¹‰-jsx" class="header-anchor">#</a> 2.2.1 æš‚ä¸æ”¯æŒåœ¨ render() ä¹‹å¤–çš„æ–¹æ³•å®šä¹‰ JSX</h4> <blockquote><p>ç”±äºå¾®ä¿¡å°ç¨‹åºçš„ <code>template</code> ä¸èƒ½åŠ¨æ€ä¼ å€¼å’Œä¼ å…¥å‡½æ•°ï¼Œ<code>Taro</code> æš‚æ—¶ä¹Ÿæ²¡åŠæ³•æ”¯æŒåœ¨ç±»æ–¹æ³•ä¸­å®šä¹‰ <code>JSX</code></p></blockquote> <p>æ— æ•ˆæƒ…å†µ</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">_render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">renderHeader</span><span class="token punctuation">(</span><span class="token parameter">showHeader</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> showHeader <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Header</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">renderHeader</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">showHeader</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> showHeader<span class="token operator">&amp;</span> <span class="token operator">&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Header</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token operator">...</span>
</code></pre></div><p><strong>è§£å†³æ–¹æ¡ˆ</strong></p> <p>åœ¨ <code>render</code> æ–¹æ³•ä¸­å®šä¹‰</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>

  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> showHeader<span class="token punctuation">,</span> showMain <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
    <span class="token keyword">const</span> header <span class="token operator">=</span> showHeader <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Header</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token keyword">const</span> main <span class="token operator">=</span> showMain <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Main</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>header<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token punctuation">{</span>main<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token operator">...</span>
</code></pre></div><h4 id="_2-2-2-ä¸èƒ½åœ¨åŒ…å«-jsx-å…ƒç´ çš„-map-å¾ªç¯ä¸­ä½¿ç”¨-if-è¡¨è¾¾å¼"><a href="#_2-2-2-ä¸èƒ½åœ¨åŒ…å«-jsx-å…ƒç´ çš„-map-å¾ªç¯ä¸­ä½¿ç”¨-if-è¡¨è¾¾å¼" class="header-anchor">#</a> 2.2.2 ä¸èƒ½åœ¨åŒ…å« JSX å…ƒç´ çš„ map å¾ªç¯ä¸­ä½¿ç”¨ if è¡¨è¾¾å¼</h4> <p>æ— æ•ˆæƒ…å†µ</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code>numbers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> element <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token keyword">const</span> isOdd <span class="token operator">=</span> number <span class="token operator">%</span> <span class="token number">2</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isOdd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    element <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Custom</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> element
<span class="token punctuation">}</span><span class="token punctuation">)</span>

numbers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> isOdd <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>number <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    isOdd <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> isOdd <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Custom</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">...</span>
</code></pre></div><p><strong>è§£å†³æ–¹æ¡ˆ</strong></p> <p>å°½é‡åœ¨ <code>map</code> å¾ªç¯ä¸­ä½¿ç”¨æ¡ä»¶è¡¨è¾¾å¼æˆ–é€»è¾‘è¡¨è¾¾å¼ã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code>numbers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isOdd <span class="token operator">=</span> number <span class="token operator">%</span> <span class="token number">2</span>
  <span class="token keyword">return</span> isOdd <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Custom</span></span> <span class="token punctuation">/&gt;</span></span> <span class="token punctuation">:</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

numbers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isOdd <span class="token operator">=</span> number <span class="token operator">%</span> <span class="token number">2</span>
  <span class="token keyword">return</span> isOdd <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Custom</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">...</span>
</code></pre></div><h4 id="_2-2-3-ä¸èƒ½ä½¿ç”¨-array-map-ä¹‹å¤–çš„æ–¹æ³•æ“ä½œ-jsx-æ•°ç»„"><a href="#_2-2-3-ä¸èƒ½ä½¿ç”¨-array-map-ä¹‹å¤–çš„æ–¹æ³•æ“ä½œ-jsx-æ•°ç»„" class="header-anchor">#</a> 2.2.3 ä¸èƒ½ä½¿ç”¨ Array.map ä¹‹å¤–çš„æ–¹æ³•æ“ä½œ JSX æ•°ç»„</h4> <blockquote><p>Taro åœ¨å°ç¨‹åºç«¯å®é™…ä¸ŠæŠŠ JSX è½¬æ¢æˆäº†å­—ç¬¦ä¸²æ¨¡æ¿ï¼Œè€Œä¸€ä¸ªåŸç”Ÿ <code>JSX</code> è¡¨è¾¾å¼å®é™…ä¸Šæ˜¯ä¸€ä¸ª <code>React/Nerv</code> å…ƒç´ (react - element)çš„æ„é€ å™¨ï¼Œå› æ­¤åœ¨åŸç”Ÿ JSX ä¸­ä½ å¯ä»¥å¯¹ä»»ä½•ä¸€ç»„ React å…ƒç´ è¿›è¡Œæ“ä½œã€‚ä½†åœ¨ Taro ä¸­ä½ åªèƒ½ä½¿ç”¨ map æ–¹æ³•ï¼ŒTaro è½¬æ¢æˆå°ç¨‹åºä¸­ <code>wx:for</code>...</p></blockquote> <p>æ— æ•ˆæƒ…å†µ</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code>test<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">)</span>

numbers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">numbers</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>someCase<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

test<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">)</span>

components<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">component</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> component <span class="token operator">===</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

components<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">component</span> <span class="token operator">=&gt;</span> component<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">.</span>constructor<span class="token punctuation">)</span>

numbers<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">...</span>
</code></pre></div><p><strong>è§£å†³æ–¹æ¡ˆ</strong></p> <p>å…ˆå¤„ç†å¥½éœ€è¦éå†çš„æ•°ç»„ï¼Œç„¶åå†ç”¨å¤„ç†å¥½çš„æ•°ç»„è°ƒç”¨ map æ–¹æ³•ã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code>numbers<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>isOdd<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">)</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// do you thing with array</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> element <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">...</span>

</code></pre></div><h4 id="_2-2-4-ä¸èƒ½åœ¨-jsx-å‚æ•°ä¸­ä½¿ç”¨åŒ¿åå‡½æ•°"><a href="#_2-2-4-ä¸èƒ½åœ¨-jsx-å‚æ•°ä¸­ä½¿ç”¨åŒ¿åå‡½æ•°" class="header-anchor">#</a> 2.2.4 ä¸èƒ½åœ¨ JSX å‚æ•°ä¸­ä½¿ç”¨åŒ¿åå‡½æ•°</h4> <p>æ— æ•ˆæƒ…å†µ</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token operator">...</span>
</code></pre></div><p><strong>è§£å†³æ–¹æ¡ˆ</strong></p> <p>ä½¿ç”¨ <code>bind</code> æˆ– ç±»å‚æ•°ç»‘å®šå‡½æ•°ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;View onClick={this.props.hanldeClick.bind(this)} /&gt;
</code></pre></div><h4 id="_2-2-5-ä¸èƒ½åœ¨-jsx-å‚æ•°ä¸­ä½¿ç”¨å¯¹è±¡å±•å¼€ç¬¦"><a href="#_2-2-5-ä¸èƒ½åœ¨-jsx-å‚æ•°ä¸­ä½¿ç”¨å¯¹è±¡å±•å¼€ç¬¦" class="header-anchor">#</a> 2.2.5 ä¸èƒ½åœ¨ JSX å‚æ•°ä¸­ä½¿ç”¨å¯¹è±¡å±•å¼€ç¬¦</h4> <blockquote><p>å¾®ä¿¡å°ç¨‹åºç»„ä»¶è¦æ±‚æ¯ä¸€ä¸ªä¼ å…¥ç»„ä»¶çš„å‚æ•°éƒ½å¿…é¡»é¢„å…ˆè®¾å®šå¥½ï¼Œè€Œå¯¹è±¡å±•å¼€ç¬¦åˆ™æ˜¯åŠ¨æ€ä¼ å…¥ä¸å›ºå®šæ•°é‡çš„å‚æ•°ã€‚æ‰€ä»¥ <code>Taro</code> æ²¡æœ‰åŠæ³•æ”¯æŒè¯¥åŠŸèƒ½</p></blockquote> <p>æ— æ•ˆæƒ…å†µ</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">this</span><span class="token punctuation">.</span><span class="token attr-value">props</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">props</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Custom</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">props</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p><strong>è§£å†³æ–¹æ¡ˆ</strong></p> <p>å¼€å‘è€…è‡ªè¡Œèµ‹å€¼ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> id<span class="token punctuation">,</span> title <span class="token punctuation">}</span> <span class="token operator">=</span> obj
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>View id<span class="token operator">=</span><span class="token punctuation">{</span>id<span class="token punctuation">}</span> title<span class="token operator">=</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span><span class="token operator">...</span>
</code></pre></div><h4 id="_2-2-6-ä¸å…è®¸åœ¨-jsx-å‚æ•°ï¼ˆpropsï¼‰ä¸­ä¼ å…¥-jsx-å…ƒç´ "><a href="#_2-2-6-ä¸å…è®¸åœ¨-jsx-å‚æ•°ï¼ˆpropsï¼‰ä¸­ä¼ å…¥-jsx-å…ƒç´ " class="header-anchor">#</a> 2.2.6 ä¸å…è®¸åœ¨ JSX å‚æ•°ï¼ˆpropsï¼‰ä¸­ä¼ å…¥ JSX å…ƒç´ </h4> <blockquote><p>ç”±äºå¾®ä¿¡å°ç¨‹åºå†…ç½®çš„ç»„ä»¶åŒ–çš„ç³»ç»Ÿä¸èƒ½é€šè¿‡å±æ€§ï¼ˆpropsï¼‰ ä¼ å‡½æ•°ï¼Œè€Œ props ä¼ é€’å‡½æ•°å¯ä»¥è¯´æ˜¯ React ä½“ç³»çš„æ ¹åŸºä¹‹ä¸€ï¼Œæˆ‘ä»¬åªèƒ½è‡ªå·±å®ç°ä¸€å¥—ç»„ä»¶åŒ–ç³»ç»Ÿã€‚è€Œè‡ªåˆ¶çš„ç»„ä»¶åŒ–ç³»ç»Ÿä¸èƒ½ä½¿ç”¨å†…ç½®ç»„ä»¶åŒ–çš„ slot åŠŸèƒ½ã€‚ä¸¤æƒç›¸å®³å–å…¶è½»ï¼Œæˆ‘ä»¬æš‚æ—¶åªèƒ½ä¸æ”¯æŒè¯¥åŠŸèƒ½...</p></blockquote> <p>æ— æ•ˆæƒ…å†µ</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Custom</span></span> <span class="token attr-name">child</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Custom</span></span> <span class="token attr-name">child</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Custom</span></span> <span class="token attr-name">child</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token punctuation">/&gt;</span></span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Custom</span></span> <span class="token attr-name">child</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ary<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">a</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token operator">...</span>
</code></pre></div><p><strong>è§£å†³æ–¹æ¡ˆ</strong></p> <blockquote><p>é€šè¿‡ <code>props</code> ä¼ å€¼åœ¨ <code>JSX</code> æ¨¡æ¿ä¸­é¢„å…ˆåˆ¤å®šæ˜¾ç¤ºå†…å®¹ï¼Œæˆ–é€šè¿‡ <code>props.children</code> æ¥åµŒå¥—å­ç»„ä»¶</p></blockquote> <h4 id="_2-2-7-ä¸æ”¯æŒæ— çŠ¶æ€ç»„ä»¶ï¼ˆstateless-component"><a href="#_2-2-7-ä¸æ”¯æŒæ— çŠ¶æ€ç»„ä»¶ï¼ˆstateless-component" class="header-anchor">#</a> 2.2.7 ä¸æ”¯æŒæ— çŠ¶æ€ç»„ä»¶ï¼ˆStateless Component)</h4> <blockquote><p>ç”±äºå¾®ä¿¡çš„ <code>template</code> èƒ½åŠ›æœ‰é™ï¼Œä¸æ”¯æŒåŠ¨æ€ä¼ å€¼å’Œå‡½æ•°ï¼Œ<code>Taro</code> æš‚æ—¶åªæ”¯æŒä¸€ä¸ªæ–‡ä»¶è‡ªå®šä¹‰ä¸€ä¸ªç»„ä»¶ã€‚ä¸ºäº†é¿å…å¼€å‘è€…ç–‘æƒ‘ï¼Œæš‚æ—¶ä¸æ”¯æŒå®šä¹‰ <code>Stateless Component</code></p></blockquote> <p>æ— æ•ˆæƒ…å†µ</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">Test</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Test</span> <span class="token punctuation">(</span><span class="token parameter">ary</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> ary<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Test</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Test</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">}</span><span class="token operator">...</span>
</code></pre></div><p><strong>è§£å†³æ–¹æ¡ˆ</strong></p> <p>ä½¿ç”¨ <code>class</code> å®šä¹‰ç»„ä»¶ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>View <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-3-å‘½åè§„èŒƒ"><a href="#_2-3-å‘½åè§„èŒƒ" class="header-anchor">#</a> 2.3 å‘½åè§„èŒƒ</h3> <blockquote><p>Taro å‡½æ•°å‘½åä½¿ç”¨é©¼å³°å‘½åæ³•ï¼Œå¦‚<code>onClick</code>ï¼Œç”±äºå¾®ä¿¡å°ç¨‹åºçš„ WXML ä¸æ”¯æŒä¼ é€’å‡½æ•°ï¼Œå‡½æ•°åç¼–è¯‘åä¼šä»¥å­—ç¬¦ä¸²çš„å½¢å¼ç»‘å®šåœ¨ WXML ä¸Šï¼Œå›¿äº WXML çš„é™åˆ¶ï¼Œå‡½æ•°åæœ‰ä¸‰é¡¹é™åˆ¶</p></blockquote> <ul><li>æ–¹æ³•åä¸èƒ½å«æœ‰æ•°å­—</li> <li>æ–¹æ³•åä¸èƒ½ä»¥ä¸‹åˆ’çº¿å¼€å¤´æˆ–ç»“å°¾</li> <li>æ–¹æ³•åçš„é•¿åº¦ä¸èƒ½å¤§äº <code>20</code></li></ul> <p>è¯·éµå®ˆä»¥ä¸Šè§„åˆ™ï¼Œå¦åˆ™ç¼–è¯‘åçš„ä»£ç åœ¨å¾®ä¿¡å°ç¨‹åºä¸­ä¼šæŠ¥ä»¥ä¸‹é”™è¯¯</p> <p><img src="https://poetries1.gitee.io/img-repo/2020/09/240.png" alt=""></p> <h3 id="_2-4-æ¨èå®‰è£…-eslint-ç¼–è¾‘å™¨æ’ä»¶"><a href="#_2-4-æ¨èå®‰è£…-eslint-ç¼–è¾‘å™¨æ’ä»¶" class="header-anchor">#</a> 2.4 æ¨èå®‰è£… ESLint ç¼–è¾‘å™¨æ’ä»¶</h3> <blockquote><p>Taro æœ‰äº›å†™æ³•è·Ÿ React æœ‰äº›å·®å¼‚ï¼Œå¯ä»¥é€šè¿‡å®‰è£… ESLint ç›¸å…³çš„ç¼–è¾‘å™¨æ’ä»¶æ¥è·å¾—äººæ€§åŒ–çš„æç¤ºã€‚ç”±äºä¸åŒç¼–è¾‘å™¨å®‰è£…çš„æ’ä»¶æœ‰æ‰€ä¸åŒï¼Œå…·ä½“å®‰è£…æ–¹æ³•è¯·è‡ªè¡Œæœç´¢ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ å¦‚ä¸‹å›¾ï¼Œå°±æ˜¯å®‰è£…æ’ä»¶åè·å¾—çš„æç¤º</p></blockquote> <p><img src="https://poetries1.gitee.io/img-repo/2020/09/241.png" alt=""> <img src="https://poetries1.gitee.io/img-repo/2020/09/242.png" alt=""></p> <h3 id="_2-5-æœ€ä½³ç¼–ç æ–¹å¼"><a href="#_2-5-æœ€ä½³ç¼–ç æ–¹å¼" class="header-anchor">#</a> 2.5 æœ€ä½³ç¼–ç æ–¹å¼</h3> <p><strong>ç»„ä»¶ä¼ é€’å‡½æ•°å±æ€§åä»¥ on å¼€å¤´</strong></p> <blockquote><p>åœ¨ <code>Taro</code> ä¸­ï¼Œçˆ¶ç»„ä»¶è¦å¾€å­ç»„ä»¶ä¼ é€’å‡½æ•°ï¼Œå±æ€§åå¿…é¡»ä»¥<code>on</code> å¼€å¤´</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// è°ƒç”¨ Custom ç»„ä»¶ï¼Œä¼ å…¥ handleEvent å‡½æ•°ï¼Œå±æ€§åä¸º `onTrigger`</span>
<span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>

  <span class="token function">handleEvent</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>

  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Custom onTrigger<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleEvent<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Custom<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token operator">...</span>
</code></pre></div><blockquote><p>è¿™æ˜¯å› ä¸ºï¼Œå¾®ä¿¡å°ç¨‹åºç«¯ç»„ä»¶åŒ–æ˜¯ä¸èƒ½ç›´æ¥ä¼ é€’å‡½æ•°ç±»å‹ç»™å­ç»„ä»¶çš„ï¼Œåœ¨ Taro ä¸­æ˜¯å€ŸåŠ©ç»„ä»¶çš„äº‹ä»¶æœºåˆ¶æ¥å®ç°è¿™ä¸€ç‰¹æ€§ï¼Œè€Œå°ç¨‹åºä¸­ä¼ å…¥äº‹ä»¶çš„æ—¶å€™å±æ€§åå†™æ³•ä¸º <code>bindmyevent</code> æˆ–è€… <code>bind:myevent</code></p></blockquote> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> å½“è‡ªå®šä¹‰ç»„ä»¶è§¦å‘â€œmyeventâ€äº‹ä»¶æ—¶ï¼Œè°ƒç”¨â€œonMyEventâ€æ–¹æ³• <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component-tag-name</span> <span class="token attr-name">bindmyevent</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>onMyEvent<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> æˆ–è€…å¯ä»¥å†™æˆ <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component-tag-name</span> <span class="token attr-name"><span class="token namespace">bind:</span>myevent</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>onMyEvent<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><blockquote><p>æ‰€ä»¥ <code>Taro</code>ä¸­çº¦å®šç»„ä»¶ä¼ é€’å‡½æ•°å±æ€§åä»¥ <code>on</code> å¼€å¤´ï¼ŒåŒæ—¶è¿™ä¹Ÿå’Œå†…ç½®ç»„ä»¶çš„äº‹ä»¶ç»‘å®šå†™æ³•ä¿æŒä¸€è‡´äº†...</p></blockquote> <p><strong>å°ç¨‹åºç«¯ä¸è¦åœ¨ç»„ä»¶ä¸­æ‰“å°ä¼ å…¥çš„å‡½æ•°</strong></p> <blockquote><p>å‰é¢å·²ç»æåˆ°å°ç¨‹åºç«¯çš„ç»„ä»¶ä¼ å…¥å‡½æ•°çš„åŸç†ï¼Œæ‰€ä»¥åœ¨å°ç¨‹åºç«¯ä¸è¦åœ¨ç»„ä»¶ä¸­æ‰“å°ä¼ å…¥çš„å‡½æ•°ï¼Œå› ä¸ºæ‹¿ä¸åˆ°ç»“æœï¼Œä½†æ˜¯ <code>this.props.onXxx &amp;&amp; this.props.onXxx()</code> è¿™ç§åˆ¤æ–­å‡½æ•°æ˜¯å¦ä¼ å…¥æ¥è¿›è¡Œè°ƒç”¨çš„å†™æ³•æ˜¯å®Œå…¨æ”¯æŒçš„...</p></blockquote> <p><strong>å°ç¨‹åºç«¯ä¸è¦å°†åœ¨æ¨¡æ¿ä¸­ç”¨åˆ°çš„æ•°æ®è®¾ç½®ä¸º undefined</strong></p> <ul><li>ç”±äºå°ç¨‹åºä¸æ”¯æŒå°† <code>data</code> ä¸­ä»»ä½•ä¸€é¡¹çš„ <code>value</code> è®¾ä¸º <code>undefined</code> ï¼Œåœ¨ <code>setState</code> çš„æ—¶å€™ä¹Ÿè¯·é¿å…è¿™ä¹ˆç”¨ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>null</code> æ¥æ›¿ä»£ã€‚</li> <li>å°ç¨‹åºç«¯ä¸è¦åœ¨ç»„ä»¶ä¸­æ‰“å° <code>this.props.children</code>
åœ¨å¾®ä¿¡å°ç¨‹åºç«¯æ˜¯é€šè¿‡<code>&lt;slot /&gt;</code> æ¥å®ç°å¾€è‡ªå®šä¹‰ç»„ä»¶ä¸­ä¼ å…¥å…ƒç´ çš„ï¼Œè€Œ <code>Taro</code> åˆ©ç”¨ <code>this.props.children</code> åœ¨ç¼–è¯‘æ—¶å®ç°äº†è¿™ä¸€åŠŸèƒ½ï¼Œ <code>this.props.children</code> ä¼šç›´æ¥è¢«ç¼–è¯‘æˆ <code>&lt;slot /&gt;</code> æ ‡ç­¾ï¼Œæ‰€ä»¥å®ƒåœ¨å°ç¨‹åºç«¯å±äºè¯­æ³•ç³–çš„å­˜åœ¨ï¼Œè¯·ä¸è¦åœ¨ç»„ä»¶ä¸­æ‰“å°å®ƒ...</li></ul> <p><strong>ç»„ä»¶ state ä¸ props é‡Œå­—æ®µé‡åçš„é—®é¢˜</strong></p> <blockquote><p>ä¸è¦åœ¨ <code>state</code>ä¸ <code>props</code> ä¸Šç”¨åŒåçš„å­—æ®µï¼Œå› ä¸ºè¿™äº›è¢«å­—æ®µåœ¨å¾®ä¿¡å°ç¨‹åºä¸­éƒ½ä¼šæŒ‚åœ¨ <code>data</code> ä¸Š</p></blockquote> <p><strong>å°ç¨‹åºä¸­é¡µé¢ç”Ÿå‘½å‘¨æœŸ componentWillMount ä¸ä¸€è‡´é—®é¢˜</strong></p> <blockquote><p>ç”±äºå¾®ä¿¡å°ç¨‹åºé‡Œé¡µé¢åœ¨ <code>onLoad</code> æ—¶æ‰èƒ½æ‹¿åˆ°é¡µé¢çš„è·¯ç”±å‚æ•°ï¼Œè€Œé¡µé¢ <code>onLoad</code> å‰ç»„ä»¶éƒ½å·²ç» <code>attached</code> äº†ã€‚å› æ­¤é¡µé¢çš„ <code>componentWillMount</code> å¯èƒ½ä¼šä¸é¢„æœŸä¸å¤ªä¸€è‡´ã€‚ä¾‹å¦‚ï¼š</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// é”™è¯¯å†™æ³•</span>
<span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// åœ¨ willMount ä¹‹å‰æ— æ³•æ‹¿åˆ°è·¯ç”±å‚æ•°</span>
  <span class="token keyword">const</span> abc <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span>params<span class="token punctuation">.</span>abc
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Custom adc<span class="token operator">=</span><span class="token punctuation">{</span>abc<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ­£ç¡®å†™æ³•</span>
<span class="token function">componentWillMount</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> abc <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span>params<span class="token punctuation">.</span>abc
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    abc
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å¢åŠ ä¸€ä¸ªå…¼å®¹åˆ¤æ–­</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>abc <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>Custom adc<span class="token operator">=</span><span class="token punctuation">{</span>abc<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¯¹äºä¸éœ€è¦ç­‰åˆ°é¡µé¢ <code>willMount</code> ä¹‹åå–è·¯ç”±å‚æ•°çš„é¡µé¢åˆ™æ²¡æœ‰ä»»ä½•å½±å“...</p> <p><strong>JS ç¼–ç å¿…é¡»ç”¨å•å¼•å·</strong></p> <blockquote><p>åœ¨ <code>Taro</code> ä¸­ï¼Œ<code>JS</code> ä»£ç é‡Œå¿…é¡»ä¹¦å†™å•å¼•å·ï¼Œç‰¹åˆ«æ˜¯ <code>JSX</code> ä¸­ï¼Œå¦‚æœå‡ºç°åŒå¼•å·ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯</p></blockquote> <p><strong>process.env çš„ä½¿ç”¨</strong></p> <blockquote><p>ä¸è¦ä»¥è§£æ„çš„æ–¹å¼æ¥è·å–é€šè¿‡ <code>env</code>é…ç½®çš„ <code>process.env</code> ç¯å¢ƒå˜é‡ï¼Œè¯·ç›´æ¥ä»¥å®Œæ•´ä¹¦å†™çš„æ–¹å¼ <code>process.env.NODE_ENV</code>æ¥è¿›è¡Œä½¿ç”¨</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// é”™è¯¯å†™æ³•ï¼Œä¸æ”¯æŒ</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token constant">NODE_ENV</span> <span class="token operator">=</span> <span class="token string">'development'</span> <span class="token punctuation">}</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ­£ç¡®å†™æ³•</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token operator">...</span>
</code></pre></div><p><strong>é¢„åŠ è½½</strong></p> <blockquote><p>åœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œä»è°ƒç”¨ <code>Taro.navigateTo</code>ã€<code>Taro.redirectTo</code> æˆ– <code>Taro.switchTab</code> åï¼Œåˆ°é¡µé¢è§¦å‘<code>componentWillMount</code> ä¼šæœ‰ä¸€å®šå»¶æ—¶ã€‚å› æ­¤ä¸€äº›ç½‘ç»œè¯·æ±‚å¯ä»¥æå‰åˆ°å‘èµ·è·³è½¬å‰ä¸€åˆ»å»è¯·æ±‚</p></blockquote> <p>Taro æä¾›äº† <code>componentWillPreload</code> é’©å­ï¼Œå®ƒæ¥æ”¶é¡µé¢è·³è½¬çš„å‚æ•°ä½œä¸ºå‚æ•°ã€‚å¯ä»¥æŠŠéœ€è¦é¢„åŠ è½½çš„å†…å®¹é€šè¿‡ <code>return</code> è¿”å›ï¼Œç„¶ååœ¨é¡µé¢è§¦å‘ <code>componentWillMount</code> åå³å¯é€šè¿‡ <code>this.$preloadData</code> è·å–åˆ°é¢„åŠ è½½çš„å†…å®¹ã€‚...</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">componentWillMount</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'isFetching: '</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isFetching<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$preloadData
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'res: '</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isFetching <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentWillPreload</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">fetchData</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>isFetching <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token operator">...</span>
</code></pre></div><h2 id="ä¸‰ã€taro-è®¾è®¡æ€æƒ³åŠæ¶æ„"><a href="#ä¸‰ã€taro-è®¾è®¡æ€æƒ³åŠæ¶æ„" class="header-anchor">#</a> ä¸‰ã€Taro è®¾è®¡æ€æƒ³åŠæ¶æ„</h2> <blockquote><p>åœ¨ Taro ä¸­é‡‡ç”¨çš„æ˜¯ç¼–è¯‘åŸç†çš„æ€æƒ³ï¼Œæ‰€è°“ç¼–è¯‘åŸç†ï¼Œå°±æ˜¯ä¸€ä¸ªå¯¹è¾“å…¥çš„æºä»£ç è¿›è¡Œè¯­æ³•åˆ†æï¼Œè¯­æ³•æ ‘æ„å»ºï¼Œéšåå¯¹è¯­æ³•æ ‘è¿›è¡Œè½¬æ¢æ“ä½œå†è§£æç”Ÿæˆç›®æ ‡ä»£ç çš„è¿‡ç¨‹ã€‚</p></blockquote> <p><img src="https://poetries1.gitee.io/img-repo/2020/09/243.png" alt=""></p> <h3 id="_3-1-æŠ¹å¹³å¤šç«¯å·®å¼‚"><a href="#_3-1-æŠ¹å¹³å¤šç«¯å·®å¼‚" class="header-anchor">#</a> 3.1 æŠ¹å¹³å¤šç«¯å·®å¼‚</h3> <blockquote><p>åŸºäºç¼–è¯‘åŸç†ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥å°† Taro æºç ç¼–è¯‘æˆä¸åŒç«¯ä¸Šå¯ä»¥è¿è¡Œçš„ä»£ç äº†ï¼Œä½†æ˜¯è¿™å¯¹äºå®ç°å¤šç«¯å¼€å‘è¿˜æ˜¯è¿œè¿œä¸å¤Ÿã€‚å› ä¸ºä¸åŒçš„å¹³å°éƒ½æœ‰è‡ªå·±çš„ç‰¹æ€§ï¼Œæ¯ä¸€ä¸ªå¹³å°éƒ½ä¸å°½ç›¸åŒï¼Œè¿™äº›å·®å¼‚ä¸»è¦ä½“ç°åœ¨ä¸åŒçš„ç»„ä»¶æ ‡å‡†ä¸ä¸åŒçš„ API æ ‡å‡†ä»¥åŠä¸åŒçš„è¿è¡Œæœºåˆ¶ä¸Š</p></blockquote> <p>ä»¥å°ç¨‹åºå’Œ Web ç«¯ä¸ºä¾‹</p> <p><img src="https://poetries1.gitee.io/img-repo/2020/09/244.png" alt=""> <img src="https://poetries1.gitee.io/img-repo/2020/09/245.png" alt=""></p> <ul><li>å¯ä»¥çœ‹å‡ºå°ç¨‹åºå’Œ Web ç«¯ä¸Šç»„ä»¶æ ‡å‡†ä¸ API æ ‡å‡†æœ‰å¾ˆå¤§å·®å¼‚ï¼Œè¿™äº›å·®å¼‚ä»…ä»…é€šè¿‡ä»£ç ç¼–è¯‘æ‰‹æ®µæ˜¯æ— æ³•æŠ¹å¹³çš„ï¼Œä¾‹å¦‚ä½ ä¸èƒ½ç›´æ¥åœ¨ç¼–è¯‘æ—¶å°†å°ç¨‹åºçš„ <code>&lt;view /&gt;</code> ç›´æ¥ç¼–è¯‘æˆ <code>&lt;div /&gt;</code>ï¼Œå› ä¸ºä»–ä»¬è™½ç„¶çœ‹ä¸Šå»æœ‰äº›ç±»ä¼¼ï¼Œä½†æ˜¯ä»–ä»¬çš„ç»„ä»¶å±æ€§æœ‰å¾ˆå¤§ä¸åŒçš„ï¼Œä»…ä»…ä¾é ä»£ç ç¼–è¯‘ï¼Œæ— æ³•åšåˆ°ä¸€è‡´ï¼ŒåŒç†ï¼Œä¼—å¤š <code>API</code> ä¹Ÿé¢ä¸´ä¸€æ ·çš„æƒ…å†µã€‚é’ˆå¯¹è¿™æ ·çš„æƒ…å†µï¼Œ<code>Taro</code> é‡‡ç”¨äº†å®šåˆ¶ä¸€å¥—è¿è¡Œæ—¶æ ‡å‡†æ¥æŠ¹å¹³ä¸åŒå¹³å°ä¹‹é—´çš„å·®å¼‚ã€‚</li> <li>è¿™ä¸€å¥—æ ‡å‡†ä¸»è¦ä»¥ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼ŒåŒ…æ‹¬æ ‡å‡†è¿è¡Œæ—¶æ¡†æ¶ã€æ ‡å‡†åŸºç¡€ç»„ä»¶åº“ã€æ ‡å‡†ç«¯èƒ½åŠ› APIï¼Œå…¶ä¸­è¿è¡Œæ—¶æ¡†æ¶å’Œ API å¯¹åº” <code>@taro/taro</code>ï¼Œç»„ä»¶åº“å¯¹åº” <code>@tarojs/components</code>ï¼Œé€šè¿‡åœ¨ä¸åŒç«¯å®ç°è¿™äº›æ ‡å‡†ï¼Œä»è€Œè¾¾åˆ°å»å·®å¼‚åŒ–çš„ç›®çš„...</li></ul> <p><img src="https://poetries1.gitee.io/img-repo/2020/09/245.png" alt=""> <img src="https://poetries1.gitee.io/img-repo/2020/09/246.png" alt=""></p> <h2 id="å››ã€cli-åŸç†åŠä¸åŒç«¯çš„è¿è¡Œæœºåˆ¶"><a href="#å››ã€cli-åŸç†åŠä¸åŒç«¯çš„è¿è¡Œæœºåˆ¶" class="header-anchor">#</a> å››ã€CLI åŸç†åŠä¸åŒç«¯çš„è¿è¡Œæœºåˆ¶</h2> <h3 id="_4-1-taro-cli-åŒ…"><a href="#_4-1-taro-cli-åŒ…" class="header-anchor">#</a> 4.1 taro-cli åŒ…</h3> <h4 id="_4-1-1-taro-å‘½ä»¤"><a href="#_4-1-1-taro-å‘½ä»¤" class="header-anchor">#</a> 4.1.1 Taro å‘½ä»¤</h4> <blockquote><p><code>taro-cli</code> åŒ…ä½äº <code>Taro</code> å·¥ç¨‹çš„ <code>Packages</code> ç›®å½•ä¸‹ï¼Œé€šè¿‡ <code>npm install -g @tarojs/cli</code> å…¨å±€å®‰è£…åï¼Œå°†ä¼šç”Ÿæˆä¸€ä¸ª <code>Taro</code> å‘½ä»¤ã€‚ä¸»è¦è´Ÿè´£é¡¹ç›®åˆå§‹åŒ–ã€ç¼–è¯‘ã€æ„å»ºç­‰ã€‚ç›´æ¥åœ¨å‘½ä»¤è¡Œè¾“å…¥ <code>Taro</code> ï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹æç¤º...</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>âœ taro
ğŸ‘½ Taro v0<span class="token punctuation">.</span><span class="token number">0.63</span>


  Usage<span class="token punctuation">:</span> taro <span class="token operator">&lt;</span>command<span class="token operator">&gt;</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span>

  Options<span class="token punctuation">:</span>

    <span class="token operator">-</span><span class="token constant">V</span><span class="token punctuation">,</span> <span class="token operator">--</span>version       output the version number
    <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">--</span>help          output usage information

  Commands<span class="token punctuation">:</span>

    init <span class="token punctuation">[</span>projectName<span class="token punctuation">]</span>  Init a project <span class="token keyword">with</span> <span class="token keyword">default</span> templete
    build               Build a project <span class="token keyword">with</span> options
    update              Update packages <span class="token keyword">of</span> taro
    help <span class="token punctuation">[</span>cmd<span class="token punctuation">]</span>          display help <span class="token keyword">for</span> <span class="token punctuation">[</span>cmd<span class="token punctuation">]</span><span class="token operator">...</span>

</code></pre></div><p>é‡Œé¢åŒ…å«äº† Taro æ‰€æœ‰å‘½ä»¤ç”¨æ³•åŠä½œç”¨ã€‚</p> <h4 id="_4-1-2-åŒ…ç®¡ç†ä¸å‘å¸ƒ"><a href="#_4-1-2-åŒ…ç®¡ç†ä¸å‘å¸ƒ" class="header-anchor">#</a> 4.1.2 åŒ…ç®¡ç†ä¸å‘å¸ƒ</h4> <ul><li>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ <code>taro-cli</code> åŒ…ä¸ <code>Taro</code> å·¥ç¨‹çš„å…³ç³»ã€‚</li> <li>å°† <code>Taro</code> å·¥ç¨‹ <code>Clone</code> ä¹‹åï¼Œå¯ä»¥çœ‹åˆ°å·¥ç¨‹çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼Œæ•´ä½“ç»“æ„è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°çš„ï¼š</li></ul> <div class="language- extra-class"><pre class="language-text"><code>.
â”œâ”€â”€ CHANGELOG.md
â”œâ”€â”€ LICENSE
â”œâ”€â”€ README.md
â”œâ”€â”€ build
â”œâ”€â”€ docs
â”œâ”€â”€ lerna-debug.log
â”œâ”€â”€ lerna.json        // Lerna é…ç½®æ–‡ä»¶
â”œâ”€â”€ package.json
â”œâ”€â”€ packages
â”‚Â Â  â”œâ”€â”€ eslint-config-taro
â”‚Â Â  â”œâ”€â”€ eslint-plugin-taro
â”‚Â Â  â”œâ”€â”€ postcss-plugin-constparse
â”‚Â Â  â”œâ”€â”€ postcss-pxtransform
â”‚Â Â  â”œâ”€â”€ taro
â”‚Â Â  â”œâ”€â”€ taro-async-await
â”‚Â Â  â”œâ”€â”€ taro-cli
â”‚Â Â  â”œâ”€â”€ taro-components
â”‚Â Â  â”œâ”€â”€ taro-components-rn
â”‚Â Â  â”œâ”€â”€ taro-h5
â”‚Â Â  â”œâ”€â”€ taro-plugin-babel
â”‚Â Â  â”œâ”€â”€ taro-plugin-csso
â”‚Â Â  â”œâ”€â”€ taro-plugin-sass
â”‚Â Â  â”œâ”€â”€ taro-plugin-uglifyjs
â”‚Â Â  â”œâ”€â”€ taro-redux
â”‚Â Â  â”œâ”€â”€ taro-redux-h5
â”‚Â Â  â”œâ”€â”€ taro-rn
â”‚Â Â  â”œâ”€â”€ taro-rn-runner
â”‚Â Â  â”œâ”€â”€ taro-router
â”‚Â Â  â”œâ”€â”€ taro-transformer-wx
â”‚Â Â  â”œâ”€â”€ taro-weapp
â”‚Â Â  â””â”€â”€ taro-webpack-runner
â””â”€â”€ yarn.lock...
</code></pre></div><blockquote><p><code>Taro</code> é¡¹ç›®ä¸»è¦æ˜¯ç”±ä¸€ç³»åˆ— <code>NPM</code> åŒ…ç»„æˆï¼Œä½äºå·¥ç¨‹çš„ <code>Packages</code> ç›®å½•ä¸‹ã€‚å®ƒçš„åŒ…ç®¡ç†æ–¹å¼å’Œ <code>Babel</code> é¡¹ç›®ä¸€æ ·ï¼Œå°†æ•´ä¸ªé¡¹ç›®ä½œä¸ºä¸€ä¸ª <code>monorepo</code> æ¥è¿›è¡Œç®¡ç†ï¼Œå¹¶ä¸”åŒæ ·ä½¿ç”¨äº†åŒ…ç®¡ç†å·¥å…· <code>Lerna</code></p></blockquote> <p><code>Packages</code> ç›®å½•ä¸‹åå‡ ä¸ªåŒ…ä¸­ï¼Œæœ€å¸¸ç”¨çš„é¡¹ç›®åˆå§‹åŒ–ä¸æ„å»ºçš„å‘½ä»¤è¡Œå·¥å…· <code>Taro CLI</code> å°±æ˜¯å…¶ä¸­ä¸€ä¸ªã€‚åœ¨ <code>Taro</code> å·¥ç¨‹æ ¹ç›®å½•è¿è¡Œ <code>lerna publish</code> å‘½ä»¤ä¹‹åï¼Œ<code>lerna.json</code> é‡Œé¢é…ç½®å¥½çš„æ‰€æœ‰çš„åŒ…ä¼šè¢«å‘å¸ƒåˆ° <code>NPM</code> ä¸Š</p> <h4 id="_4-1-3-taro-cli-åŒ…çš„ç›®å½•ç»“æ„å¦‚ä¸‹"><a href="#_4-1-3-taro-cli-åŒ…çš„ç›®å½•ç»“æ„å¦‚ä¸‹" class="header-anchor">#</a> 4.1.3 taro-cli åŒ…çš„ç›®å½•ç»“æ„å¦‚ä¸‹</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">.</span><span class="token operator">/</span>
â”œâ”€â”€ bin        <span class="token comment">// å‘½ä»¤è¡Œ</span>
â”‚   â”œâ”€â”€ taro              <span class="token comment">// taro å‘½ä»¤</span>
â”‚   â”œâ”€â”€ taro<span class="token operator">-</span>build        <span class="token comment">// taro build å‘½ä»¤</span>
â”‚   â”œâ”€â”€ taro<span class="token operator">-</span>update       <span class="token comment">// taro update å‘½ä»¤</span>
â”‚   â””â”€â”€ taro<span class="token operator">-</span>init         <span class="token comment">// taro init å‘½ä»¤</span>
â”œâ”€â”€ <span class="token keyword">package</span><span class="token punctuation">.</span>json
â”œâ”€â”€ node_modules
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ build<span class="token punctuation">.</span>js        <span class="token comment">// taro build å‘½ä»¤è°ƒç”¨ï¼Œæ ¹æ® type ç±»å‹è°ƒç”¨ä¸åŒçš„è„šæœ¬</span>
â”‚   â”œâ”€â”€ config
â”‚   â”‚   â”œâ”€â”€ babel<span class="token punctuation">.</span>js        <span class="token comment">// Babel é…ç½®</span>
â”‚   â”‚   â”œâ”€â”€ babylon<span class="token punctuation">.</span>js      <span class="token comment">// JavaScript è§£æå™¨ babylon é…ç½®</span>
â”‚   â”‚   â”œâ”€â”€ browser_list<span class="token punctuation">.</span>js <span class="token comment">// autoprefixer browsers é…ç½®</span>
â”‚   â”‚   â”œâ”€â”€ index<span class="token punctuation">.</span>js        <span class="token comment">// ç›®å½•ååŠå…¥å£æ–‡ä»¶åç›¸å…³é…ç½®</span>
â”‚   â”‚   â””â”€â”€ uglify<span class="token punctuation">.</span>js
â”‚   â”œâ”€â”€ creator<span class="token punctuation">.</span>js
â”‚   â”œâ”€â”€ h5<span class="token punctuation">.</span>js       <span class="token comment">// æ„å»ºh5 å¹³å°ä»£ç </span>
â”‚   â”œâ”€â”€ project<span class="token punctuation">.</span>js  <span class="token comment">// taro init å‘½ä»¤è°ƒç”¨ï¼Œåˆå§‹åŒ–é¡¹ç›®</span>
â”‚   â”œâ”€â”€ rn<span class="token punctuation">.</span>js       <span class="token comment">// æ„å»ºReact Native å¹³å°ä»£ç </span>
â”‚   â”œâ”€â”€ util        <span class="token comment">// ä¸€ç³»åˆ—å·¥å…·å‡½æ•°</span>
â”‚   â”‚   â”œâ”€â”€ index<span class="token punctuation">.</span>js
â”‚   â”‚   â”œâ”€â”€ npm<span class="token punctuation">.</span>js
â”‚   â”‚   â””â”€â”€ resolve_npm_files<span class="token punctuation">.</span>js
â”‚   â””â”€â”€ weapp<span class="token punctuation">.</span>js        <span class="token comment">// æ„å»ºå°ç¨‹åºä»£ç è½¬æ¢</span>
â”œâ”€â”€ templates           <span class="token comment">// è„šæ‰‹æ¶æ¨¡ç‰ˆ</span>
â”‚   â””â”€â”€ <span class="token keyword">default</span>
â”‚       â”œâ”€â”€ appjs
â”‚       â”œâ”€â”€ config
â”‚       â”‚   â”œâ”€â”€ dev
â”‚       â”‚   â”œâ”€â”€ index
â”‚       â”‚   â””â”€â”€ prod
â”‚       â”œâ”€â”€ editorconfig
â”‚       â”œâ”€â”€ eslintrc
â”‚       â”œâ”€â”€ gitignor<span class="token operator">...</span>
</code></pre></div><blockquote><p>é€šè¿‡ä¸Šé¢çš„ç›®å½•æ ‘å¯ä»¥å‘ç°ï¼Œ<code>taro-cli</code> å·¥ç¨‹çš„æ–‡ä»¶å¹¶ä¸ç®—å¤šï¼Œä¸»è¦ç›®å½•æœ‰ï¼š<code>/bin</code>ã€<code>/src</code>ã€<code>/template</code></p></blockquote> <h3 id="_4-2-ç”¨åˆ°çš„æ ¸å¿ƒåº“"><a href="#_4-2-ç”¨åˆ°çš„æ ¸å¿ƒåº“" class="header-anchor">#</a> 4.2 ç”¨åˆ°çš„æ ¸å¿ƒåº“</h3> <ul><li><a href="https://github.com/tj/commander.js/" target="_blank" rel="noopener noreferrer">tj/commander.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> Node.js - å‘½ä»¤è¡Œæ¥å£å…¨é¢çš„è§£å†³æ–¹æ¡ˆ</li> <li><a href="https://github.com/jprichardson/node-fs-extra" target="_blank" rel="noopener noreferrer">jprichardson/node-fs-extra<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - åœ¨ Node.js çš„ fs åŸºç¡€ä¸Šå¢åŠ äº†ä¸€äº›æ–°çš„æ–¹æ³•ï¼Œæ›´å¥½ç”¨ï¼Œè¿˜å¯ä»¥æ‹·è´æ¨¡æ¿ã€‚</li> <li><a href="https://github.com/chalk/chalk" target="_blank" rel="noopener noreferrer">chalk/chalk<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - å¯ä»¥ç”¨äºæ§åˆ¶ç»ˆç«¯è¾“å‡ºå­—ç¬¦ä¸²çš„æ ·å¼</li> <li><a href="https://github.com/SBoudrias/Inquirer.js/" target="_blank" rel="noopener noreferrer">SBoudrias/Inquirer.js - Node.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> å‘½ä»¤è¡Œäº¤äº’å·¥å…·ï¼Œé€šç”¨çš„å‘½ä»¤è¡Œç”¨æˆ·ç•Œé¢é›†åˆï¼Œå¯ä»¥å’Œç”¨æˆ·è¿›è¡Œäº¤äº’</li> <li><a href="https://github.com/sindresorhus/ora" target="_blank" rel="noopener noreferrer">sindresorhus/ora<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - å®ç°åŠ è½½ä¸­çš„çŠ¶æ€æ˜¯ä¸€ä¸ª Loading åŠ å‰é¢è½¬èµ·æ¥çš„å°åœˆåœˆï¼ŒæˆåŠŸäº†æ˜¯ä¸€ä¸ª Success åŠ å‰é¢ä¸€ä¸ªå°é’©é’©</li> <li><a href="https://github.com/sboudrias/mem-fs-editor" target="_blank" rel="noopener noreferrer">SBoudrias/mem-fs-editor<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - æä¾›ä¸€ç³»åˆ— APIï¼Œæ–¹ä¾¿æ“ä½œæ¨¡æ¿æ–‡ä»¶</li> <li><a href="https://github.com/shelljs/shelljs" target="_blank" rel="noopener noreferrer">shelljs/shelljs <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - ShellJS æ˜¯ Node.js æ‰©å±•ï¼Œç”¨äºå®ç° Unix shell å‘½ä»¤æ‰§è¡Œã€‚</li></ul> <h3 id="_4-3-taro-init"><a href="#_4-3-taro-init" class="header-anchor">#</a> 4.3 Taro Init</h3> <p><img src="https://poetries1.gitee.io/img-repo/2020/09/247.png" alt=""></p> <blockquote><p>å½“æˆ‘ä»¬å…¨å±€å®‰è£… <code>taro-cli</code> åŒ…ä¹‹åï¼Œæˆ‘ä»¬çš„å‘½ä»¤è¡Œé‡Œå°±æœ‰äº† Taro å‘½ä»¤</p></blockquote> <ul><li>é‚£ä¹ˆ <code>Taro</code> å‘½ä»¤æ˜¯æ€æ ·æ·»åŠ è¿›å»çš„å‘¢ï¼Ÿå…¶åŸå› åœ¨äº <code>package.json</code> é‡Œé¢çš„ <code>bin</code>å­—æ®µï¼š</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;bin&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;taro&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;bin/taro&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸Šé¢ä»£ç æŒ‡å®šï¼ŒTaro å‘½ä»¤å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸º <code>bin/taro</code> ã€‚NPM ä¼šå¯»æ‰¾è¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨ <code>[prefix]/bin</code> ç›®å½•ä¸‹å»ºç«‹ç¬¦å·é“¾æ¥ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒTaro ä¼šå»ºç«‹ç¬¦å·é“¾æ¥ <code>[prefix]/bin/taro</code>ã€‚ç”±äº <code>[prefix]/bin</code>ç›®å½•ä¼šåœ¨è¿è¡Œæ—¶åŠ å…¥ç³»ç»Ÿçš„ PATH å˜é‡ï¼Œå› æ­¤åœ¨è¿è¡Œ NPM æ—¶ï¼Œå°±å¯ä»¥ä¸å¸¦è·¯å¾„ï¼Œç›´æ¥é€šè¿‡å‘½ä»¤æ¥è°ƒç”¨è¿™äº›è„šæœ¬ã€‚</p> <ul><li>å…³äº<code>prefix</code>ï¼Œå¯ä»¥é€šè¿‡<code>npm config get prefix</code>è·å–ã€‚</li></ul> <div class="language- extra-class"><pre class="language-text"><code>$ npm config get prefix
/usr/local
</code></pre></div><p>é€šè¿‡ä¸‹åˆ—å‘½ä»¤å¯ä»¥æ›´åŠ æ¸…æ™°çš„çœ‹åˆ°å®ƒä»¬ä¹‹é—´çš„ç¬¦å·é“¾æ¥...</p> <div class="language- extra-class"><pre class="language-text"><code>$ ls -al `which taro`
lrwxr-xr-x  1 chengshuai  admin  40  6 15 10:51 /usr/local/bin/taro -&gt; ../lib/node_modules/@tarojs/cli/bin/taro...
</code></pre></div><h4 id="_4-3-1-å‘½ä»¤å…³è”ä¸å‚æ•°è§£æ"><a href="#_4-3-1-å‘½ä»¤å…³è”ä¸å‚æ•°è§£æ" class="header-anchor">#</a> 4.3.1 å‘½ä»¤å…³è”ä¸å‚æ•°è§£æ</h4> <blockquote><p>è¿™é‡Œå°±ä¸å¾—ä¸æåˆ°ä¸€ä¸ªæœ‰ç”¨çš„åŒ…ï¼š<code>tj/commander.js</code> ï¼Œ<code>Node.js</code> å‘½ä»¤è¡Œæ¥å£å…¨é¢çš„è§£å†³æ–¹æ¡ˆï¼Œçµæ„Ÿæ¥è‡ªäº Ruby's commanderã€‚å¯ä»¥è‡ªåŠ¨çš„è§£æå‘½ä»¤å’Œå‚æ•°ï¼Œåˆå¹¶å¤šé€‰é¡¹ï¼Œå¤„ç†çŸ­å‚ç­‰ç­‰ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œä¸Šæ‰‹ç®€å•</p></blockquote> <p>æ›´ä¸»è¦çš„ï¼Œ<code>commander</code> æ”¯æŒ <code>Git</code> é£æ ¼çš„å­å‘½ä»¤å¤„ç†ï¼Œå¯ä»¥æ ¹æ®å­å‘½ä»¤è‡ªåŠ¨å¼•å¯¼åˆ°ä»¥ç‰¹å®šæ ¼å¼å‘½åçš„å‘½ä»¤æ‰§è¡Œæ–‡ä»¶ï¼Œæ–‡ä»¶åçš„æ ¼å¼æ˜¯ <code>[command]-[subcommand]</code>ï¼Œä¾‹å¦‚</p> <ul><li><code>taro init</code> =&gt; <code>taro-init</code></li> <li><code>taro build</code> =&gt; <code>taro-build</code></li> <li><code>/bin/taro</code> æ–‡ä»¶å†…å®¹ä¸å¤šï¼Œæ ¸å¿ƒä»£ç ä¹Ÿå°±é‚£å‡ è¡Œ <code>.command()</code> å‘½ä»¤ï¼š</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>#<span class="token operator">!</span> <span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>env node

<span class="token keyword">const</span> program <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'commander'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>getPkgVersion<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../src/util'</span><span class="token punctuation">)</span>

program
  <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token function">getPkgVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">usage</span><span class="token punctuation">(</span><span class="token string">'&lt;command&gt; [options]'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">'init [projectName]'</span><span class="token punctuation">,</span> <span class="token string">'Init a project with default templete'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">'build'</span><span class="token punctuation">,</span> <span class="token string">'Build a project with options'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">'update'</span><span class="token punctuation">,</span> <span class="token string">'Update packages of taro'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">)</span><span class="token operator">...</span>
</code></pre></div><blockquote><p>é€šè¿‡ä¸Šé¢ä»£ç å¯ä»¥å‘ç°ï¼Œ<code>init</code>ï¼Œ<code>build</code>	ï¼Œ<code>update</code>ç­‰å‘½ä»¤éƒ½æ˜¯é€šè¿‡<code>.command(name, description)</code>æ–¹æ³•å®šä¹‰çš„ï¼Œç„¶åé€šè¿‡ <code>.parse(arg)</code> æ–¹æ³•è§£æå‚æ•°</p></blockquote> <h4 id="_4-3-2-å‚æ•°è§£æåŠä¸ç”¨æˆ·äº¤äº’"><a href="#_4-3-2-å‚æ•°è§£æåŠä¸ç”¨æˆ·äº¤äº’" class="header-anchor">#</a> 4.3.2 å‚æ•°è§£æåŠä¸ç”¨æˆ·äº¤äº’</h4> <ul><li><code>commander</code> åŒ…å¯ä»¥è‡ªåŠ¨è§£æå‘½ä»¤å’Œå‚æ•°ï¼Œåœ¨é…ç½®å¥½å‘½ä»¤ä¹‹åï¼Œè¿˜èƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆ <code>help</code>ï¼ˆå¸®åŠ©ï¼‰å‘½ä»¤å’Œ<code>version</code>ï¼ˆç‰ˆæœ¬æŸ¥çœ‹ï¼‰ å‘½ä»¤ã€‚å¹¶ä¸”é€šè¿‡<code>program.args</code>ä¾¿å¯ä»¥è·å–å‘½ä»¤è¡Œçš„å‚æ•°ï¼Œç„¶åå†æ ¹æ®å‚æ•°æ¥è°ƒç”¨ä¸åŒçš„è„šæœ¬ã€‚</li> <li>ä½†å½“æˆ‘ä»¬è¿è¡Œ <code>taro init</code> å‘½ä»¤åï¼Œå¦‚ä¸‹æ‰€ç¤ºçš„å‘½ä»¤è¡Œäº¤äº’åˆæ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ...</li></ul> <div class="language- extra-class"><pre class="language-text"><code>$ taro init taroDemo
Taro å³å°†åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®!
Need help? Go and open issue: https://github.com/NervJS/taro/issues/new

Taro v0.0.50

? è¯·è¾“å…¥é¡¹ç›®ä»‹ç»ï¼
? è¯·é€‰æ‹©æ¨¡æ¿ é»˜è®¤æ¨¡æ¿...
</code></pre></div><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯ <code>SBoudrias/Inquirer.js</code> æ¥å¤„ç†å‘½ä»¤è¡Œäº¤äº’ã€‚</p> <p>ç”¨æ³•å…¶å®å¾ˆç®€å•</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> inquirer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'inquirer'</span><span class="token punctuation">)</span>  <span class="token comment">// npm i inquirer -D</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> conf<span class="token punctuation">.</span>description <span class="token operator">!==</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      prompts<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> <span class="token string">'input'</span><span class="token punctuation">,</span>
        name<span class="token punctuation">:</span> <span class="token string">'description'</span><span class="token punctuation">,</span>
        message<span class="token punctuation">:</span> <span class="token string">'è¯·è¾“å…¥é¡¹ç›®ä»‹ç»ï¼'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token operator">...</span>
</code></pre></div><ul><li><code>prompt()</code>æ¥å—ä¸€ä¸ªé—®é¢˜å¯¹è±¡çš„æ•°æ®ï¼Œåœ¨ç”¨æˆ·ä¸ç»ˆç«¯äº¤äº’è¿‡ç¨‹ä¸­ï¼Œå°†ç”¨æˆ·çš„è¾“å…¥å­˜æ”¾åœ¨ä¸€ä¸ªç­”æ¡ˆå¯¹è±¡ä¸­ï¼Œç„¶åè¿”å›ä¸€ä¸ª<code>Promise</code>ï¼Œé€šè¿‡<code>then()</code>è·å–åˆ°è¿™ä¸ªç­”æ¡ˆå¯¹è±¡ã€‚
å€Ÿæ­¤ï¼Œæ–°é¡¹ç›®çš„åç§°ã€ç‰ˆæœ¬å·ã€æè¿°ç­‰ä¿¡æ¯å¯ä»¥ç›´æ¥é€šè¿‡ç»ˆç«¯äº¤äº’æ’å…¥åˆ°é¡¹ç›®æ¨¡æ¿ä¸­ï¼Œå®Œå–„äº¤äº’æµç¨‹ã€‚</li> <li>å½“ç„¶ï¼Œäº¤äº’çš„é—®é¢˜ä¸ä»…é™äºæ­¤ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±é¡¹ç›®çš„æƒ…å†µï¼Œæ·»åŠ æ›´å¤šçš„äº¤äº’é—®é¢˜ã€‚<code>inquirer.js</code>å¼ºå¤§çš„åœ°æ–¹åœ¨äºï¼Œæ”¯æŒå¾ˆå¤šç§äº¤äº’ç±»å‹ï¼Œé™¤äº†ç®€å•çš„inputï¼Œè¿˜æœ‰<code>confirm</code>ã€<code>list</code>ã€<code>password</code>ã€<code>checkbox</code>ç­‰ï¼Œå…·ä½“å¯ä»¥å‚è§é¡¹ç›®çš„å·¥ç¨‹ READMEã€‚
æ­¤å¤–ï¼Œä½ åœ¨æ‰§è¡Œå¼‚æ­¥æ“ä½œçš„è¿‡ç¨‹ä¸­ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ <code>sindresorhus/ora</code> æ¥æ·»åŠ ä¸€ä¸‹ <code>Loading</code> æ•ˆæœã€‚ä½¿ç”¨ <code>chalk/chalk</code> ç»™ç»ˆç«¯çš„è¾“å‡ºæ·»åŠ å„ç§æ ·å¼...</li></ul> <h4 id="_4-3-3-æ¨¡ç‰ˆæ–‡ä»¶æ“ä½œ"><a href="#_4-3-3-æ¨¡ç‰ˆæ–‡ä»¶æ“ä½œ" class="header-anchor">#</a> 4.3.3 æ¨¡ç‰ˆæ–‡ä»¶æ“ä½œ</h4> <p><strong>æœ€åå°±æ˜¯æ¨¡ç‰ˆæ–‡ä»¶æ“ä½œäº†ï¼Œä¸»è¦åˆ†ä¸ºä¸¤å¤§å—ï¼š</strong></p> <ul><li>å°†è¾“å…¥çš„å†…å®¹æ’å…¥åˆ°æ¨¡æ¿ä¸­</li> <li>æ ¹æ®å‘½ä»¤åˆ›å»ºå¯¹åº”ç›®å½•ç»“æ„ï¼Œcopy æ–‡ä»¶</li> <li>æ›´æ–°å·²å­˜åœ¨æ–‡ä»¶å†…å®¹</li></ul> <blockquote><p>è¿™äº›æ“ä½œåŸºæœ¬éƒ½æ˜¯åœ¨ <code>/template/index.js</code> æ–‡ä»¶é‡Œã€‚
è¿™é‡Œè¿˜ç”¨åˆ°äº† <code>shelljs/shelljs</code> æ‰§è¡Œ <code>shell</code> è„šæœ¬ï¼Œå¦‚åˆå§‹åŒ– <code>Gitï¼š git init</code>ï¼Œé¡¹ç›®åˆå§‹åŒ–ä¹‹åå®‰è£…ä¾èµ– <code>npm install</code>ç­‰</p></blockquote> <p><strong>æ‹·è´æ¨¡æ¿æ–‡ä»¶</strong></p> <blockquote><p>æ‹·è´æ¨¡ç‰ˆæ–‡ä»¶ä¸»è¦æ˜¯ä½¿ç”¨ <code>jprichardson/node-fs-extra</code>çš„ <code>copyTpl()</code>æ–¹æ³•ï¼Œæ­¤æ–¹æ³•ä½¿ç”¨ <code>ejs</code> æ¨¡æ¿è¯­æ³•ï¼Œå¯ä»¥å°†è¾“å…¥çš„å†…å®¹æ’å…¥åˆ°æ¨¡ç‰ˆçš„å¯¹åº”ä½ç½®ï¼š</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>fs<span class="token punctuation">.</span><span class="token function">copyTpl</span><span class="token punctuation">(</span>
  project<span class="token punctuation">,</span>
  path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>projectPath<span class="token punctuation">,</span> <span class="token string">'project.config.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>description<span class="token punctuation">,</span> projectName<span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">...</span>
</code></pre></div><h3 id="_4-4-taro-build"><a href="#_4-4-taro-build" class="header-anchor">#</a> 4.4 Taro Build</h3> <ul><li><code>taro build</code> å‘½ä»¤æ˜¯æ•´ä¸ª <code>Taro</code> é¡¹ç›®çš„çµé­‚å’Œæ ¸å¿ƒï¼Œä¸»è¦è´Ÿè´£å¤šç«¯ä»£ç ç¼–è¯‘ï¼ˆH5ï¼Œå°ç¨‹åºï¼Œ<code>React Native</code>ç­‰ï¼‰ã€‚</li> <li><code>Taro</code> å‘½ä»¤çš„å…³è”ï¼Œå‚æ•°è§£æç­‰å’Œ <code>taro init</code> å…¶å®æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œé‚£ä¹ˆæœ€å…³é”®çš„ä»£ç è½¬æ¢éƒ¨åˆ†æ˜¯æ€æ ·å®ç°çš„å‘¢ï¼Ÿ...</li></ul> <h4 id="_4-4-1-ç¼–è¯‘å·¥ä½œæµä¸æŠ½è±¡è¯­æ³•æ ‘ï¼ˆastï¼‰"><a href="#_4-4-1-ç¼–è¯‘å·¥ä½œæµä¸æŠ½è±¡è¯­æ³•æ ‘ï¼ˆastï¼‰" class="header-anchor">#</a> 4.4.1 ç¼–è¯‘å·¥ä½œæµä¸æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰</h4> <blockquote><p>Taro çš„æ ¸å¿ƒéƒ¨åˆ†å°±æ˜¯å°†ä»£ç ç¼–è¯‘æˆå…¶ä»–ç«¯ï¼ˆH5ã€å°ç¨‹åºã€React Native ç­‰ï¼‰ä»£ç ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå°†ä¸€ç§ç»“æ„åŒ–è¯­è¨€çš„ä»£ç ç¼–è¯‘æˆå¦ä¸€ç§ç±»ä¼¼çš„ç»“æ„åŒ–è¯­è¨€çš„ä»£ç åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤</p></blockquote> <p><img src="https://poetries1.gitee.io/img-repo/2020/09/248.png" alt=""></p> <p>é¦–å…ˆæ˜¯ <code>Parse</code>ï¼Œå°†ä»£ç è§£æï¼ˆ<code>Parse</code>ï¼‰æˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆAbstract Syntex Treeï¼‰ï¼Œç„¶åå¯¹ <code>AST</code>è¿›è¡Œéå†ï¼ˆ<code>traverse</code>ï¼‰å’Œæ›¿æ¢(<code>replace</code>)ï¼ˆè¿™å¯¹äºå‰ç«¯æ¥è¯´å…¶å®å¹¶ä¸é™Œç”Ÿï¼Œå¯ä»¥ç±»æ¯” <code>DOM</code> æ ‘çš„æ“ä½œï¼‰ï¼Œæœ€åæ˜¯ç”Ÿæˆï¼ˆ<code>generate</code>ï¼‰ï¼Œæ ¹æ®æ–°çš„ <code>AST</code> ç”Ÿæˆç¼–è¯‘åçš„ä»£ç ...</p> <h4 id="_4-4-2-babel-æ¨¡å—"><a href="#_4-4-2-babel-æ¨¡å—" class="header-anchor">#</a> 4.4.2 Babel æ¨¡å—</h4> <p><code>Babel</code> æ˜¯ä¸€ä¸ªé€šç”¨çš„å¤šåŠŸèƒ½çš„ JavaScriptç¼–è¯‘å™¨ï¼Œæ›´ç¡®åˆ‡åœ°è¯´æ˜¯æºç åˆ°æºç çš„ç¼–è¯‘å™¨ï¼Œé€šå¸¸ä¹Ÿå«åšè½¬æ¢ç¼–è¯‘å™¨ï¼ˆtranspilerï¼‰ã€‚ æ„æ€æ˜¯è¯´ä½ ä¸º Babel æä¾›ä¸€äº› JavaScript ä»£ç ï¼ŒBabel æ›´æ”¹è¿™äº›ä»£ç ï¼Œç„¶åè¿”å›ç»™ä½ æ–°ç”Ÿæˆçš„ä»£ç ...</p> <h4 id="_4-4-3-è§£æé¡µé¢-config-é…ç½®"><a href="#_4-4-3-è§£æé¡µé¢-config-é…ç½®" class="header-anchor">#</a> 4.4.3 è§£æé¡µé¢ Config é…ç½®</h4> <blockquote><p>åœ¨ä¸šåŠ¡ä»£ç ç¼–è¯‘æˆå°ç¨‹åºçš„ä»£ç è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€æ­¥æ˜¯å°†é¡µé¢å…¥å£ JS çš„ Config å±æ€§è§£æå‡ºæ¥ï¼Œå¹¶å†™å…¥ <code>*.json</code> æ–‡ä»¶ï¼Œä¾›å°ç¨‹åºä½¿ç”¨ã€‚é‚£ä¹ˆè¿™ä¸€æ­¥æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿè¿™é‡Œå°†è¿™éƒ¨åˆ†åŠŸèƒ½çš„å…³é”®ä»£ç æŠ½å–å‡ºæ¥ï¼š</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1. babel-traverseæ–¹æ³•ï¼Œ éå†å’Œæ›´æ–°èŠ‚ç‚¹</span>
<span class="token function">traverse</span><span class="token punctuation">(</span>ast<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">ClassProperty</span><span class="token punctuation">(</span><span class="token parameter">astPath</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// éå†ç±»çš„å±æ€§å£°æ˜</span>
    <span class="token keyword">const</span> node <span class="token operator">=</span> astPath<span class="token punctuation">.</span>node
    <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>key<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'config'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// ç±»çš„å±æ€§åä¸º config</span>
      configObj <span class="token operator">=</span> <span class="token function">traverseObjectNode</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
      astPath<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å°†è¯¥æ–¹æ³•ç§»é™¤æ‰</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 2. éå†ï¼Œè§£æä¸º JSON å¯¹è±¡</span>
<span class="token keyword">function</span> <span class="token function">traverseObjectNode</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'ClassProperty'</span> <span class="token operator">||</span> node<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'ObjectProperty'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> properties <span class="token operator">=</span> node<span class="token punctuation">.</span>value<span class="token punctuation">.</span>properties
      obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      properties<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        obj<span class="token punctuation">[</span>p<span class="token punctuation">.</span>key<span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">traverseObjectNode</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> obj
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'ObjectExpression'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> properties <span class="token operator">=</span> node<span class="token punctuation">.</span>properties
    obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    properties<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// const t = require('babel-types')  AST èŠ‚ç‚¹çš„ Lodash å¼å·¥å…·åº“</span>
      <span class="token keyword">const</span> key <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">isIdentifier</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">?</span> p<span class="token punctuation">.</span>key<span class="token punctuation">.</span>name <span class="token punctuation">:</span> p<span class="token punctuation">.</span>key<span class="token punctuation">.</span>value
      obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">traverseObjectNode</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> obj
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'ArrayExpression'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> node<span class="token punctuation">.</span>elements<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token function">traverseObjectNode</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
 <span class="token operator">...</span>
</code></pre></div><h2 id="äº”ã€taro-ç»„ä»¶åº“åŠ-api-çš„è®¾è®¡ä¸é€‚é…"><a href="#äº”ã€taro-ç»„ä»¶åº“åŠ-api-çš„è®¾è®¡ä¸é€‚é…" class="header-anchor">#</a> äº”ã€Taro ç»„ä»¶åº“åŠ API çš„è®¾è®¡ä¸é€‚é…</h2> <h3 id="_5-1-å¤šç«¯å·®å¼‚"><a href="#_5-1-å¤šç«¯å·®å¼‚" class="header-anchor">#</a> 5.1 å¤šç«¯å·®å¼‚</h3> <h4 id="_5-1-1-ç»„ä»¶å·®å¼‚"><a href="#_5-1-1-ç»„ä»¶å·®å¼‚" class="header-anchor">#</a> 5.1.1 ç»„ä»¶å·®å¼‚</h4> <p>å°ç¨‹åºã€H5 ä»¥åŠå¿«åº”ç”¨éƒ½å¯ä»¥åˆ’åˆ†ä¸º XML ç±»ï¼ŒReact Native å½’ä¸º JSX ç±»ï¼Œä¸¤ç§è¯­è¨€é£ç‰›é©¬ä¸ç›¸åŠï¼Œç»™é€‚é…è®¾ç½®äº†éå¸¸å¤§çš„éšœç¢ã€‚XML ç±»æœ‰ä¸ªæ˜æ˜¾çš„ç‰¹ç‚¹æ˜¯å…³æ³¨ç‚¹åˆ†ç¦»ï¼ˆSeparation of Concernsï¼‰ï¼Œå³è¯­ä¹‰å±‚ï¼ˆXMLï¼‰ã€è§†è§‰å±‚ï¼ˆCSSï¼‰ã€äº¤äº’å±‚ï¼ˆJavaScriptï¼‰ä¸‰è€…åˆ†ç¦»çš„æ¾è€¦åˆå½¢å¼ï¼ŒJSX ç±»åˆ™è¦æŠŠä¸‰è€…æ··ä¸ºä¸€ä½“ï¼Œç”¨è„šæœ¬æ¥åŒ…æ½ä¸‰è€…çš„å·¥ä½œ...</p> <p><strong>ä¸åŒç«¯çš„ç»„ä»¶çš„å·®å¼‚è¿˜ä½“ç°åœ¨å®šåˆ¶ç¨‹åº¦ä¸Š</strong></p> <ul><li>H5 æ ‡ç­¾ï¼ˆç»„ä»¶ï¼‰æä¾›æœ€åŸºç¡€çš„åŠŸèƒ½â€”â€”å¸ƒå±€ã€è¡¨å•ã€åª’ä½“ã€å›¾å½¢ç­‰ç­‰ï¼›</li> <li>å°ç¨‹åºç»„ä»¶ç›¸å¯¹ H5 æœ‰äº†ä¸€å®šç¨‹åº¦çš„å®šåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå°ç¨‹åºç»„ä»¶çœ‹ä½œä¸€å¥—ç±»ä¼¼äº H5 çš„ UI ç»„ä»¶åº“ï¼›</li> <li>React Native ç«¯ç»„ä»¶ä¹ŸåŒæ ·å¦‚æ­¤ï¼Œè€Œä¸”åŸºæœ¬æ˜¯ä¸“â€œç»„â€ä¸“ç”¨çš„ï¼Œæ¯”å¦‚è¦è§¦å‘ç‚¹å‡»äº‹ä»¶å°±å¾—ç”¨ Touchable æˆ–è€… Text ç»„ä»¶ï¼Œè¦æ¸²æŸ“æ–‡æœ¬å°±å¾—ç”¨ Text ç»„ä»¶ï¼ˆè™½ç„¶å°ç¨‹åºä¹Ÿæä¾›äº† Text ç»„ä»¶ï¼Œä½†å®ƒçš„æ–‡æœ¬ä»ç„¶å¯ä»¥ç›´æ¥æ”¾åˆ° view ä¹‹ç±»çš„ç»„ä»¶é‡Œï¼‰...</li></ul> <h4 id="_5-1-2-api-å·®å¼‚"><a href="#_5-1-2-api-å·®å¼‚" class="header-anchor">#</a> 5.1.2 API å·®å¼‚</h4> <p><strong>å„ç«¯ API çš„å·®å¼‚å…·æœ‰å®šåˆ¶åŒ–ã€æ¥å£ä¸ä¸€ã€èƒ½åŠ›é™åˆ¶çš„ç‰¹ç‚¹</strong></p> <ul><li>å®šåˆ¶åŒ–ï¼šå„ç«¯æ‰€æä¾›çš„ API éƒ½æ˜¯ç»è¿‡é‡èº«æ‰“é€ çš„ï¼Œæ¯”å¦‚å°ç¨‹åºçš„å¼€æ”¾æ¥å£ç±» APIï¼Œå®Œå…¨æ˜¯é’ˆå¯¹å°ç¨‹åºæ‰€å¤„çš„å¾®ä¿¡ç¯å¢ƒæ‰“é€ çš„ï¼Œå…¶æä¾›çš„åŠŸèƒ½ä»¥åŠå¤–åœ¨è¡¨ç°éƒ½å·²ç”±æ¡†æ¶æä¾›å®ç°ï¼Œç”¨æˆ·ä¸Šæ‰‹å¯ç”¨ï¼Œæ¯‹é¡»å…³å¿ƒå†…éƒ¨å®ç°ã€‚</li> <li>æ¥å£ä¸ä¸€ï¼šç›¸åŒçš„åŠŸèƒ½ï¼Œåœ¨ä¸åŒç«¯ä¸‹çš„è°ƒç”¨æ–¹å¼ä»¥åŠè°ƒç”¨å‚æ•°ç­‰ä¹Ÿä¸ä¸€æ ·ï¼Œæ¯”å¦‚ <code>socket</code>ï¼Œå°ç¨‹åºä¸­ç”¨ <code>wx.connectSocket</code> æ¥è¿æ¥ï¼Œ<code>H5</code> åˆ™ç”¨ <code>new WebSocket()</code> æ¥è¿æ¥ï¼Œè¿™æ ·çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°å¾ˆå¤šä¸ªã€‚</li> <li>èƒ½åŠ›é™åˆ¶ï¼šå„ç«¯ä¹‹é—´çš„å·®å¼‚å¯ä»¥è¿›è¡Œå®šåˆ¶é€‚é…ï¼Œç„¶è€Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ <code>API</code>ï¼ˆæ­¤å¤„ç‰¹æŒ‡å°ç¨‹åº <code>API</code>ï¼Œå› ä¸ºå¤šç«¯é€‚é…æ˜¯å‘å°ç¨‹åºçœ‹é½çš„ï¼‰åœ¨å„ä¸ªç«¯éƒ½èƒ½é€šè¿‡å®šåˆ¶é€‚é…æ¥å®ç°ï¼Œå› ä¸ºä¸åŒç«¯æ‰€èƒ½æä¾›çš„ç«¯èƒ½åŠ›â€œå¤§å¼‚å°åŒâ€ï¼Œè¿™æ˜¯åœ¨é€‚é…è¿‡ç¨‹ä¸­ä¸å¯æŠ—æ‹’ã€ä¸å¯æŠ¹å¹³çš„å·®å¼‚...</li></ul> <h3 id="_5-2-å¤šç«¯é€‚é…"><a href="#_5-2-å¤šç«¯é€‚é…" class="header-anchor">#</a> 5.2 å¤šç«¯é€‚é…</h3> <h4 id="_5-2-1-æ ·å¼å¤„ç†"><a href="#_5-2-1-æ ·å¼å¤„ç†" class="header-anchor">#</a> 5.2.1 æ ·å¼å¤„ç†</h4> <p>H5 ç«¯ä½¿ç”¨å®˜æ–¹æä¾›çš„ WEUI è¿›è¡Œé€‚é…ï¼ŒReact Native ç«¯åˆ™åœ¨ç»„ä»¶å†…æ·»åŠ æ ·å¼ï¼Œå¹¶é€šè¿‡è„šæœ¬æ¥æ§åˆ¶ä¸€äº›çŠ¶æ€ç±»çš„æ ·å¼ï¼Œæ¡†æ¶æ ¸å¿ƒåœ¨ç¼–è¯‘çš„æ—¶å€™æŠŠæºä»£ç çš„ class æ‰€æŒ‡å‘çš„æ ·å¼é€šè¿‡ css-to-react-native è¿›è¡Œè½¬è¯‘ï¼Œæ‰€å¾— StyleSheet æ ·å¼ä¼ å…¥ç»„ä»¶çš„ style å‚æ•°ï¼Œç»„ä»¶å†…éƒ¨ä¼šå¯¹æ ·å¼è¿›è¡ŒäºŒæ¬¡å¤„ç†ï¼Œå¾—åˆ°æœ€ç»ˆçš„æ ·å¼...</p> <p><img src="https://poetries1.gitee.io/img-repo/2020/09/248.png" alt=""></p> <p><strong>ä¸ºä»€ä¹ˆéœ€è¦å¯¹æ ·å¼è¿›è¡ŒäºŒæ¬¡å¤„ç†ï¼Ÿ</strong></p> <blockquote><p>éƒ¨åˆ†ç»„ä»¶æ˜¯ç›´æ¥æŠŠä¼ å…¥ <code>style</code> çš„æ ·å¼èµ‹ç»™æœ€å¤–å±‚çš„ <code>React Native</code> åŸç”Ÿç»„ä»¶ï¼Œä½†éƒ¨åˆ†ç»è¿‡å±‚å±‚å°è£…çš„ç»„ä»¶åˆ™ä¸ç„¶ï¼Œæˆ‘ä»¬è¦æŠŠå®¹å™¨æ ·å¼ã€å†…éƒ¨æ ·å¼å’Œæ–‡æœ¬æ ·å¼ç¦»æã€‚ä¸ºäº†æ–¹ä¾¿è§£é‡Šï¼Œæˆ‘ä»¬æŠŠè¿™ç±»ç»„ä»¶ç®€åŒ–ä¸ºä»¥ä¸‹çš„å½¢å¼ï¼š</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>&lt;View style={wrapperStyle}&gt;
  &lt;View style={containerStyle}&gt;
    &lt;Text style={textStyle}&gt;Hello World&lt;/Text&gt;
  &lt;/View&gt;
&lt;/View&gt;
</code></pre></div><blockquote><p>å‡è®¾ç»„ä»¶æœ‰æ ·å¼ <code>margin-top</code>ã€<code>background-color</code> å’Œ <code>font-size</code>ï¼Œè½¬è¯‘ä¼ å…¥ç»„ä»¶åï¼Œå°±è¦æŠŠåˆ†åˆ«æŠŠå®ƒä»¬ä¼ åˆ°<code>wrapperStyle</code>ã€<code>containerStyle</code> å’Œ <code>textStyle</code>ï¼Œå¯å‚è€ƒ <code>ScrollView</code> çš„ <code>style</code> å’Œ <code>contentContainerStyle</code>...</p></blockquote> <h4 id="_5-2-2-ç»„ä»¶å°è£…"><a href="#_5-2-2-ç»„ä»¶å°è£…" class="header-anchor">#</a> 5.2.2 ç»„ä»¶å°è£…</h4> <blockquote><p>ç»„ä»¶çš„å°è£…åˆ™æ˜¯ä¸€ä¸ªâ€œä»¿åˆ¶â€çš„è¿‡ç¨‹ï¼Œåˆ©ç”¨ç«¯æä¾›çš„åŸææ–™ï¼ŒåŠ å·¥æˆé€šç”¨çš„ç»„ä»¶ï¼Œæš´éœ²ç›¸å¯¹ç»Ÿä¸€çš„è°ƒç”¨æ–¹å¼ã€‚æˆ‘ä»¬ç”¨ <code>&lt;Button /&gt;</code> è¿™ä¸ªç»„ä»¶æ¥ä¸¾ä¾‹ï¼Œåœ¨å°ç¨‹åºç«¯å®ƒä¹Ÿè®¸æ˜¯é•¿è¿™æ ·å­çš„</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>&lt;button size=&quot;mini&quot; plain={{plain}} loading={{loading}} hover-class=&quot;you-hover-me&quot;&gt;&lt;/button&gt;
</code></pre></div><blockquote><p>å¦‚æœè¦å®ç° <code>H5</code> ç«¯è¿™ä¹ˆä¸€ä¸ªæŒ‰é’®ï¼Œå¤§æ¦‚ä¼šåƒä¸‹é¢è¿™æ ·ï¼Œåœ¨ç»„ä»¶å†…éƒ¨æŠŠå°ç¨‹åºçš„æŒ‰é’®ç‰¹æ€§å®ç°ä¸€éï¼Œç„¶åæš´éœ²è·Ÿå°ç¨‹åºä¸€è‡´çš„è°ƒç”¨æ–¹å¼ï¼Œå°±å®Œæˆäº† <code>H5</code> ç«¯ä¸€ä¸ªç»„ä»¶çš„è®¾è®¡</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
  <span class="token attr-name">{...omit(this.props,</span> <span class="token attr-name">['hoverClass',</span> <span class="token attr-name">'onTouchStart',</span> <span class="token attr-name">'onTouchEnd'])}</span>
  <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span>{cls}</span>
  <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation">=</span>{style}</span>
  <span class="token attr-name">onClick</span><span class="token attr-value"><span class="token punctuation">=</span>{onClick}</span>
  <span class="token attr-name">disabled</span><span class="token attr-value"><span class="token punctuation">=</span>{disabled}</span>
  <span class="token attr-name">onTouchStart</span><span class="token attr-value"><span class="token punctuation">=</span>{_onTouchStart}</span>
  <span class="token attr-name">onTouchEnd</span><span class="token attr-value"><span class="token punctuation">=</span>{_onTouchEnd}</span>
<span class="token punctuation">&gt;</span></span>
  {loading &amp;&amp; <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>weui-loading<span class="token punctuation">'</span></span> <span class="token punctuation">/&gt;</span></span>}
  {children}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>...
</code></pre></div><ul><li>å…¶ä»–ç«¯çš„ç»„ä»¶é€‚é…ç›¸å¯¹ H5 ç«¯æ¥è¯´ä¼šæ›´æ›²æŠ˜å¤æ‚ä¸€äº›ï¼Œå› ä¸º H5 è·Ÿå°ç¨‹åºçš„è¯­è¨€è¾ƒä¸ºç›¸ä¼¼ï¼Œè€Œå…¶ä»–ç«¯éœ€è¦æ•´åˆç‰¹å®šç«¯çš„å„ç§ç»„ä»¶ï¼Œä»¥åŠåˆ©ç”¨ç«¯ç»„ä»¶çš„ç‰¹æ€§æ¥å®ç°ï¼Œæ¯”å¦‚åœ¨ React Native ä¸­å®ç°è¿™ä¸ªæŒ‰é’®ï¼Œåˆ™éœ€è¦ç”¨åˆ° <code>&lt;Touchable* /&gt;</code>ã€<code>&lt;View /&gt;</code>ã€<code>&lt;Text /&gt;</code>ï¼Œè¦å®ç°åŠ¨ç”»åˆ™éœ€è¦ç”¨ä¸Š <code>&lt;Animated.View /&gt;</code>ï¼Œè¿˜æœ‰å°±æ˜¯ç›¸å¯¹äº H5 å’Œå°ç¨‹åºæ¯”è¾ƒå®¹æ˜“å®ç°çš„ touch äº‹ä»¶ï¼Œåœ¨ React Native ä¸­åˆ™éœ€è¦ç”¨ä¸Š PanResponder æ¥è¿›è¡Œâ€œä»¿çœŸâ€ï¼Œæ€»ä¹‹å°±æ˜¯ï¼Œå› â€œç«¯â€åˆ¶å®œï¼Œä¸€åˆ‡ä¸ºäº†æœ€ååªéœ€ä¸€è¡Œä»£ç é€šè¡Œå¤šç«¯ï¼</li> <li>é™¤äº†å±æ€§æ”¯æŒå¤–ï¼Œäº‹ä»¶å›è°ƒçš„å‚æ•°ä¹Ÿéœ€è¦è¿›è¡Œç»Ÿä¸€ï¼Œä¸ºæ­¤ï¼Œéœ€è¦åœ¨å†…éƒ¨è¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚ Input çš„ <code>onInput</code> äº‹ä»¶ï¼Œéœ€è¦ç»™å®ƒé€ ä¸€ä¸ªç±»ä¼¼å°ç¨‹åºç›¸åŒäº‹ä»¶çš„å›è°ƒå‚æ•°ï¼Œæ¯”å¦‚ <code>{ target: { value: text }</code>, <code>detail: { value: text }</code> }ï¼Œè¿™æ ·ï¼Œå¼€å‘è€…ä»¬å°±å¯ä»¥åƒä¸‹é¢è¿™æ ·å¤„ç†å›è°ƒäº‹ä»¶ï¼Œæ— éœ€å…³å¿ƒä¸­é—´å‘ç”Ÿäº†ä»€ä¹ˆ...</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">onInputHandler</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> target<span class="token punctuation">,</span> detail <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>value<span class="token punctuation">,</span> detail<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="å…­ã€jsx-è½¬æ¢å¾®ä¿¡å°ç¨‹åºæ¨¡æ¿çš„å®ç°"><a href="#å…­ã€jsx-è½¬æ¢å¾®ä¿¡å°ç¨‹åºæ¨¡æ¿çš„å®ç°" class="header-anchor">#</a> å…­ã€JSX è½¬æ¢å¾®ä¿¡å°ç¨‹åºæ¨¡æ¿çš„å®ç°</h2> <h3 id="_6-1-ä»£ç çš„æœ¬è´¨"><a href="#_6-1-ä»£ç çš„æœ¬è´¨" class="header-anchor">#</a> 6.1 ä»£ç çš„æœ¬è´¨</h3> <blockquote><p>ä¸ç®¡æ˜¯ä»»æ„è¯­è¨€çš„ä»£ç ï¼Œå…¶å®å®ƒä»¬éƒ½æœ‰ä¸¤ä¸ªå…±åŒç‚¹</p></blockquote> <ul><li>å®ƒä»¬éƒ½æ˜¯ç”±å­—ç¬¦ä¸²æ„æˆçš„æ–‡æœ¬</li> <li>å®ƒä»¬éƒ½è¦éµå¾ªè‡ªå·±çš„è¯­è¨€è§„èŒƒ</li></ul> <p>ç¬¬ä¸€ç‚¹å¾ˆå¥½ç†è§£ï¼Œæ—¢ç„¶ä»£ç æ˜¯å­—ç¬¦ä¸²æ„æˆçš„ï¼Œæˆ‘ä»¬è¦ä¿®æ”¹/ç¼–è¯‘ä»£ç çš„æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨å­—ç¬¦ä¸²çš„å„ç§æ­£åˆ™è¡¨è¾¾å¼ã€‚ä¾‹å¦‚æˆ‘ä»¬è¦å°† <code>JSON</code> ä¸­ä¸€ä¸ªé”®å <code>foo</code> æ”¹ä¸º <code>bar</code>ï¼Œåªè¦å†™ä¸€ä¸ªç®€å•çš„æ­£åˆ™è¡¨è¾¾å¼å°±èƒ½åšåˆ°ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>jsonStr.replace(/(?&lt;=&quot;)foo(?=&quot;\s*:)/i, 'bar')...
</code></pre></div><blockquote><p>ç¼–è¯‘å°±æ˜¯æŠŠä¸€æ®µå­—ç¬¦ä¸²æ”¹æˆå¦å¤–ä¸€æ®µå­—ç¬¦ä¸²</p></blockquote> <h3 id="_6-2-babel"><a href="#_6-2-babel" class="header-anchor">#</a> 6.2 Babel</h3> <blockquote><p><code>JavaScript</code> ç¤¾åŒºå…¶å®æœ‰éå¸¸å¤š <code>parser</code> å®ç°ï¼Œæ¯”å¦‚ <code>Acorn</code>ã€<code>Esprima</code>ã€<code>Recast</code>ã€<code>Traceur</code>ã€<code>Cherow</code> ç­‰ç­‰ã€‚ä½†æˆ‘ä»¬è¿˜æ˜¯é€‰æ‹©ä½¿ç”¨ <code>Babel</code>ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› </p></blockquote> <ul><li><code>Babel</code> å¯ä»¥è§£æè¿˜æ²¡æœ‰è¿›å…¥ ECMAScript è§„èŒƒçš„è¯­æ³•ã€‚ä¾‹å¦‚è£…é¥°å™¨è¿™æ ·çš„ææ¡ˆï¼Œè™½ç„¶ç°åœ¨æ²¡æœ‰è¿›å…¥æ ‡å‡†ä½†æ˜¯å·²ç»å¹¿æ³›ä½¿ç”¨æœ‰ä¸€æ®µæ—¶é—´äº†ï¼›</li> <li><code>Babel</code> æä¾›æ’ä»¶æœºåˆ¶è§£æ <code>TypeScript</code>ã€<code>Flow</code>ã€<code>JSX</code>è¿™æ ·çš„ <code>JavaScript</code> è¶…é›†ï¼Œä¸å¿…å•ç‹¬å¤„ç†è¿™äº›è¯­è¨€ï¼›</li> <li><code>Babel</code> æ‹¥æœ‰åºå¤§çš„ç”Ÿæ€ï¼Œæœ‰éå¸¸å¤šçš„æ–‡æ¡£å’Œæ ·ä¾‹ä»£ç å¯ä¾›å‚è€ƒï¼›
é™¤å» <code>parser</code> æœ¬èº«ï¼Œ<code>Babel</code> è¿˜æä¾›å„ç§æ–¹ä¾¿çš„å·¥å…·åº“å¯ä»¥ä¼˜åŒ–ã€ç”Ÿæˆã€è°ƒè¯•ä»£ç ...</li></ul> <p><strong>Babylonï¼ˆ @babel/parserï¼‰</strong></p> <blockquote><p><code>Babylon</code> å°±æ˜¯ <code>Babel</code> çš„ <code>parser</code>ã€‚å®ƒå¯ä»¥æŠŠä¸€æ®µç¬¦åˆè§„èŒƒçš„ JavaScript ä»£ç è¾“å‡ºæˆä¸€ä¸ªç¬¦åˆ Esprima è§„èŒƒçš„ <code>AST</code>ã€‚ å¤§éƒ¨åˆ† <code>parser</code> ç”Ÿæˆçš„ <code>AST</code> æ•°æ®ç»“æ„éƒ½éµå¾ª Esprima è§„èŒƒï¼ŒåŒ…æ‹¬ ESLint çš„ <code>parser</code> ESTreeã€‚è¿™å°±æ„å‘³ç€æˆ‘ä»¬ç†Ÿæ‚‰äº† Esprima è§„èŒƒçš„ <code>AST</code> æ•°æ®ç»“æ„è¿˜èƒ½å»å†™ ESLint æ’ä»¶ã€‚</p></blockquote> <p>æˆ‘ä»¬å¯ä»¥å°è¯•è§£æ <code>n * n</code> è¿™å¥ç®€å•çš„è¡¨è¾¾å¼ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> babylon <span class="token keyword">from</span> <span class="token string">&quot;babylon&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> code <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">n * n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

babylon<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">...</span>
</code></pre></div><p>æœ€ç»ˆ <code>Babylon</code> ä¼šè§£ææˆè¿™æ ·çš„æ•°æ®ç»“æ„ï¼š</p> <p><img src="https://poetries1.gitee.io/img-repo/2020/09/250.png" alt=""></p> <blockquote><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <a href="https://astexplorer.net/" target="_blank" rel="noopener noreferrer">ASTExploroer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> å¿«é€Ÿåœ°æŸ¥çœ‹ä»£ç çš„ <code>AST</code></p></blockquote> <p><strong>Babel-traverse (@babel/traverse)</strong></p> <blockquote><p><code>babel-traverse</code> å¯ä»¥éå†ç”± Babylon ç”Ÿæˆçš„æŠ½è±¡è¯­æ³•æ ‘ï¼Œå¹¶æŠŠæŠ½è±¡è¯­æ³•æ ‘çš„å„ä¸ªèŠ‚ç‚¹ä»æ‹“æ‰‘æ•°æ®ç»“æ„è½¬åŒ–æˆä¸€é¢—è·¯å¾„ï¼ˆPathï¼‰æ ‘ï¼ŒPath è¡¨ç¤ºä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´è¿æ¥çš„å“åº”å¼ï¼ˆReactiveï¼‰å¯¹è±¡ï¼Œå®ƒæ‹¥æœ‰æ·»åŠ ã€åˆ é™¤ã€æ›¿æ¢èŠ‚ç‚¹ç­‰æ–¹æ³•ã€‚å½“ä½ è°ƒç”¨è¿™äº›ä¿®æ”¹æ ‘çš„æ–¹æ³•ä¹‹åï¼Œè·¯å¾„ä¿¡æ¯ä¹Ÿä¼šè¢«æ›´æ–°ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒPath è¿˜æä¾›äº†ä¸€äº›æ“ä½œä½œç”¨åŸŸï¼ˆScopeï¼‰ å’Œæ ‡è¯†ç¬¦ç»‘å®šï¼ˆIdentifier Bindingï¼‰ çš„æ–¹æ³•å¯ä»¥å»åšå¤„ç†ä¸€äº›æ›´ç²¾ç»†å¤æ‚çš„éœ€æ±‚ã€‚å¯ä»¥è¯´ <code>babel-traverse</code> æ˜¯ä½¿ç”¨ Babel ä½œä¸ºç¼–è¯‘å™¨æœ€æ ¸å¿ƒçš„æ¨¡å—...</p></blockquote> <p>è®©æˆ‘ä»¬å°è¯•ä¸€ä¸‹æŠŠä¸€æ®µä»£ç ä¸­çš„ <code>n * n</code> å˜ä¸º <code>x * x</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> babylon <span class="token keyword">from</span> <span class="token string">&quot;@babel/parser&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> traverse <span class="token keyword">from</span> <span class="token string">&quot;babel-traverse&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> code <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">function square(n) {
  return n * n;
}</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ast <span class="token operator">=</span> babylon<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">traverse</span><span class="token punctuation">(</span>ast<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">enter</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      path<span class="token punctuation">.</span>node<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;Identifier&quot;</span> <span class="token operator">&amp;&amp;</span>
      path<span class="token punctuation">.</span>node<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&quot;n&quot;</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      path<span class="token punctuation">.</span>node<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">...</span>
</code></pre></div><p><strong>Babel-typesï¼ˆ@babel/typesï¼‰</strong></p> <blockquote><p><code>babel-types</code> æ˜¯ä¸€ä¸ªç”¨äº <code>AST</code> èŠ‚ç‚¹çš„ <code>Lodash</code> å¼å·¥å…·åº“ï¼Œå®ƒåŒ…å«äº†æ„é€ ã€éªŒè¯ä»¥åŠå˜æ¢ <code>AST</code>èŠ‚ç‚¹çš„æ–¹æ³•ã€‚ è¯¥å·¥å…·åº“åŒ…å«è€ƒè™‘å‘¨åˆ°çš„å·¥å…·æ–¹æ³•ï¼Œå¯¹ç¼–å†™å¤„ç† <code>AST</code> é€»è¾‘éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚æˆ‘ä»¬ä¹‹å‰åœ¨ <code>babel-traverse</code>ä¸­æ”¹å˜æ ‡è¯†ç¬¦ n çš„ä»£ç å¯ä»¥ç®€å†™ä¸ºï¼š</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>import traverse from &quot;babel-traverse&quot;;
import * as t from &quot;babel-types&quot;;

traverse(ast, {
  enter(path) {
    if (t.isIdentifier(path.node, { name: &quot;n&quot; })) {
      path.node.name = &quot;x&quot;;
    }
  }
});
</code></pre></div><blockquote><p>å¯ä»¥å‘ç°ä½¿ç”¨ <code>babel-types</code>èƒ½æé«˜æˆ‘ä»¬è½¬æ¢ä»£ç çš„å¯è¯»æ€§ï¼Œåœ¨é…åˆ TypeScript è¿™æ ·çš„é™æ€ç±»å‹è¯­è¨€åï¼Œ<code>babel-types</code> çš„æ–¹æ³•è¿˜èƒ½æä¾›ç±»å‹æ ¡éªŒçš„åŠŸèƒ½ï¼Œèƒ½æœ‰æ•ˆåœ°æé«˜æˆ‘ä»¬è½¬æ¢ä»£ç çš„å¥å£®æ€§å’Œå¯é æ€§...</p></blockquote> <h3 id="_6-3-å®è·µä¾‹å­"><a href="#_6-3-å®è·µä¾‹å­" class="header-anchor">#</a> 6.3 å®è·µä¾‹å­</h3> <p>ä»¥ä¸€ä¸ªç®€å• <code>Page</code> é¡µé¢ä¸ºä¾‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Taro<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/taro'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> View<span class="token punctuation">,</span> Text <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@tarojs/components'</span>

<span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>

  config <span class="token operator">=</span> <span class="token punctuation">{</span>
    navigationBarTitleText<span class="token punctuation">:</span> <span class="token string">'é¦–é¡µ'</span>
  <span class="token punctuation">}</span>

  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    numbers<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> oddNumbers <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>numbers<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">number</span> <span class="token operator">=&gt;</span> number <span class="token operator">&amp;</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>ScrollView className<span class="token operator">=</span><span class="token string">'home'</span> scrollTop<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        å¥‡æ•°ï¼š
        <span class="token punctuation">{</span>
          oddNumbers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">number</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>Text onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        å¶æ•°ï¼š
        <span class="token punctuation">{</span>
          numbers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">number</span> <span class="token operator">=&gt;</span> number <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>Text onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>ScrollView<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token operator">...</span>
</code></pre></div><h4 id="_6-3-1-è®¾è®¡æ€è·¯"><a href="#_6-3-1-è®¾è®¡æ€è·¯" class="header-anchor">#</a> 6.3.1 è®¾è®¡æ€è·¯</h4> <ul><li>Taro çš„ç»“æ„ä¸»è¦åˆ†ä¸¤ä¸ªæ–¹é¢ï¼šè¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶ã€‚è¿è¡Œæ—¶è´Ÿè´£æŠŠç¼–è¯‘ååˆ°ä»£ç è¿è¡Œåœ¨æœ¬ä¸èƒ½è¿è¡Œçš„å¯¹åº”ç¯å¢ƒä¸­ï¼Œä½ å¯ä»¥æŠŠ Taro è¿è¡Œæ—¶ç†è§£ä¸ºå‰ç«¯å¼€å‘å½“ä¸­ <code>polyfill</code>ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå°ç¨‹åºæ–°å»ºä¸€ä¸ªé¡µé¢æ˜¯ä½¿ç”¨ <code>Page</code> æ–¹æ³•ä¼ å…¥ä¸€ä¸ªå­—é¢é‡å¯¹è±¡ï¼Œå¹¶ä¸æ”¯æŒä½¿ç”¨ç±»ã€‚å¦‚æœå…¨éƒ¨ä¾èµ–ç¼–è¯‘æ—¶çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦åšåˆ°äº‹æƒ…å¤§æ¦‚å°±æ˜¯æŠŠç±»è½¬åŒ–æˆå¯¹è±¡ï¼ŒæŠŠ <code>state</code> å˜ä¸º <code>data</code>ï¼ŒæŠŠç”Ÿå‘½å‘¨æœŸä¾‹å¦‚ componentDidMount è½¬åŒ–æˆ <code>onReady</code>ï¼ŒæŠŠäº‹ä»¶ç”±å¯èƒ½çš„ç±»å‡½æ•°ï¼ˆ<code>Class method</code>ï¼‰å’Œç±»å±æ€§å‡½æ•°(<code>Class property function</code>) è½¬åŒ–æˆå­—é¢é‡å¯¹è±¡æ–¹æ³•ï¼ˆObject <code>property function</code>ï¼‰ç­‰ç­‰ã€‚</li> <li>ä½†è¿™æ˜¾ç„¶ä¼šè®©æˆ‘ä»¬çš„ç¼–è¯‘æ—¶å·¥ä½œå˜å¾—éå¸¸ç¹é‡ï¼Œåœ¨ä¸€ä¸ªç±»å¼‚å¸¸å¤æ‚æ—¶å‡ºé”™çš„æ¦‚ç‡ä¹Ÿä¼šå˜é«˜ã€‚ä½†æˆ‘ä»¬æœ‰æ›´å¥½çš„åŠæ³•ï¼šå®ç°ä¸€ä¸ª <code>createPage</code> æ–¹æ³•ï¼Œæ¥å—ä¸€ä¸ªç±»ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå°ç¨‹åº <code>Page</code> æ–¹æ³•æ‰€éœ€è¦çš„å­—é¢é‡å¯¹è±¡ã€‚è¿™æ ·ä¸ä»…ç®€åŒ–äº†ç¼–è¯‘æ—¶çš„å·¥ä½œï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨ <code>createPage</code> å¯¹ç¼–è¯‘æ—¶äº§å‡ºçš„ç±»åšå„ç§æ“ä½œå’Œä¼˜åŒ–ã€‚é€šè¿‡è¿è¡Œæ—¶æŠŠå·¥ä½œåˆ†ç¦»äº†ä¹‹åï¼Œå†ç¼–è¯‘æ—¶æˆ‘ä»¬åªéœ€è¦åœ¨æ–‡ä»¶åº•éƒ¨åŠ ä¸Šä¸€è¡Œä»£ç  <code>Page(createPage(componentName))</code> å³å¯...</li></ul> <p><img src="https://poetries1.gitee.io/img-repo/2020/09/251.png" alt=""></p> <ul><li>å›åˆ°ä¸€å¼€å§‹é‚£æ®µä»£ç ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç±»å±æ€§ <code>config</code>ï¼Œ<code>config</code> æ˜¯ä¸€ä¸ªå¯¹è±¡è¡¨è¾¾å¼ï¼ˆObject Expressionï¼‰ï¼Œè¿™ä¸ªå¯¹è±¡è¡¨è¾¾å¼åªæ¥å—é”®å€¼ä¸ºæ ‡è¯†ç¬¦ï¼ˆIdentifierï¼‰æˆ–å­—ç¬¦ä¸²ï¼Œè€Œé”®ååªèƒ½æ˜¯åŸºæœ¬ç±»å‹ã€‚è¿™æ ·ç®€å•çš„æƒ…å†µæˆ‘ä»¬åªéœ€è¦æŠŠè¿™ä¸ªå¯¹è±¡è¡¨è¾¾å¼è½¬æ¢ä¸º <code>JSON</code> å³å¯ã€‚å¦å¤–ä¸€ä¸ªç±»å±æ€§ <code>state</code> åœ¨ <code>Page</code> å½“ä¸­æœ‰ç‚¹åƒæ˜¯å°ç¨‹åºçš„ <code>data</code>ï¼Œä½†å®ƒåœ¨å¤šæ•°æƒ…å†µä¸æ˜¯å®Œæ•´çš„ <code>data</code>ã€‚è¿™é‡Œæˆ‘ä»¬ä¸ç”¨åšè¿‡å¤šçš„æ“ä½œï¼Œ<code>babel</code>çš„æ’ä»¶ <code>transform-class-proerties</code> ä¼šæŠŠå®ƒç¼–è¯‘åˆ°ç±»çš„æ„é€ å™¨ä¸­ã€‚å‡½æ•° <code>handleClick</code> æˆ‘ä»¬äº¤ç»™è¿è¡Œæ—¶å¤„ç†ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è·³åˆ° Taro è¿è¡Œæ—¶åŸç†æŸ¥çœ‹å…·ä½“æŠ€æœ¯ç»†èŠ‚ã€‚</li> <li>å†æ¥çœ‹æˆ‘ä»¬çš„ <code>render()</code>å‡½æ•°ï¼Œå®ƒçš„ç¬¬ä¸€è¡Œä»£ç é€šè¿‡ <code>filter</code> æŠŠæ•°å­—æ•°ç»„çš„æ‰€æœ‰å¶æ•°é¡¹éƒ½è¿‡æ»¤æ‰ï¼ŒçœŸæ­£ç”¨æ¥å¾ªç¯çš„æ˜¯ <code>oddNumbers</code>ï¼Œè€Œ <code>oddNumbers</code> å¹¶æ²¡æœ‰åœ¨ <code>this.state</code> ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»æ‰‹åŠ¨æŠŠå®ƒåŠ å…¥åˆ° <code>this.state</code>ã€‚å’Œ <code>React ä¸€æ ·ï¼ŒTaro æ¯æ¬¡æ›´æ–°éƒ½ä¼šè°ƒç”¨ render å‡½æ•°ï¼Œä½†å’Œ React ä¸åŒçš„æ˜¯ï¼ŒReact çš„ render</code> æ˜¯ä¸€ä¸ªåˆ›å»ºè™šæ‹Ÿ DOM çš„æ–¹æ³•ï¼Œè€Œ Taro çš„ render ä¼šè¢«é‡å‘½åä¸º <code>_createData</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªåˆ›å»ºæ•°æ®çš„æ–¹æ³•ï¼šåœ¨ <code>JSX</code> ä½¿ç”¨è¿‡çš„æ•°æ®éƒ½åœ¨è¿™é‡Œè¢«åˆ›å»ºæœ€åæ”¾åˆ°å°ç¨‹åº <code>Page</code> æˆ– <code>Component</code> å·¥å‚æ–¹æ³•ä¸­çš„ <code>data</code>ã€‚æœ€ç»ˆæˆ‘ä»¬çš„ <code>render</code> æ–¹æ³•ä¼šè¢«ç¼–è¯‘ä¸º...</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">_createData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>__state <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>__props <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> oddNumbers <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>__state<span class="token punctuation">.</span>numbers<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">number</span> <span class="token operator">=&gt;</span> number <span class="token operator">&amp;</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>__state<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    oddNumbers<span class="token punctuation">:</span> oddNumbers
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>__state<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token operator">...</span>
</code></pre></div><h4 id="_6-3-2-wxml-å’Œ-jsx"><a href="#_6-3-2-wxml-å’Œ-jsx" class="header-anchor">#</a> 6.3.2 WXML å’Œ JSX</h4> <p>åœ¨ Taro é‡Œ <code>render</code> çš„æ‰€æœ‰ <code>JSX</code>å…ƒç´ éƒ½ä¼šåœ¨ JavaScript æ–‡ä»¶ä¸­è¢«ç§»é™¤ï¼Œå®ƒä»¬æœ€ç»ˆå°†ä¼šç¼–è¯‘æˆå°ç¨‹åºçš„ <code>WXML</code>ã€‚æ¯ä¸ª <code>WXML</code> å…ƒç´ å’Œ <code>HTML</code> å…ƒç´ ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒå®šä¹‰ä¸ºä¸‰ç§ç±»å‹ï¼š<code>Element</code>ã€<code>Text</code>ã€<code>Comment</code>ã€‚å…¶ä¸­ <code>Text</code> åªæœ‰ä¸€ä¸ªå±æ€§: å†…å®¹ï¼ˆ<code>content</code>ï¼‰ï¼Œå®ƒå¯¹åº”çš„ <code>AST</code> ç±»å‹æ˜¯ <code>JSXText</code>ï¼Œæˆ‘ä»¬åªéœ€è¦å°†å‰æ–‡æºç ä¸­å¯¹åº”å­—ç¬¦ä¸²çš„å¥‡æ•°å’Œå¶æ•°è½¬æ¢æˆ Text å³å¯ã€‚è€Œå¯¹äº <code>Comment</code>è€Œè¨€æˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬å…¨éƒ¨æ¸…é™¤ï¼Œä¸å‚ä¸ WXML çš„ç¼–è¯‘ã€‚Element ç±»å‹æœ‰å®ƒçš„åå­—ï¼ˆ<code>tagName</code>ï¼‰ã€<code>children</code>ã€å±æ€§ï¼ˆ<code>attributes</code>ï¼‰ï¼Œå…¶ä¸­ <code>children</code> å¯èƒ½æ˜¯ä»»æ„ <code>WXML</code> ç±»å‹ï¼Œå±æ€§æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé”®å€¼å’Œé”®åéƒ½æ˜¯å­—ç¬¦ä¸²ã€‚æˆ‘ä»¬å°†æŠŠé‡ç‚¹æ”¾åœ¨å¦‚ä½•è½¬æ¢æˆä¸º <code>WXML</code> çš„ <code>Element</code>ç±»å‹ã€‚</p> <p>é¦–å…ˆæˆ‘ä»¬å¯ä»¥å…ˆçœ‹ <code>&lt;View className='home'&gt;</code>ï¼Œå®ƒåœ¨ <code>AST</code>ä¸­æ˜¯ä¸€ä¸ª <code>JSXElementï¼Œå®ƒçš„ç»“æ„å’Œæˆ‘ä»¬å®šä¹‰</code>Element <code>ç±»å‹å·®ä¸å¤šã€‚æˆ‘ä»¬å…ˆå°† JSXElement çš„</code>ScrollView ä»é©¼å³°å¼çš„ JSX å‘½åè½¬åŒ–ä¸ºçŸ­æ¨ªçº¿ï¼ˆkebab caseï¼‰é£æ ¼ï¼ŒclassName å’Œ <code>scrollTop</code>çš„å€¼åˆ†åˆ«ä»£è¡¨äº† <code>JSXAttribute</code> å€¼çš„ä¸¤ç§ç±»å‹ï¼š<code>StringLiteral</code> å’Œ <code>JSXExpressionContainer</code>ï¼Œ<code>className</code> æ˜¯ç®€å•çš„ <code>StringLiteral</code> å¤„ç†èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œ<code>scrollTop</code> å¤„ç†èµ·æ¥ç¨å¾®éº»çƒ¦ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä¸¤ä¸ªèŠ±æ‹¬å·<code>{}</code> æŠŠå†…å®¹åŒ…èµ·æ¥...</p> <p>æ¥ä¸‹æ¥æˆ‘ä»¬å†æ€è€ƒä¸€ä¸‹æ¯ä¸€ä¸ª JSXElement å‡ºç°çš„ä½ç½®ï¼Œä½ å¯ä»¥å‘ç°å…¶å®å®ƒçš„çˆ¶å…ƒç´ åªæœ‰å‡ ç§å¯èƒ½æ€§ï¼šreturnã€å¾ªç¯ã€æ¡ä»¶ï¼ˆé€»è¾‘ï¼‰è¡¨è¾¾å¼ã€‚è€Œåœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬æåˆ°ï¼Œbabel-traverse éå†çš„ AST ç±»å‹æ˜¯å“åº”å¼çš„â€”â€”ä¹Ÿå°±æ˜¯è¯´åªè¦æˆ‘ä»¬æŒ‰ç…§ JSXElement çˆ¶å…ƒç´ ç±»å‹çš„é¡ºåºç©·ä¸¾å¤„ç†è¿™å‡ ç§å¯èƒ½æ€§ï¼ŒæŠŠå„ç§å¯èƒ½æ€§å¤§ç»“æœåº”ç”¨åˆ° JSX å…ƒç´ ä¹‹ååˆ é™¤æ‰åŸæ¥çš„è¡¨è¾¾å¼ï¼Œæœ€åå°±å¯ä»¥æŠŠä¸€ä¸ªå¤æ‚çš„ JSX è¡¨è¾¾å¼è½¬æ¢ä¸ºä¸€ä¸ªç®€å•çš„ WXML æ•°æ®ç»“æ„ã€‚...</p> <p>æˆ‘ä»¬å…ˆçœ‹ç¬¬ä¸€ä¸ªå¾ªç¯ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>oddNumbers.map(number =&gt; &lt;Text onClick={this.handleClick}&gt;{number}&lt;/Text&gt;)
</code></pre></div><p>Text çš„çˆ¶å…ƒç´ æ˜¯ä¸€ä¸ª map å‡½æ•°ï¼ˆCallExpressionï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå‡½æ•°çš„ callee: oddNumbers ä½œä¸º wx:for çš„å€¼ï¼Œå¹¶æŠŠå®ƒæ”¾åˆ° state ä¸­ï¼ŒåŒ¿åå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ wx:for-itemçš„å€¼ï¼Œå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°åº”è¯¥æ˜¯ wx:for-index çš„å€¼ï¼Œä½†ä»£ç ä¸­æ²¡æœ‰ä¼ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¸ç®¡å®ƒã€‚ç„¶åæˆ‘ä»¬æŠŠè¿™ä¸¤ä¸ª wx: å¼€å¤´çš„å‚æ•°ä½œä¸º attribute ä¼ å…¥ Text å…ƒç´ å°±å®Œæˆäº†å¾ªç¯çš„å¤„ç†ã€‚è€Œå¯¹äº onClick è€Œè¨€ï¼Œåœ¨ Taro ä¸­ on å¼€å¤´çš„å…ƒç´ å‚æ•°éƒ½æ˜¯äº‹ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦æŠŠ this. å»æ‰å³å¯ã€‚Text å…ƒç´ çš„ children æ˜¯ä¸€ä¸ª JSXExpressionContainerï¼Œæˆ‘ä»¬æŒ‰ç…§ä¹‹å‰çš„å¤„ç†æ–¹å¼å¤„ç†å³å¯ã€‚æœ€åè¿™è¡Œæˆ‘ä»¬ç”Ÿæˆå‡ºæ¥çš„æ•°æ®ç»“æ„åº”è¯¥æ˜¯è¿™æ ·...</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">'element'</span><span class="token punctuation">,</span>
  tagName<span class="token punctuation">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span>
  attributes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> bindtap<span class="token punctuation">:</span> <span class="token string">'handleClick'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token string">'wx:for'</span><span class="token punctuation">:</span> <span class="token string">'{{oddNumbers}}'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token string">'wx:for-item'</span><span class="token punctuation">:</span> <span class="token string">'number'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span> content<span class="token punctuation">:</span> <span class="token string">'{{number}}'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token operator">...</span>
</code></pre></div><p>æœ‰äº†è¿™ä¸ªæ•°æ®ç»“æ„ç”Ÿæˆä¸€æ®µ WXML å°±éå¸¸ç®€å•äº†</p> <p>å†æ¥çœ‹ç¬¬äºŒä¸ªå¾ªç¯è¡¨è¾¾å¼ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>numbers.map(number =&gt; number % 2 === 0 &amp;&amp; &lt;Text onClick={this.handleClick}&gt;{number}&lt;/Text&gt;)...
</code></pre></div><p>å®ƒæ¯”ç¬¬ä¸€ä¸ªå¾ªç¯è¡¨è¾¾å¼å¤šäº†ä¸€ä¸ªé€»è¾‘è¡¨è¾¾å¼ï¼ˆLogical Operatorsï¼‰ï¼Œæˆ‘ä»¬çŸ¥é“ expr1 &amp;&amp; expr2 æ„å‘³ç€å¦‚æœ expr1 èƒ½è½¬æ¢æˆ true åˆ™è¿”å› expr2ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åªè¦æŠŠ number % 2 === 0 ä½œä¸ºå€¼ç”Ÿæˆä¸€ä¸ªé”®å wx:if çš„ JSXAttribute å³å¯ã€‚ä½†ç”±äº wx:if å’Œ wx:for åŒæ—¶ä½œç”¨äºä¸€ä¸ªå…ƒç´ å¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥ç”Ÿæˆä¸€ä¸ª block å…ƒç´ ï¼ŒæŠŠ wx:if æŒ‚è½½åˆ° block å…ƒç´ ï¼ŒåŸå…ƒç´ åˆ™å…¨éƒ¨ä½œä¸º children ä¼ å…¥ block å…ƒç´ ä¸­ã€‚è¿™æ—¶ babel-traverse ä¼šæ£€æµ‹åˆ°æ–°çš„å…ƒç´  blockï¼Œå®ƒçš„çˆ¶å…ƒç´ æ˜¯ä¸€ä¸ª map å¾ªç¯å‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æŒ‰ç…§ç¬¬ä¸€ä¸ªå¾ªç¯è¡¨è¾¾å¼çš„å¤„ç†æ–¹æ³•æ¥å¤„ç†è¿™ä¸ªè¡¨è¾¾å¼ã€‚</p> <p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥æ€è€ƒä¸€ä¸‹ <code>this.props.text || this.props.children</code> çš„è§£å†³æ–¹æ¡ˆã€‚å½“ç”¨æˆ·åœ¨ JSX ä¸­ä½¿ç”¨ || ä½œä¸ºé€»è¾‘è¡¨è¾¾å¼æ—¶å¾ˆå¯èƒ½æ˜¯ this.props.text å’Œ this.props.children éƒ½æœ‰å¯èƒ½ä½œä¸ºç»“æœè¿”å›ã€‚è¿™é‡Œ Taro å°†å®ƒç¼–è¯‘æˆäº† <code>this.props.text ? this.props.text: this.props.children</code>ï¼ŒæŒ‰ç…§æ¡ä»¶è¡¨è¾¾å¼ï¼ˆä¸‰å…ƒè¡¨è¾¾å¼ï¼‰çš„é€»è¾‘ï¼Œä¹Ÿå°±æ˜¯è¯´ä¼šç”Ÿæˆä¸¤ä¸ª blockï¼Œä¸€ä¸ª <code>wx:if</code> å’Œä¸€ä¸ª <code>wx:else</code>ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>block wx<span class="token punctuation">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;{{text}}&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>block wx<span class="token punctuation">:</span><span class="token keyword">else</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>slot<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>
</code></pre></div><h2 id="ä¸ƒã€å°ç¨‹åºè¿è¡Œæ—¶"><a href="#ä¸ƒã€å°ç¨‹åºè¿è¡Œæ—¶" class="header-anchor">#</a> ä¸ƒã€å°ç¨‹åºè¿è¡Œæ—¶</h2> <p>ä¸ºäº†ä½¿ <code>Taro</code> ç»„ä»¶è½¬æ¢æˆå°ç¨‹åºç»„ä»¶å¹¶è¿è¡Œåœ¨å°ç¨‹åºç¯å¢ƒä¸‹ï¼Œ <code>Taro</code> ä¸»è¦åšäº†ä¸¤ä¸ªæ–¹é¢çš„å·¥ä½œï¼šç¼–è¯‘ä»¥åŠè¿è¡Œæ—¶é€‚é…ã€‚ç¼–è¯‘è¿‡ç¨‹ä¼šåšå¾ˆå¤šå·¥ä½œï¼Œä¾‹å¦‚ï¼šå°† JSX è½¬æ¢æˆå°ç¨‹åº <code>.wxml</code> æ¨¡æ¿ï¼Œç”Ÿæˆå°ç¨‹åºçš„é…ç½®æ–‡ä»¶ã€é¡µé¢åŠç»„ä»¶çš„ä»£ç ç­‰ç­‰ã€‚ç¼–è¯‘ç”Ÿæˆå¥½çš„ä»£ç ä»ç„¶ä¸èƒ½ç›´æ¥è¿è¡Œåœ¨å°ç¨‹åºç¯å¢ƒé‡Œï¼Œé‚£è¿è¡Œæ—¶åˆæ˜¯å¦‚ä½•ä¸ä¹‹ååŒå·¥ä½œçš„å‘¢ï¼Ÿ...</p> <h3 id="_7-1-æ³¨å†Œç¨‹åºã€é¡µé¢ä»¥åŠè‡ªå®šä¹‰ç»„ä»¶"><a href="#_7-1-æ³¨å†Œç¨‹åºã€é¡µé¢ä»¥åŠè‡ªå®šä¹‰ç»„ä»¶" class="header-anchor">#</a> 7.1 æ³¨å†Œç¨‹åºã€é¡µé¢ä»¥åŠè‡ªå®šä¹‰ç»„ä»¶</h3> <p>åœ¨å°ç¨‹åºä¸­ä¼šåŒºåˆ†ç¨‹åºã€é¡µé¢ä»¥åŠç»„ä»¶ï¼Œé€šè¿‡è°ƒç”¨å¯¹åº”çš„å‡½æ•°ï¼Œå¹¶ä¼ å…¥åŒ…å«ç”Ÿå‘½å‘¨æœŸå›è°ƒã€äº‹ä»¶å¤„ç†å‡½æ•°ç­‰é…ç½®å†…å®¹çš„ object å‚æ•°æ¥è¿›è¡Œæ³¨å†Œï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleClick</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>è€Œåœ¨ <code>Taro</code>é‡Œï¼Œå®ƒä»¬éƒ½æ˜¯ä¸€ä¸ªç»„ä»¶ç±»ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">CustomComponent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
  <span class="token function">handleClick</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token operator">...</span>

</code></pre></div><ul><li>é‚£ä¹ˆ <code>Taro</code> çš„ç»„ä»¶ç±»æ˜¯å¦‚ä½•è½¬æ¢æˆå°ç¨‹åºçš„ç¨‹åºã€é¡µé¢æˆ–ç»„ä»¶çš„å‘¢ï¼Ÿ</li> <li>ä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ªç»„ä»¶ï¼š<code>customComponent</code>ï¼Œç¼–è¯‘è¿‡ç¨‹ä¼šåœ¨ç»„ä»¶åº•éƒ¨æ·»åŠ ä¸€è¡Œè¿™æ ·çš„ä»£ç ï¼ˆæ­¤å¤„ä»£ç ä½œç¤ºä¾‹ç”¨ï¼Œä¸å®é™…é¡¹ç›®ç”Ÿæˆçš„ä»£ç ä¸å°½ç›¸åŒï¼‰ï¼š</li></ul> <div class="language- extra-class"><pre class="language-text"><code>Component(createComponent(customComponent))
</code></pre></div><ul><li><code>createComponent</code> æ–¹æ³•æ˜¯æ•´ä¸ªè¿è¡Œæ—¶çš„å…¥å£ï¼Œåœ¨è¿è¡Œçš„æ—¶å€™ï¼Œä¼šæ ¹æ®ä¼ å…¥çš„ç»„ä»¶ç±»ï¼Œè¿”å›ä¸€ä¸ªç»„ä»¶çš„é…ç½®å¯¹è±¡</li></ul> <blockquote><p>åœ¨å°ç¨‹åºé‡Œï¼Œç¨‹åºçš„åŠŸèƒ½åŠé…ç½®ä¸é¡µé¢å’Œç»„ä»¶å·®å¼‚è¾ƒå¤§ï¼Œå› æ­¤è¿è¡Œæ—¶æä¾›äº†ä¸¤ä¸ªæ–¹æ³• <code>createApp</code> å’Œ <code>createComponent</code> æ¥åˆ†åˆ«åˆ›å»ºç¨‹åºå’Œç»„ä»¶ï¼ˆé¡µé¢ï¼‰ã€‚<code>createApp</code> çš„å®ç°éå¸¸ç®€å•</p></blockquote> <p><strong>createComponent æ–¹æ³•ä¸»è¦åšäº†è¿™æ ·å‡ ä»¶äº‹æƒ…</strong>ï¼š</p> <ul><li>å°†ç»„ä»¶çš„<code>state</code>è½¬æ¢æˆå°ç¨‹åºç»„ä»¶é…ç½®å¯¹è±¡çš„ <code>data</code></li> <li>å°†ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå¯¹åº”åˆ°å°ç¨‹åºç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</li> <li>å°†ç»„ä»¶çš„äº‹ä»¶å¤„ç†å‡½æ•°å¯¹åº”åˆ°å°ç¨‹åºçš„äº‹ä»¶å¤„ç†å‡½æ•°</li></ul> <h3 id="_7-2-ç»„ä»¶-state-è½¬æ¢"><a href="#_7-2-ç»„ä»¶-state-è½¬æ¢" class="header-anchor">#</a> 7.2 ç»„ä»¶ state è½¬æ¢</h3> <p>å…¶å®åœ¨ Taroï¼ˆReactï¼‰ ç»„ä»¶é‡Œï¼Œé™¤äº†ç»„ä»¶çš„ <code>state</code>ï¼Œ<code>JSX</code> é‡Œè¿˜å¯ä»¥è®¿é—®<code>props</code> ã€<code>render</code> å‡½æ•°é‡Œå®šä¹‰çš„å€¼ã€ä»¥åŠä»»ä½•ä½œç”¨åŸŸä¸Šçš„æˆå‘˜ã€‚è€Œåœ¨å°ç¨‹åºä¸­ï¼Œä¸æ¨¡æ¿ç»‘å®šçš„æ•°æ®å‡æ¥è‡ªå¯¹åº”é¡µé¢ï¼ˆæˆ–ç»„ä»¶ï¼‰çš„ <code>data</code>ã€‚å› æ­¤ <code>JSX</code> æ¨¡æ¿é‡Œè®¿é—®åˆ°çš„æ•°æ®éƒ½ä¼šå¯¹åº”åˆ°å°ç¨‹åºç»„ä»¶çš„ <code>data</code> ä¸Šã€‚æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡åˆ—è¡¨æ¸²æŸ“çš„ä¾‹å­æ¥è¯´æ˜<code>state</code>å’Œ <code>data</code>æ˜¯å¦‚ä½•å¯¹åº”çš„...</p> <p><strong>åœ¨ JSX é‡Œè®¿é—® state</strong></p> <blockquote><p>åœ¨å°ç¨‹åºçš„ç»„ä»¶ä¸Šä½¿ç”¨ <code>wx:for</code> ç»‘å®šä¸€ä¸ªæ•°ç»„ï¼Œå°±å¯ä»¥å®ç°å¾ªç¯æ¸²æŸ“ã€‚ä¾‹å¦‚ï¼Œåœ¨ Taro é‡Œä½ å¯èƒ½ä¼šè¿™ä¹ˆå†™ï¼š</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç¼–è¯‘åçš„å°ç¨‹åºç»„ä»¶æ¨¡æ¿ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;view&gt;
  &lt;view wx:for=&quot;{{list}}&quot; wx:for-item=&quot;item&quot;&gt;{{item}}&lt;/view&gt;
&lt;/view&gt;

</code></pre></div><p>å…¶ä¸­ <code>state.list</code> åªéœ€ç›´æ¥å¯¹åº”åˆ°å°ç¨‹åºï¼ˆé¡µé¢ï¼‰ç»„ä»¶çš„ <code>data.list</code> ä¸Šå³å¯...</p> <p><strong>åœ¨ render é‡Œç”Ÿæˆäº†æ–°çš„å˜é‡</strong></p> <p>ç„¶è€Œäº‹æƒ…é€šå¸¸æ²¡æœ‰é‚£ä¹ˆç®€å•ï¼Œåœ¨ Taro é‡Œä¹Ÿå¯ä»¥è¿™ä¹ˆç”¨</p> <div class="language- extra-class"><pre class="language-text"><code>{
  state = {
    list = [1, 2, 3]
  }
  render () {
    return (
      &lt;View&gt;
        {this.state.list.map(item =&gt; ++item).map(item =&gt; &lt;View&gt;{item}&lt;/View&gt;)}
      &lt;/View&gt;
    )
  }
}
</code></pre></div><p>ç¼–è¯‘åçš„å°ç¨‹åºç»„ä»¶æ¨¡æ¿æ˜¯è¿™æ ·çš„ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;view&gt;
  &lt;view wx:for=&quot;{{$anonymousCallee__1}}&quot; wx:for-item=&quot;item&quot;&gt;{{item}}&lt;/view&gt;
&lt;/view&gt;...
</code></pre></div><blockquote><p>åœ¨ç¼–è¯‘æ—¶ä¼šç»™ Taro ç»„ä»¶åˆ›å»ºä¸€ä¸ª <code>_createData</code>çš„æ–¹æ³•ï¼Œé‡Œé¢ä¼šç”Ÿæˆ <code>$anonymousCallee__1</code> è¿™ä¸ªå˜é‡ï¼Œ $<code>anonymousCallee__1</code> æ˜¯ç”±ç¼–è¯‘å™¨ç”Ÿæˆçš„ï¼Œå¯¹ <code>this.state.list</code> è¿›è¡Œç›¸å…³æ“ä½œåçš„å˜é‡ã€‚ <code>$anonymousCallee__1</code> æœ€ç»ˆä¼šè¢«æ”¾åˆ°ç»„ä»¶çš„ data ä¸­ç»™æ¨¡æ¿è°ƒç”¨ï¼š</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> $anonymousCallee__1 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">++</span>item<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><code>render</code> é‡Œ <code>return</code>ä¹‹å‰çš„æ‰€æœ‰å®šä¹‰å˜é‡æˆ–è€…å¯¹ <code>props</code>ã€<code>state</code> è®¡ç®—äº§ç”Ÿæ–°å˜é‡çš„æ“ä½œï¼Œéƒ½ä¼šè¢«ç¼–è¯‘åˆ° <code>_createData</code> æ–¹æ³•é‡Œæ‰§è¡Œï¼Œè¿™ä¸€ç‚¹åœ¨å‰é¢ JSX ç¼–è¯‘æˆå°ç¨‹åºæ¨¡æ¿çš„ç›¸å…³æ–‡ç« ä¸­å·²ç»æåˆ°ã€‚æ¯å½“ Taro è°ƒç”¨ <code>this.setState</code> API æ¥æ›´æ–°æ•°æ®æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨ç”Ÿæˆçš„ <code>_createData</code>æ¥è·å–æœ€æ–°æ•°æ®...</p></blockquote> <h3 id="_7-3-å°†ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå¯¹åº”åˆ°å°ç¨‹åºç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#_7-3-å°†ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå¯¹åº”åˆ°å°ç¨‹åºç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ" class="header-anchor">#</a> 7.3 å°†ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå¯¹åº”åˆ°å°ç¨‹åºç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</h3> <blockquote><p>åˆå§‹åŒ–è¿‡ç¨‹é‡Œçš„ç”Ÿå‘½å‘¨æœŸå¯¹åº”å¾ˆç®€å•ï¼Œåœ¨å°ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸå›è°ƒå‡½æ•°é‡Œè°ƒç”¨ Taro ç»„ä»¶é‡Œå¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å³å¯ï¼Œä¾‹å¦‚ï¼šå°ç¨‹åºç»„ä»¶ <code>ready</code> çš„å›è°ƒå‡½æ•°é‡Œä¼šè°ƒç”¨ Taro ç»„ä»¶çš„ <code>componentDidMount</code> æ–¹æ³•ã€‚å®ƒä»¬çš„æ‰§è¡Œè¿‡ç¨‹å’Œå¯¹åº”å…³ç³»å¦‚ä¸‹å›¾...</p></blockquote> <p><img src="https://poetries1.gitee.io/img-repo/2020/09/252.png" alt=""></p> <blockquote><p>å°ç¨‹åºé¡µé¢çš„<code>componentWillMount</code> æœ‰ä¸€ç‚¹ç‰¹æ®Šï¼Œä¼šæœ‰ä¸¤ç§åˆå§‹åŒ–æ–¹å¼ã€‚ç”±äºå°ç¨‹åºçš„é¡µé¢éœ€è¦ç­‰åˆ° <code>onLoad</code> ä¹‹åæ‰å¯ä»¥è·å–åˆ°é¡µé¢çš„è·¯ç”±å‚æ•°ï¼Œå› æ­¤å¦‚æœæ˜¯å¯åŠ¨é¡µé¢ï¼Œä¼šç­‰åˆ° <code>onLoad</code> æ—¶æ‰ä¼šè§¦å‘ã€‚è€Œå¯¹äºå°ç¨‹åºå†…éƒ¨é€šè¿‡ <code>navigateTo</code>ç­‰ API è·³è½¬çš„é¡µé¢ï¼ŒTaro åšäº†ä¸€ä¸ªå…¼å®¹ï¼Œè°ƒç”¨ <code>navigateTo</code> æ—¶å°†é¡µé¢å‚æ•°å­˜å‚¨åœ¨ä¸€ä¸ªå…¨å±€å¯¹è±¡ä¸­ï¼Œåœ¨é¡µé¢ <code>attached</code> çš„æ—¶å€™ä»å…¨å±€å¯¹è±¡é‡Œå–åˆ°ï¼Œè¿™æ ·å°±ä¸ç”¨ç­‰åˆ°é¡µé¢ <code>onLoad</code> å³å¯è·å–åˆ°è·¯ç”±å‚æ•°ï¼Œè§¦å‘ <code>componentWillMount</code>ç”Ÿå‘½å‘¨æœŸ...</p></blockquote> <p><strong>çŠ¶æ€æ›´æ–°</strong></p> <p><img src="https://poetries1.gitee.io/img-repo/2020/09/253.png" alt=""></p> <ul><li>Taro ç»„ä»¶çš„ <code>setState</code> è¡Œä¸ºæœ€ç»ˆä¼šå¯¹åº”åˆ°å°ç¨‹åºçš„<code>setData</code>ã€‚Taro å¼•å…¥äº†å¦‚ <code>nextTick</code> ï¼Œç¼–è¯‘æ—¶è¯†åˆ«æ¨¡æ¿ä¸­ç”¨åˆ°çš„æ•°æ®ï¼Œåœ¨ setData å‰è¿›è¡Œæ•°æ®å·®å¼‚æ¯”è¾ƒç­‰æ–¹å¼æ¥æé«˜ <code>setState</code>çš„æ€§èƒ½ã€‚</li> <li>å¦‚ä¸Šå›¾ï¼Œç»„ä»¶è°ƒç”¨ <code>setState</code> æ–¹æ³•ä¹‹åï¼Œå¹¶ä¸ä¼šç«‹åˆ»æ‰§è¡Œç»„ä»¶æ›´æ–°é€»è¾‘ï¼Œè€Œæ˜¯ä¼šå°†æœ€æ–°çš„ <code>state</code> æš‚å­˜å…¥ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œç­‰ <code>nextTick</code> å›è°ƒæ—¶æ‰ä¼šè®¡ç®—æœ€æ–°çš„ <code>state</code> è¿›è¡Œç»„ä»¶æ›´æ–°ã€‚è¿™æ ·å³ä½¿è¿ç»­å¤šæ¬¡çš„è°ƒç”¨<code>setState</code> å¹¶ä¸ä¼šè§¦å‘å¤šæ¬¡çš„è§†å›¾æ›´æ–°ã€‚åœ¨å°ç¨‹åºä¸­ <code>nextTick</code> æ˜¯è¿™ä¹ˆå®ç°çš„...</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">nextTick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  fn <span class="token operator">=</span> <span class="token keyword">typeof</span> fn <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">?</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">:</span> fn
  <span class="token keyword">const</span> timerFunc <span class="token operator">=</span> wx<span class="token punctuation">.</span>nextTick <span class="token operator">?</span> wx<span class="token punctuation">.</span>nextTick <span class="token punctuation">:</span> setTimeout
  <span class="token function">timerFunc</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token operator">...</span>
</code></pre></div><blockquote><p>é™¤äº†è®¡ç®—å‡ºæœ€æ–°çš„ç»„ä»¶ <code>state</code> ï¼Œåœ¨ç»„ä»¶çŠ¶æ€æ›´æ–°è¿‡ç¨‹é‡Œè¿˜ä¼šè°ƒç”¨å‰é¢æåˆ°è¿‡çš„ <code>_createData</code> æ–¹æ³•ï¼Œå¾—åˆ°æœ€ç»ˆå°ç¨‹åºç»„ä»¶çš„ <code>data</code>ï¼Œå¹¶è°ƒç”¨å°ç¨‹åºçš„ <code>setData</code> æ–¹æ³•æ¥è¿›è¡Œç»„ä»¶çš„æ›´æ–°</p></blockquote> <h3 id="_7-4-äº‹ä»¶å¤„ç†å‡½æ•°å¯¹åº”"><a href="#_7-4-äº‹ä»¶å¤„ç†å‡½æ•°å¯¹åº”" class="header-anchor">#</a> 7.4 äº‹ä»¶å¤„ç†å‡½æ•°å¯¹åº”</h3> <p>åœ¨å°ç¨‹åºçš„ç»„ä»¶é‡Œï¼Œäº‹ä»¶å“åº”å‡½æ•°éœ€è¦é…ç½®åœ¨ methods å­—æ®µé‡Œã€‚è€Œåœ¨ JSX é‡Œï¼Œäº‹ä»¶æ˜¯è¿™æ ·ç»‘å®šçš„ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;View onClick={this.handleClick}&gt;&lt;/View&gt;
</code></pre></div><p>ç¼–è¯‘çš„è¿‡ç¨‹ä¼šå°† JSX è½¬æ¢æˆå°ç¨‹åºæ¨¡æ¿ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;view bindclick=&quot;handleClick&quot;&gt;&lt;/view&gt;...
</code></pre></div><p>åœ¨<code>createComponent</code> æ–¹æ³•é‡Œï¼Œä¼šå°†äº‹ä»¶å“åº”å‡½æ•° <code>handleClick</code> æ·»åŠ åˆ° <code>methods</code> å­—æ®µä¸­ï¼Œå¹¶ä¸”åœ¨å“åº”å‡½æ•°é‡Œè°ƒç”¨çœŸæ­£çš„ <code>this.handleClick</code>æ–¹æ³•ã€‚</p> <p>åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œä¼šæå–æ¨¡æ¿ä¸­ç»‘å®šè¿‡çš„æ–¹æ³•ï¼Œå¹¶å­˜åˆ°ç»„ä»¶çš„ <code>$events</code> å­—æ®µé‡Œï¼Œè¿™æ ·åœ¨è¿è¡Œæ—¶å°±å¯ä»¥åªå°†ç”¨åˆ°çš„äº‹ä»¶å“åº”å‡½æ•°é…ç½®åˆ°å°ç¨‹åºç»„ä»¶çš„ <code>methods</code> å­—æ®µä¸­ã€‚</p> <p>åœ¨è¿è¡Œæ—¶é€šè¿‡ <code>processEvent</code> è¿™ä¸ªæ–¹æ³•æ¥å¤„ç†äº‹ä»¶çš„å¯¹åº”ï¼Œçœç•¥æ‰å¤„ç†è¿‡ç¨‹ï¼Œå°±æ˜¯è¿™æ ·çš„...</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">processEvent</span> <span class="token punctuation">(</span><span class="token parameter">eventHandlerName<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  obj<span class="token punctuation">[</span>eventHandlerName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
	scope<span class="token punctuation">[</span>eventHandlerName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>callScope<span class="token punctuation">,</span> realArgs<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>è¿™ä¸ªæ–¹æ³•çš„æ ¸å¿ƒä½œç”¨å°±æ˜¯è§£æå‡ºäº‹ä»¶å“åº”å‡½æ•°æ‰§è¡Œæ—¶çœŸæ­£çš„ä½œç”¨åŸŸ <code>callScope</code> ä»¥åŠä¼ å…¥çš„å‚æ•°ã€‚åœ¨ <code>JSX</code>é‡Œï¼Œæˆ‘ä»¬å¯ä»¥åƒä¸‹é¢è¿™æ ·é€šè¿‡ <code>bind</code>ä¼ å…¥å‚æ•°ï¼š</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>&lt;View onClick={this.handleClick.bind(this, arga, argb)}&gt;&lt;/View&gt;
</code></pre></div><blockquote><p>å°ç¨‹åºä¸æ”¯æŒé€šè¿‡ <code>bind</code> çš„æ–¹å¼ä¼ å…¥å‚æ•°ï¼Œä½†æ˜¯å°ç¨‹åºå¯ä»¥ç”¨ <code>data</code> å¼€å¤´çš„æ–¹å¼ï¼Œå°†æ•°æ®ä¼ é€’åˆ° <code>event.currentTarget.dataset</code> ä¸­ã€‚ç¼–è¯‘è¿‡ç¨‹ä¼šå°† <code>bind</code> æ–¹å¼ä¼ é€’çš„å‚æ•°å¯¹åº”åˆ°<code>dataset</code> ä¸­ï¼Œ<code>processEvent</code> å‡½æ•°ä¼šä» <code>dataset</code> é‡Œå–åˆ°ä¼ å…¥çš„å‚æ•°ä¼ ç»™çœŸæ­£çš„äº‹ä»¶å“åº”å‡½æ•°ã€‚</p></blockquote> <p>è‡³æ­¤ï¼Œç»è¿‡ç¼–è¯‘ä¹‹åçš„ Taro ç»„ä»¶ç»ˆäºå¯ä»¥è¿è¡Œåœ¨å°ç¨‹åºç¯å¢ƒé‡Œäº†...</p> <h3 id="_7-5-å¯¹-api-è¿›è¡Œ-promise-åŒ–çš„å¤„ç†"><a href="#_7-5-å¯¹-api-è¿›è¡Œ-promise-åŒ–çš„å¤„ç†" class="header-anchor">#</a> 7.5 å¯¹ API è¿›è¡Œ Promise åŒ–çš„å¤„ç†</h3> <blockquote><p>Taro å¯¹å°ç¨‹åºçš„æ‰€æœ‰ API è¿›è¡Œäº†ä¸€ä¸ªåˆ†ç±»æ•´ç†ï¼Œå°†å…¶ä¸­çš„å¼‚æ­¥ API åšäº†ä¸€å±‚ <code>Promise</code>åŒ–çš„å°è£…ã€‚ä¾‹å¦‚ï¼Œ<code>wx.getStorage</code>ç»è¿‡ä¸‹é¢çš„å¤„ç†å¯¹åº”åˆ°<code>Taro.getStorage</code>(æ­¤å¤„ä»£ç ä½œç¤ºä¾‹ç”¨ï¼Œä¸å®é™…æºä»£ç ä¸å°½ç›¸åŒ)</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>Taro<span class="token punctuation">[</span><span class="token string">'getStorage'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token parameter">options</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
  <span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token punctuation">[</span><span class="token string">'fail'</span><span class="token punctuation">,</span> <span class="token string">'success'</span><span class="token punctuation">,</span> <span class="token string">'complete'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">k</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	  obj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	    options<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
	    <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">===</span> <span class="token string">'success'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		  <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
	    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">===</span> <span class="token string">'fail'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		  <span class="token function">reject</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
	    <span class="token punctuation">}</span>
	  <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	wx<span class="token punctuation">[</span><span class="token string">'getStorage'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> p
<span class="token punctuation">}</span><span class="token operator">...</span>
</code></pre></div><p>å°±å¯ä»¥è¿™ä¹ˆè°ƒç”¨äº†ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å°ç¨‹åºçš„è°ƒç”¨æ–¹å¼</span>
Taro<span class="token punctuation">.</span><span class="token function">getStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  key<span class="token punctuation">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>
  <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// åœ¨ Taro é‡Œä¹Ÿå¯ä»¥è¿™æ ·è°ƒç”¨</span>
Taro<span class="token punctuation">.</span><span class="token function">getStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  key<span class="token punctuation">:</span> <span class="token string">'test'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// success</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">...</span>
</code></pre></div><h2 id="å…«ã€h5-è¿è¡Œæ—¶"><a href="#å…«ã€h5-è¿è¡Œæ—¶" class="header-anchor">#</a> å…«ã€H5 è¿è¡Œæ—¶</h2> <h3 id="_8-1-h5-è¿è¡Œæ—¶è§£æ"><a href="#_8-1-h5-è¿è¡Œæ—¶è§£æ" class="header-anchor">#</a> 8.1 H5 è¿è¡Œæ—¶è§£æ</h3> <blockquote><p>é¦–å…ˆï¼Œæˆ‘ä»¬é€‰ç”¨<code>Nerv</code>ä½œä¸º <code>Web</code> ç«¯çš„è¿è¡Œæ—¶æ¡†æ¶ã€‚ä½ å¯èƒ½ä¼šæœ‰é—®é¢˜ï¼šåŒæ ·æ˜¯ç±»<code>React</code>æ¡†æ¶ï¼Œä¸ºä½•æˆ‘ä»¬ä¸ç›´æ¥ç”¨<code>React</code>ï¼Œè€Œæ˜¯ç”¨<code>Nerv</code>å‘¢ï¼Ÿ</p></blockquote> <p>ä¸ºäº†æ›´å¿«æ›´ç¨³ã€‚å¼€å‘è¿‡ç¨‹ä¸­å‰ç«¯æ¡†æ¶æœ¬èº«æœ‰å¯èƒ½ä¼šå‡ºç°é—®é¢˜ã€‚å¦‚æœæ˜¯ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼Œå¾ˆæœ‰å¯èƒ½æ— æ³•å¾—åˆ°åŠæ—¶çš„ä¿®å¤ï¼Œå¯¼è‡´æ•´ä¸ªé¡¹ç›®çš„è¿›åº¦å—å½±å“ã€‚Nervå°±ä¸ä¸€æ ·ã€‚ä½œä¸ºå›¢é˜Ÿè‡ªç ”çš„äº§å“ï¼Œå‡ºç°ä»»ä½•é—®é¢˜æˆ‘ä»¬éƒ½å¯ä»¥åœ¨å›¢é˜Ÿå†…éƒ¨å¿«é€Ÿå¾—åˆ°è§£å†³ã€‚ä¸æ­¤åŒæ—¶ï¼ŒNervä¹Ÿå…·æœ‰ä¸Reactç›¸åŒçš„ APIï¼ŒåŒæ ·ä½¿ç”¨ Virtual DOM æŠ€æœ¯è¿›è¡Œä¼˜åŒ–ï¼Œæ­£å¸¸ä½¿ç”¨ä¸Reactå¹¶æ²¡æœ‰åŒºåˆ«ï¼Œå®Œå…¨å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„éœ€è¦ã€‚</p> <p>ä½¿ç”¨Taroä¹‹åï¼Œæˆ‘ä»¬ä¹¦å†™çš„æ˜¯ç±»ä¼¼äºä¸‹å›¾çš„ä»£ç ...</p> <p><img src="https://poetries1.gitee.io/img-repo/2020/09/254.png" alt=""></p> <blockquote><p>æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œå°±ç®—æ˜¯è½¬æ¢è¿‡çš„ä»£ç ï¼Œä¹Ÿä¾ç„¶å­˜åœ¨ç€<code>view</code>ã€<code>button</code>ç­‰åœ¨ <code>Web</code> å¼€å‘ä¸­å¹¶ä¸å­˜åœ¨çš„ç»„ä»¶ã€‚å¦‚ä½•åœ¨ <code>Web</code> ç«¯æ­£å¸¸ä½¿ç”¨è¿™äº›ç»„ä»¶ï¼Ÿè¿™æ˜¯æˆ‘ä»¬ç¢°åˆ°çš„ç¬¬ä¸€ä¸ªé—®é¢˜</p></blockquote> <h4 id="_8-1-1-ç»„ä»¶å®ç°"><a href="#_8-1-1-ç»„ä»¶å®ç°" class="header-anchor">#</a> 8.1.1 ç»„ä»¶å®ç°</h4> <p><img src="https://poetries1.gitee.io/img-repo/2020/09/255.png" alt=""></p> <p>ä½œä¸ºå¼€å‘è€…ï¼Œä½ ç¬¬ä¸€ååº”æˆ–è®¸ä¼šå°è¯•åœ¨ç¼–è¯‘é˜¶æ®µä¸‹åŠŸå¤«ï¼Œå°è¯•ç›´æ¥ä½¿ç”¨æ•ˆæœç±»ä¼¼çš„ Web ç»„ä»¶æ›¿ä»£ï¼šç”¨<code>div</code>æ›¿ä»£<code>view</code>ï¼Œç”¨<code>img</code>æ›¿ä»£<code>image</code>ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p> <p>è´¹åŠ²å¿ƒæœºæå®šæ ‡ç­¾è½¬æ¢ä¹‹åï¼Œä¸Šé¢è¿™ä¸ªå·®å¼‚ä¼¼ä¹æ˜¯è§£å†³äº†ã€‚ä½†å¾ˆå¿«ä½ å°±ä¼šç¢°åˆ°ä¸€äº›æ›´åŠ æ£˜æ‰‹çš„é—®é¢˜ï¼š<code>hover-start-time</code>ã€<code>hover-stay-time</code>ç­‰ç­‰è¿™äº›å¸¸è§„ Web å¼€å‘ä¸­å¹¶ä¸å­˜åœ¨çš„å±æ€§è¦å¦‚ä½•å¤„ç†ï¼Ÿ</p> <p>å›é¡¾ä¸€ä¸‹ï¼šåœ¨å‰é¢è®²åˆ°å¤šç«¯è½¬æ¢çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¯´åˆ°äº†<code>babel</code>ã€‚åœ¨Taroä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>babylon</code>ç”Ÿæˆ <code>AST</code>ï¼Œ<code>babel-traverse</code>å»ä¿®æ”¹å’Œç§»åŠ¨ <code>AST</code> ä¸­çš„èŠ‚ç‚¹ã€‚ä½†babelæ‰€åšçš„å·¥ä½œè¿œè¿œä¸æ­¢è¿™äº›ã€‚</p> <p>æˆ‘ä»¬ä¸å¦¨å»<code>babel</code>çš„ <code>playground</code> çœ‹ä¸€çœ‹ä»£ç åœ¨è½¬è¯‘å‰åçš„å¯¹æ¯”ï¼šåœ¨ä½¿ç”¨äº†<code>@babel/preset-env</code>çš„<code>BUILT-INS</code>ä¹‹åï¼Œç®€å•çš„ä¸€å¥æºç <code>new Map()</code>ï¼Œåœ¨<code>babel</code>ç¼–è¯‘åå´å˜æˆäº†å¥½å‡ è¡Œä»£ç ...</p> <p><img src="https://poetries1.gitee.io/img-repo/2020/09/256.png" alt=""></p> <p>æ³¨æ„çœ‹è¿™å‡ ä¸ªæ–‡ä»¶ï¼š<code>core-js/modules/web.dom.iterable</code>ï¼Œ<code>core-js/modules/es6.array.iterator</code>ï¼Œ<code>core-js/modules/es6.map</code>ã€‚æˆ‘ä»¬å¯ä»¥åœ¨<code>core-js</code>çš„ <code>Git</code> ä»“åº“æ‰¾åˆ°ä»–ä»¬çš„çœŸèº«ã€‚å¾ˆæ˜æ˜¾ï¼Œè¿™å‡ ä¸ªæ¨¡å—å°±æ˜¯å¯¹åº”çš„ es ç‰¹æ€§è¿è¡Œæ—¶çš„å®ç°ã€‚</p> <p>ä»æŸç§è§’åº¦ä¸Šè®²ï¼Œæˆ‘ä»¬è¦åšçš„äº‹æƒ…å’Œbabeléå¸¸åƒã€‚babelæŠŠåŸºäºæ–°ç‰ˆ ECMAScript è§„èŒƒçš„ä»£ç è½¬æ¢ä¸ºåŸºäºæ—§ <code>ECMAScript</code> è§„èŒƒçš„ä»£ç ï¼Œè€ŒTaroå¸Œæœ›æŠŠåŸºäºReactè¯­æ³•çš„ä»£ç è½¬æ¢ä¸ºå°ç¨‹åºçš„è¯­æ³•ã€‚æˆ‘ä»¬ä»babelå—åˆ°äº†å¯å‘ï¼šæ—¢ç„¶<code>babel</code>å¯ä»¥é€šè¿‡è¿è¡Œæ—¶æ¡†æ¶æ¥å®ç°æ–°ç‰¹æ€§ï¼Œé‚£æˆ‘ä»¬ä¹ŸåŒæ ·å¯ä»¥é€šè¿‡è¿è¡Œæ—¶ä»£ç ï¼Œå®ç°ä¸Šé¢è¿™äº› Web å¼€å‘ä¸­ä¸å­˜åœ¨çš„åŠŸèƒ½ã€‚</p> <p>ä¸¾ä¸ªä¾‹å­ã€‚å¯¹äº<code>view</code>ç»„ä»¶ï¼Œé¦–å…ˆå®ƒæ˜¯ä¸ªæ™®é€šçš„ç±» <code>React</code> ç»„ä»¶ï¼Œå®ƒæŠŠå®ƒçš„å­ç»„ä»¶å¦‚å®å±•ç¤ºå‡ºæ¥...</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Nerv<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'nervjs'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">View</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token operator">...</span>
</code></pre></div><blockquote><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å¯¹<code>hover-start-time</code>åšå¤„ç†ã€‚ä¸Taroå…¶ä»–åœ°æ–¹çš„å‘½åè§„èŒƒä¸€è‡´ï¼Œæˆ‘ä»¬è¿™ä¸ª<code>View</code>ç»„ä»¶æ¥å—çš„å±æ€§åå°†ä¼šæ˜¯é©¼å³°å‘½åæ³•ï¼š<code>hoverStartTime</code>ã€‚<code>hoverStartTime</code>å‚æ•°å†³å®šæˆ‘ä»¬å°†åœ¨<code>View</code>ç»„ä»¶è§¦å‘<code>touch</code>äº‹ä»¶å¤šä¹…åæ”¹å˜ç»„ä»¶çš„æ ·å¼...</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ç¤ºä¾‹ä»£ç </span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>
    hoverStartTime <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">,</span>
    onTouchStart
  <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">_onTouchStart</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// @TODO è§¦å‘touchæ ·å¼æ”¹å˜</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> hoverStartTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
    onTouchStart <span class="token operator">&amp;&amp;</span> <span class="token function">onTouchStart</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div onTouchStart<span class="token operator">=</span><span class="token punctuation">{</span>_onTouchStart<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token operator">...</span>
</code></pre></div><blockquote><p>å†ç¨åŠ ä¿®é¥°ï¼Œæˆ‘ä»¬å°±èƒ½å¾—åˆ°ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„<code>Web</code>ç‰ˆ <code>View</code>ç»„ä»¶</p></blockquote> <p><code>view</code>å¯ä»¥è¯´æ˜¯å°ç¨‹åºæœ€ç®€å•çš„ç»„ä»¶ä¹‹ä¸€äº†ã€‚<code>text</code>çš„å®ç°ç”šè‡³æ¯”ä¸Šé¢çš„ä»£ç è¿˜è¦ç®€å•å¾—å¤šã€‚ä½†è¿™å¹¶ä¸è¯´æ˜ç»„ä»¶çš„å®ç°ä¹‹è·¯ä¸Šå°±æ²¡æœ‰éšœç¢ã€‚å¤æ‚å¦‚<code>swiper</code>ï¼Œ<code>scroll-view</code>ï¼Œ<code>tabbar</code>ï¼Œæˆ‘ä»¬éœ€è¦èŠ±è´¹å¤§é‡çš„ç²¾åŠ›åˆ†æå°ç¨‹åºåŸç”Ÿç»„ä»¶çš„ <code>API</code>ï¼Œäº¤äº’è¡Œä¸ºï¼Œæç«¯å€¼å¤„ç†ï¼Œæ¥å—çš„å±æ€§ç­‰ç­‰ï¼Œå†é€šè¿‡ Web æŠ€æœ¯å®ç°ã€‚...</p> <h3 id="_8-2-api-é€‚é…"><a href="#_8-2-api-é€‚é…" class="header-anchor">#</a> 8.2 API é€‚é…</h3> <blockquote><p>é™¤äº†ç»„ä»¶ï¼Œå°ç¨‹åºä¸‹æœ‰ä¸€äº› API ä¹Ÿæ˜¯ Web å¼€å‘ä¸­æ‰€ä¸å…·å¤‡çš„ã€‚æ¯”å¦‚å°ç¨‹åºæ¡†æ¶å†…ç½®çš„<code>wx.request/wx.getStorage</code>ç­‰ APIï¼›ä½†åœ¨ Web å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯<code>fetch/localStorage</code>ç­‰å†…ç½®çš„å‡½æ•°æˆ–è€…å¯¹è±¡</p></blockquote> <p><img src="https://poetries1.gitee.io/img-repo/2020/09/257.png" alt=""></p> <p>å°ç¨‹åºçš„ API å®ç°æ˜¯ä¸ªå·¨å¤§çš„é»‘ç›’ï¼Œæˆ‘ä»¬ä»…ä»…çŸ¥é“å¦‚ä½•ä½¿ç”¨å®ƒï¼Œä½¿ç”¨å®ƒä¼šå¾—åˆ°ä»€ä¹ˆç»“æœï¼Œä½†å¯¹å®ƒå†…éƒ¨çš„å®ç°ä¸€æ— æ‰€çŸ¥ã€‚</p> <p>å¦‚ä½•è®© Web ç«¯ä¹Ÿèƒ½ä½¿ç”¨å°ç¨‹åºæ¡†æ¶ä¸­æä¾›çš„è¿™äº›åŠŸèƒ½ï¼Ÿæ—¢ç„¶å·²ç»çŸ¥é“è¿™ä¸ªé»‘ç›’çš„å…¥å‚å‡ºå‚æƒ…å†µï¼Œé‚£æˆ‘ä»¬è‡ªå·±æ‰“é€ ä¸€ä¸ªé»‘ç›’å°±å¥½äº†ã€‚</p> <p>æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬ä¾ç„¶é€šè¿‡è¿è¡Œæ—¶æ¡†æ¶æ¥å®ç°è¿™äº› Web ç«¯ä¸å­˜åœ¨çš„èƒ½åŠ›ã€‚</p> <p>å…·ä½“è¯´æ¥ï¼Œæˆ‘ä»¬åŒæ ·éœ€è¦åˆ†æå°ç¨‹åºåŸç”Ÿ APIï¼Œæœ€åé€šè¿‡ Web æŠ€æœ¯å®ç°ã€‚æœ‰å…´è¶£å¯ä»¥åœ¨ Git ä»“åº“ä¸­çœ‹åˆ°è¿™äº›åŸç”Ÿ API çš„å®ç°ã€‚ä¸‹é¢ä»¥<code>wx.setStorage</code>ä¸ºä¾‹è¿›è¡Œç®€å•è§£æã€‚</p> <p><code>wx.setStorage</code>æ˜¯ä¸€ä¸ªå¼‚æ­¥æ¥å£ï¼Œå¯ä»¥æŠŠ<code>key: value</code>æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ç¼“å­˜ã€‚å¾ˆå®¹æ˜“è”æƒ³åˆ°ï¼Œåœ¨ Web å¼€å‘ä¸­ä¹Ÿæœ‰ç±»ä¼¼çš„æ•°æ®å­˜å‚¨æ¦‚å¿µï¼Œè¿™å°±æ˜¯<code>localStorage</code>ã€‚åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„ç›®æ ‡å·²ç»ååˆ†æ˜ç¡®ï¼šæˆ‘ä»¬éœ€è¦å€ŸåŠ©<code>äºlocalStorage</code>ï¼Œå®ç°ä¸€ä¸ªä¸<code>wx.setStorage</code>ç›¸åŒçš„ APIã€‚...</p> <blockquote><p>è€Œåœ¨ Web ä¸­ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å¾€æœ¬åœ°å­˜å‚¨å†™å…¥æ•°æ®ï¼Œä½¿ç”¨çš„ API æ˜¯<code>localStorage.setItem(key, value)</code>ã€‚æˆ‘ä»¬å¾ˆå®¹æ˜“å°±å¯ä»¥æ„æ€å‡ºè¿™ä¸ªå‡½æ•°çš„é›å½¢</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* ç¤ºä¾‹ä»£ç  */</span>
<span class="token keyword">function</span> <span class="token function">setStorage</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> key<span class="token punctuation">,</span> value <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æˆ‘ä»¬é¡ºæ‰‹åšç‚¹ä¼˜åŒ–ï¼ŒæŠŠåŸºäºå¼‚æ­¥å›è°ƒçš„ API éƒ½ç»™åšäº†ä¸€å±‚ Promise åŒ…è£…ï¼Œè¿™å¯ä»¥è®©ä»£ç çš„æµç¨‹å¤„ç†æ›´åŠ æ–¹ä¾¿ã€‚æ‰€ä»¥è¿™æ®µä»£ç çœ‹èµ·æ¥ä¼šåƒä¸‹é¢è¿™æ ·ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* ç¤ºä¾‹ä»£ç  */</span>
<span class="token keyword">function</span> <span class="token function">setStorage</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> key<span class="token punctuation">,</span> value <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> errMsg<span class="token punctuation">:</span> <span class="token string">'setStorage:ok'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token operator">...</span>
</code></pre></div><p>çœ‹èµ·æ¥å¾ˆå®Œç¾ï¼Œä½†å¼€å‘çš„é“è·¯ä¸ä¼šå¦‚æ­¤å¹³å¦ã€‚æˆ‘ä»¬è¿˜éœ€è¦å¤„ç†å…¶ä½™çš„å…¥å‚ï¼šsuccessã€failå’Œcompleteã€‚successå›è°ƒä¼šåœ¨æ“ä½œæˆåŠŸå®Œæˆæ—¶è°ƒç”¨ï¼Œfailä¼šåœ¨æ“ä½œå¤±è´¥çš„æ—¶å€™æ‰§è¡Œï¼Œcompleteåˆ™æ— è®ºå¦‚ä½•éƒ½ä¼šæ‰§è¡Œã€‚setStorageå‡½æ•°åªä¼šåœ¨keyå€¼æ˜¯Stringç±»å‹æ—¶æœ‰æ­£ç¡®çš„è¡Œä¸ºï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ºè¿™ä¸ªå‡½æ•°æ·»åŠ äº†ä¸€ä¸ªç®€å•çš„ç±»å‹åˆ¤æ–­ï¼Œå¹¶åœ¨å¼‚å¸¸æƒ…å†µä¸‹æ‰§è¡Œfailå›è°ƒã€‚ç»è¿‡è¿™è½®å˜åŠ¨ï¼Œè¿™æ®µä»£ç çœ‹èµ·æ¥ä¼šåƒä¸‹é¢è¿™æ ·...</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* ç¤ºä¾‹ä»£ç  */</span>
<span class="token keyword">function</span> <span class="token function">setStorage</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> success<span class="token punctuation">,</span> fail<span class="token punctuation">,</span> complete <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">{</span> errMsg<span class="token punctuation">:</span> <span class="token string">'setStorage:ok'</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> key <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    success <span class="token operator">&amp;&amp;</span> <span class="token function">success</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    fail <span class="token operator">&amp;&amp;</span> <span class="token function">fail</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  complete <span class="token operator">&amp;&amp;</span> <span class="token function">complete</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> errMsg<span class="token punctuation">:</span> <span class="token string">'setStorage:ok'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token operator">...</span>
</code></pre></div><p>æŠŠè¿™ä¸ª API å®ç°æŒ‚è½½åˆ°Taroæ¨¡å—ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡<code>Taro.setStorage</code>æ¥è°ƒç”¨è¿™ä¸ª API äº†ã€‚</p> <p>å½“ç„¶ï¼Œä¹Ÿæœ‰ä¸€äº› API æ˜¯ Web ç«¯æ— è®ºå¦‚ä½•æ— æ³•å®ç°çš„ï¼Œæ¯”å¦‚<code>wx.login</code>ï¼Œåˆæˆ–è€…<code>wx.scanCode</code>ã€‚æˆ‘ä»¬ç»´æŠ¤äº†ä¸€ä¸ª API å®ç°æƒ…å†µçš„åˆ—è¡¨ï¼Œåœ¨å®é™…çš„å¤šç«¯é¡¹ç›®å¼€å‘ä¸­åº”è¯¥å°½å¯èƒ½é¿å…ä½¿ç”¨å®ƒä»¬...</p> <h3 id="_8-3-è·¯ç”±"><a href="#_8-3-è·¯ç”±" class="header-anchor">#</a> 8.3 è·¯ç”±</h3> <blockquote><p>ä½œä¸ºå°ç¨‹åºçš„ä¸€å¤§èƒ½åŠ›ï¼Œå°ç¨‹åºæ¡†æ¶ä¸­ä»¥æ ˆçš„å½¢å¼ç»´æŠ¤äº†å½“å‰æ‰€æœ‰çš„é¡µé¢ï¼Œç”±æ¡†æ¶ç»Ÿä¸€ç®¡ç†ã€‚ç”¨æˆ·åªéœ€è¦è°ƒç”¨<code>wx.navigateTo</code>,<code>wx.navigateBack</code>,<code>wx.redirectTo</code>ç­‰å®˜æ–¹ APIï¼Œå°±å¯ä»¥å®ç°é¡µé¢çš„è·³è½¬ã€å›é€€ã€é‡å®šå‘ï¼Œè€Œä¸éœ€è¦å…³å¿ƒé¡µé¢æ ˆçš„ç»†èŠ‚ã€‚ä½†æ˜¯ä½œä¸ºå¤šç«¯é¡¹ç›®ï¼Œå½“æˆ‘ä»¬...</p></blockquote> <p>å°ç¨‹åºçš„è·¯ç”±æ¯”è¾ƒè½»é‡ã€‚ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡<code>app.json</code>ä¸ºå°ç¨‹åºé…ç½®é¡µé¢åˆ—è¡¨ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;pages&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;pages/index/index&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pages/logs/logs&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>åœ¨è¿è¡Œæ—¶ï¼Œå°ç¨‹åºå†…ç»´æŠ¤äº†ä¸€ä¸ªé¡µé¢æ ˆï¼Œå§‹ç»ˆå±•ç¤ºæ ˆé¡¶çš„é¡µé¢ï¼ˆ<code>Page</code>å¯¹è±¡ï¼‰ã€‚å½“ç”¨æˆ·è¿›è¡Œè·³è½¬ã€åé€€ç­‰æ“ä½œæ—¶ï¼Œç›¸åº”çš„ä¼šä½¿é¡µé¢æ ˆè¿›è¡Œå…¥æ ˆã€å‡ºæ ˆç­‰æ“ä½œ</p></blockquote> <p>åŒæ—¶ï¼Œåœ¨é¡µé¢æ ˆå‘ç”Ÿè·¯ç”±å˜åŒ–æ—¶ï¼Œè¿˜ä¼šè§¦å‘ç›¸åº”é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸ</p> <p><strong>å¯¹äº Web ç«¯å•é¡µåº”ç”¨è·¯ç”±ï¼Œæˆ‘ä»¬åˆ™ä»¥react-routerä¸ºä¾‹è¿›è¡Œè¯´æ˜</strong></p> <ul><li>é¦–å…ˆï¼Œ<code>react-router</code>å¼€å§‹é€šè¿‡<code>history</code>å·¥å…·ç›‘å¬é¡µé¢è·¯å¾„çš„å˜åŒ–ã€‚</li> <li>åœ¨é¡µé¢è·¯å¾„å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ<code>react-router</code>ä¼šæ ¹æ®æ–°çš„<code>location</code>å¯¹è±¡ï¼Œè§¦å‘ UI å±‚çš„æ›´æ–°ã€‚</li> <li>è‡³äº UI å±‚å¦‚ä½•æ›´æ–°ï¼Œåˆ™æ˜¯å–å†³äºæˆ‘ä»¬åœ¨Routeç»„ä»¶ä¸­å¯¹é¡µé¢è·¯å¾„å’Œç»„ä»¶çš„ç»‘å®šï¼Œç”šè‡³å¯ä»¥å®ç°åµŒå¥—è·¯ç”±ã€‚</li> <li>å¯ä»¥è¯´ï¼Œ<code>react-router</code>çš„è·¯ç”±æ–¹æ¡ˆæ˜¯ç»„ä»¶çº§åˆ«çš„ã€‚</li> <li>å…·ä½“åˆ°<code>Taro</code>ï¼Œä¸ºäº†ä¿æŒè·Ÿå°ç¨‹åºçš„è¡Œä¸ºä¸€è‡´ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç»†è‡´åˆ°ç»„ä»¶çº§åˆ«çš„è·¯ç”±æ–¹æ¡ˆï¼Œä½†éœ€è¦ä¸ºæ¯æ¬¡è·¯ç”±ä¿å­˜å®Œæ•´çš„é¡µé¢æ ˆã€‚</li> <li>å®ç°å½¢å¼ä¸Šï¼Œæˆ‘ä»¬å‚è€ƒ<code>react-router</code>ï¼šç›‘å¬é¡µé¢è·¯å¾„å˜åŒ–ï¼Œå†è§¦å‘<code>UI</code> æ›´æ–°ã€‚è¿™æ˜¯<code>React</code>çš„ç²¾é«“ä¹‹ä¸€ï¼Œå•å‘æ•°æ®æµ...</li></ul> <p><img src="https://poetries1.gitee.io/img-repo/2020/09/258.png" alt=""></p> <blockquote><p><code>@tarojs/router</code>åŒ…ä¸­åŒ…å«äº†ä¸€ä¸ªè½»é‡çš„<code>history</code>å®ç°ã€‚<code>history</code>ä¸­ç»´æŠ¤äº†ä¸€ä¸ªæ ˆï¼Œç”¨æ¥è®°å½•é¡µé¢å†å²çš„å˜åŒ–ã€‚å¯¹å†å²è®°å½•çš„ç›‘å¬ï¼Œä¾èµ–ä¸¤ä¸ªäº‹ä»¶ï¼š<code>hashchange</code>å’Œ<code>popstate</code>ã€‚</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* ç¤ºä¾‹ä»£ç  */</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'hashchange'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'popstate'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><ul><li>å¯¹äºä½¿ç”¨ <code>Hash</code>æ¨¡å¼çš„é¡µé¢è·¯ç”±ï¼Œæ¯æ¬¡é¡µé¢è·³è½¬éƒ½ä¼šä¾æ¬¡è§¦å‘<code>popstate</code>å’Œ<code>hashchange</code>äº‹ä»¶ã€‚ç”±äºåœ¨<code>popstate</code>çš„å›è°ƒä¸­å¯ä»¥å–åˆ°å½“å‰é¡µé¢çš„ <code>state</code>ï¼Œæˆ‘ä»¬é€‰æ‹©å®ƒä½œä¸ºä¸»è¦è·³è½¬é€»è¾‘çš„å®¹å™¨ã€‚</li> <li>ä½œä¸º UI å±‚ï¼Œ<code>@tarojs/router</code>åŒ…æä¾›äº†ä¸€ä¸ª<code>Router</code>ç»„ä»¶ï¼Œç»´æŠ¤é¡µé¢æ ˆã€‚ä¸å°ç¨‹åºç±»ä¼¼ï¼Œç”¨æˆ·ä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨<code>Router</code>ç»„ä»¶ï¼Œè€Œæ˜¯ç”±Taroè‡ªåŠ¨å¤„ç†ã€‚</li> <li>å¯¹äºå†å²æ ˆæ¥è¯´ï¼Œæ— éå°±æ˜¯ä¸‰ç§æ“ä½œï¼š<code>push</code>, <code>pop</code>ï¼Œè¿˜æœ‰<code>replace</code>ã€‚åœ¨å†å²æ ˆå˜åŠ¨æ—¶è§¦å‘<code>Router</code>çš„å›è°ƒï¼Œå°±å¯ä»¥è®©<code>Router</code>ä¹ŸåŒæ­¥å˜åŒ–ã€‚è¿™å°±æ˜¯Taroä¸­è·¯ç”±çš„åŸºæœ¬åŸç†...</li></ul> <h3 id="_8-4-redux-å¤„ç†"><a href="#_8-4-redux-å¤„ç†" class="header-anchor">#</a> 8.4 Redux å¤„ç†</h3> <ul><li>æ¯å½“æåˆ°Reactçš„æ•°æ®æµï¼Œæˆ‘ä»¬å°±ä¸å¾—ä¸æåˆ°Reduxã€‚é€šè¿‡åˆå¹¶Reducerï¼ŒReduxå¯ä»¥è®©å¤§å‹åº”ç”¨ä¸­çš„æ•°æ®æµæ›´åŠ è§„åˆ™ã€å¯é¢„æµ‹ã€‚</li> <li>æˆ‘ä»¬åœ¨Taroä¸­åŠ å…¥äº†Reduxçš„æ”¯æŒï¼Œé€šè¿‡å¯¼å…¥<code>@tarojs/redux</code>ï¼Œå³å¯åœ¨å°ç¨‹åºç«¯ä½¿ç”¨Reduxçš„åŠŸèƒ½ã€‚</li> <li>å¯¹äº Web ç«¯ï¼Œæˆ‘ä»¬å°è¯•ç›´æ¥ä½¿ç”¨<code>nerv-redux</code>åŒ…æä¾›æ”¯æŒï¼Œä½†è¿™ä¼šå¸¦æ¥ä¸€äº›é—®é¢˜...</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Nerv <span class="token keyword">from</span> <span class="token string">'nervjs'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'nerv-redux'</span>

@<span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Nerv<span class="token punctuation">.</span>Componnet</span> <span class="token punctuation">{</span>
  <span class="token function">componentDidShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'didShow'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'didMount'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">''</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token operator">...</span>
</code></pre></div><ul><li>å›æƒ³ä¸€ä¸‹å‰é¢è®²çš„<code>componentDidShow</code>çš„å®ç°ï¼šæˆ‘ä»¬ç»§æ‰¿ï¼Œå¹¶ä¸”æ”¹å†™ <code>componentDidMount</code>ã€‚</li> <li>ä½†æ˜¯å¯¹äºä½¿ç”¨Reduxçš„é¡µé¢æ¥è¯´ï¼Œæˆ‘ä»¬ç»§æ‰¿çš„ç±»ï¼Œæ˜¯ç»è¿‡<code>@connect</code>ä¿®é¥°è¿‡çš„ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ã€‚</li> <li>é—®é¢˜å°±å‡ºåœ¨è¿™é‡Œï¼šè¿™ä¸ªé«˜é˜¶ç»„ä»¶çš„ç­¾åé‡Œå¹¶æ²¡æœ‰<code>componentDidShow</code>è¿™ä¸€ä¸ªå‡½æ•°ã€‚æ‰€ä»¥æˆ‘ä»¬çš„ <code>componentDidMount</code> å†…ï¼Œç†æ‰€å½“ç„¶æ˜¯å–ä¸åˆ°<code>componentDidShow</code>çš„ã€‚</li> <li>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯¹<code>react-redux</code>ä»£ç è¿›è¡Œäº†ä¸€äº›å°æ”¹è£…ï¼Œè¿™å°±æ˜¯<code>@taro/redux-h5</code>çš„ç”±æ¥...</li></ul> <h2 id="ä¹ã€æ›´å¤šå‚è€ƒ"><a href="#ä¹ã€æ›´å¤šå‚è€ƒ" class="header-anchor">#</a> ä¹ã€æ›´å¤šå‚è€ƒ</h2> <ul><li><a href="https://nervjs.github.io/taro/docs/GETTING-STARTED.html" target="_blank" rel="noopener noreferrer">Taroå®˜æ–¹æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <!---->  </div> <footer class="page-edit"><!----> <!----></footer> <!---->  <div class="el-dialog__wrapper" style="display:none;"><div role="dialog" aria-modal="true" aria-label="è¯·å…ˆé˜…è¯»è´­ä¹°åè®®" class="el-dialog el-dialog--center" style="margin-top:15vh;width:30%;"><div class="el-dialog__header"><span class="el-dialog__title">è¯·å…ˆé˜…è¯»è´­ä¹°åè®®</span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><!----><div class="el-dialog__footer"><span class="dialog-footer"><button disabled="disabled" type="button" class="el-button el-button--danger is-disabled" style="width:100%;"><!----><!----><span>æˆ‘å·²é˜…è¯»ï¼ˆ8sï¼‰</span></button></span></div></div></div> <div class="el-dialog__wrapper" style="display:none;"><div role="dialog" aria-modal="true" aria-label="ä»˜è´¹é˜…è¯»" class="el-dialog" style="margin-top:15vh;width:30%;"><div class="el-dialog__header"><span class="el-dialog__title">ä»˜è´¹é˜…è¯»</span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><!----><div class="el-dialog__footer"><span class="dialog-footer"><button disabled="disabled" type="button" class="el-button el-button--danger is-disabled" style="width:100%;"><!----><!----><span>ç¡® å®š</span></button></span></div></div></div> <div class="el-dialog__wrapper" style="display:none;"><div role="dialog" aria-modal="true" aria-label="dialog" class="el-dialog" style="margin-top:15vh;width:30%;"><div class="el-dialog__header"><span class="el-dialog__title"></span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><!----><!----></div></div> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAU9ElEQVR4Xu1da5Ac1XX+TnfPa1crrQQiMY9YGGHAD6SdEWUjIdjVPiQgNhJa4VRBAgSIXZRRodgJOPED7DiACxts4yoHu0BKVaiYnVkJAkKPfQkBDgnSSmUIhKeEISSW0AO0O6/ue1K3R/uY2Xl0z3TPY3fuH6l2zj3n3HO+vn373nPPIdSbZQtEfnb4BmbxPRAtADAkDN5wzYbT9llmUIWEVIU6VaVKmx84usBQ9XcylBvqXj+/rSoVtqhUHQAWDdXz80OtxBjMJO9eP7+mbVjTylv0nSNkOQBwsHv9fPk6qNlW9QDg4e6rIHCEQuHdlbZyz08PbSHCVWN6EOjGtetP3VhpvUqRX5UA4Dcu9+GjxhsAbADhPAhxOi3p/aCUgTrVV84EkpemawfWbJh7wCm+leJTVQDgV9ecgqiyHky3gnCqaRTGHgqFl1TKQNNdblUAgPevOw8GfxOM60DwZxj9uxQM/2C6O6JS46soAHh4dTOE+iMQbgYouy4aXUgX9vyuUgaa7nIrBgDe030jAOn81FSftfEBCkbOnu5OqOT4yg4A3rvuM4D4FUBLCw6c8SCFwhsK0tUJirZAWQHAe6++F1DusK6tuIyCvc9ap69T2rVAWQBgru5Hlc0gWm5DQYGWsIcIwkafOqlNC7gOAN67ZhGgPAXQmbZ0Y36ZQpHP2+pTJ7ZtAVcBwHuv/nOA5PveZ1sz8GMUjFxrv1+9hx0LuAIA5lYNe0/9KQi32lEmg/ZOCobvK6F/vasFCzgOgJTz524Dqe0W5OcmIb6SWiJbS+JR71zQAo4CgN9p9esfND6v+QPBgpILEajiLFrU+14hsvrvpVnAMQDIA5zE+/yKd3bjOUCpbPkYBSNzSxtavbcVC5TqKVOGfPLjB72ve2fNOosUxYrcQjT7KBhuKURU/710C5QMAH7h4kAsNusdb2PgjxSPt3SNUhy2UTB8uVPM6nzyLLVKMQ4z1Nhg50HV6znD09BQCquMvryJghEZD1BvLlugpBkgvqvrtyz4i745cxxWU9xHwd47HWZaZ5fFAkUDIL571T1GPHlnoHkO4Mx7f0I9xt9TKPyPdY+5b4GiABAb6vqSSOhPepsaofqK2OQrPK5vUjD848JkxVPw3rUylu8qgJrBvBGKsYFathwrnmNt9rQNgNHdy/4Ecf9biqJqvubZbo16PQXDP3eLOe/pvh2EB9L4MzZQKPygWzKrla9tAEQHOt5nQ5zumzMbiqa5My7G1ygU/id3mAOpp5+uz+D/BAXDq92SWS18j3bf3AoiRjJ5cO6WjQdsASC2q+uXIqF/VfV64G1qcnNM7s4Ae7uHAFyWMYBdFAybEb/TtX247qZ9AC0aGx8LXmMZAMnnu1YkR/R+2dk/bw5IUd2zE+FvqCV8v1sCeAYCQD75gqbcbNpnGQCxgc4TwjAaNb8PnsZGt3yT4sv8bQpFfuiWkJkIgMNrb1pNCm3OsOlxSwCID3U+YiQNGcSJwLxmgBzZ7s3jX/EDCvZ+tw4A5yxwdN0tiwV4eDJHZjxREAD87PJPROOe9wFQWZ7+1BTwEAUjtzk3/HROM3EGkBY4vO4vbyCmu0D0Sel8leiuggCIDXXuFknjEvPd3zwHpLr47p/wUy8Fw2udAEBiR+tiHSTjEccvcfpmN0HxeNLYi2QS8Y8+nvgb8wENvMbbNeTY/f/L73vrdgJ/D0AzM4ZIUTds/duzHeNfjL3yAiCxe+UiPZY0FZSffPLTryyN+UUKRb7ohKzRnW1bABq/0Cl5WgJAai1yoKFr0JF7CavueWeBohhp+QUkCJ65c2FF8wvkBUBssOtVoevnS1t4Gxuh+l3Z9cvm5/cpGLYXRJoDLaM7V3DmT5YBAKChc6DgLGkFqKvueaNVUWhKfoGtdyx0hL8VHbLR5BSe3L2yIxlN7hyL7QicIuMzyqirFp1HFz59tNiBjfUb2dG2j2ji29fODMDA8cbOgeZSdZD9cwDg4NY7FlY0v0BOj8YGut4Uhn6OVF7u93tnufzpl2llRaygxb1Tnhi7zhjpa11NrKR9/lidAYhxY6BrwLH7/1fc++YWTMovAIEbt35roWP87dpG0mcFQHxXxwVGwvivsZ+zGawYYbb6OLg3Hx1sXQAdE4vAufMeJEUZ3xEzX/dC7I8fPXL7uI4aDgTahhy//y9ngpQM7cC2b53tOH9bNs4FgNhg14DQdXNxIkO8/HMdmQXt6ca8kUIRc+/B6TZTPwMtrQF4sNUf1dURgM3dHk9jAJo/4LQPCvNjHqZQpPTo4iyS6gCYMMqUV0Di2ZU/1uPJvx4j8c91ed8/NxQSaAkH3LgbWAdAHgDEBjqOCkOk5nwiBOZVMDpbNT5Piza/XHi6sEdRB0AOACSfv7wrORrfPvZzGY5983uO+TYKRR6y597C1Ly3e0sqGiitTfvj4IJrgNhg13NC15eNEXoaAtACFXj/j2vKfRSMdBZ2qT0K3tN9FwhyS3ZymxEBIZmWSlsDRPvbR1nwuMd9c5qgaOl75vZMXSI1wwDTKbSk53iJnNK683B3KzKzfhLaqCUsA0VmVBsHQLyv/UKDef/E6BmBU06pvDFIXEstvY85rQgPr14AoaXuHij6RmrZUvFvcqfHaIXfBAAGOh8xjNSZv2kTTYXz8f5WVMqgYX6cQpGvFNGz3sWCBcYBEB3oeI8NccZYn/Kd/RfQknkUPmUufa4nYWE8dRKbFjABwC+FGqJH5oxM3hg2Y/69ZTv9y682G5dTaPM2m2Ork1uwgAmAxLMrb9HjyYcn05cx+MOCmvwIBSM3WSCsk9i0gAmA+K6VTxiJ5Jcn9y378W8hxUV8Pi35t8OFyOq/27OACYDYYMebQhfm0a/ZSAZ/zrPHyW1qxt0UCt/ltpiZxt8EQOb3P2kq/I7f+C3ZtEfQNHI6nftMvGROdQYTz7pM8BAdCYxOtoni1eBrKlP8nx1nsPgqhXrT1ip2utc6rRngSsr1AC8G85aAB5uobaikC60U7busjVkdmGwc1eeFd9as6rMX89sIRhYSYUqcX/Up66xGPNjaPKrTOyRvM59szLypsWuwpEQaFBvsvF/oxjcmq6v5vfA0ViEApJKML1Eo/JSz5q1+btGdra0MJS1EjsHHGjsHSzqupdhQ13aR1LvSABDww9mUL44aeEae2mUDgLRqqVHLcgYYFrqxuIYAIOP1V1EoMn5s7Si8qpSZawCIDnS+zYaRdvnB0+CHFnAy6ZPTVuX3MF/5NJ3VE3Was1V+rcObmwPMZmBplGj/UMuakhZjheS6CICO/2NDnDZZgeoHgLkY+AkFI2lrl0JGdOr3VcObFzDEMAHmgoyBYwSlZVvLGtdOFN0DQH/7xyw4bcWnVfcaIOVHGSugGYvdCBkrBJRVwxG5IZUZUHL3tpa1rm1UuQaA0Z0rkjJIvWa+AiYrytiDIH2BqMco5DQnf181HJ6SYobBT2xv6XYsxYwZrwDtejDMewRscDMLPW2tJv+ueDwTQSzMx6BgE7VEZMibpUajO1Zw5vUQ1euFt6lKPwMzh+XgBRJLFgOwcjhyOyE9yRQDG7a3rHUkyZRZTY214q/FkX621QAXynZ5suLBoFY9kXoXxKEpF5W7tNzK4fCDxGQ+8Uy8ZXtL98StIlv6TyXm4atvACuPFs3GxrkJje5s48wbYopHg292FW4F57II410wXeh07GDRDiixIw+vXQ2eks7FOlcbs6KcAeT7My3nS9WEg1kfslwU7qBQeKWdLtVMy3u6j4FQXA5eO6+AaF97gpnTQ38VQmBuSTuMFbItf5+CkczVeYV0KU1sqqqqGbRqfmoKXV8gksnM3IYybP/ulCSWyZuOQaEt1NJjOesIRfvaTzDzlLvf5o2gHNVcSxuam72ZAe6iYG+fm1Iqwdu9z8D+9sMQPCX+2zd7FhzM/18+mzGOg/UQLdnyVvmEui/JNQBE+9rfZeazMofgaWyA5s8s5O3+QJ2RwAeg8vLpVHPINQDEBjr2CENMuYat+XzwlDsriDPeP8lleoHATQBEhCGuzrR9zX0KZgXP9AGBawCIDnX+kJPG3021HyEVGVzrbXqAQKa5YV1JSzMH5l0NXYMlJbim+K6Oa4yE+E02N9fsQnDKYKYHCDJzHjKJNY0dQ5b3/bP5mLIi6ySlvBour4hPi8b8FthYWetfB9JfwsDiBhVDpQaESr+aYeHZTgTl32tyRzAfWhkfAbh2JsYU5jLLyXsBHa+zEOdOJeLUBZGa2xDKiwJ59nEvWsLfdiP/UK3NlqmrYf2djxrCyBpeLBNEulQYqrK2YgygwbiGLtj8YWUVqaz01NWwXW1XiAQ9nU2Vqr0j4Ijd+D2wsppCPXscYVeDTFLXw+XtoBOB0ax5QyudKcxtozKSINyPuYe/T2cPxdwWV238xxNEjPa3H4LgU7MpOG1fA5MHy/x7ALfMtHDzcQDEBjufErpxZTYATLuvgfxfCptBia9T8Mn/qban1Q19xgGQ3N3RmoyJnNm5qythhBumSOMps6XchcX0QLkDTl0fWYaA9DRxfR0nmEXWvPC1fzhUjGn5VRDuo5bIpmJ610KfNADEdnVtEQk9M4NmahwyaYSMEppWewKWXSRfBz+DoF9Ol7jDsZGnASAxdNlFelL9j1xm8QQC0KbL1rBl36cRngD4kdStpN6DxbGorl5TsoVH+zqOM4scIcEyefScMtQNrC4jZdWGeTcIYajiX2nR5j9Uu8b8yrp5iOmLKbQ5LRfEFADEBzo2GYb4i1wDmplrgbzuFQA/B0YPNPF4NYGB9375dMAry+9dDcZyKPgatYR/PXk0UwDA25eeFlX8/5uvQpSsICIridRbNgvwswAiUNBPiyOvlNNGvH/NadDVS0AsE34vB+iicfmMwxQKz8/UJ2vNoOhg57+zbnwhl/LTe3vYUZfJyiv7wPSfIAxDNfY6cZmVX143C0kshOBPQcGnwCxD+pYC9Mmc2ueox5y9aFRf+2cMFq/kKxPnb54NUtPulDpquWnLjBEDZFJuOg5CDMwxEKIATfyfKQ7CLMAM128EqBEydJ9oLpjPAZG9LN5Spp/OoM/2HLE0A0iiWH/ny0IYn83liKrNJDZtkVPCwJh/QaHI17NxyFk3MLq7o5Xz7AxKZhWvJ1CCTWZQVwGVFtKinvR4wpMGyFsKNNrf8QYLsTCXsVIl5eT1tTJWFJ1BnnNmqByhYKQ7pw/zCUnsbgvpUXopn3/rC0Jn3OQKF2YdmvI5WtTz30UBQHaKDna9wLp+cT4Fqyq1vCuWrFmm/0DB8HfyaV9w7rayLyAF1PcGqgwkzG9TKDKRADyHegUBYH4RDLb/Suh8c14kqSrkp2F9PVAlQLBYBMsSAE6Wk/0Q4LzJA6umzEyV+KByavBjFIxca0W+JQBIRqN9rd1gpacQU+/sWVA93kJk9d9dswAfQ0AstBrtbBkA5qugf0VECEy5SJo2FoKZX0jR6ruErvk4L2O+iYKRR6zKtgWA1KtAeRfAlEOFTBDIghOkqlb1qNM5YQHm31Ao8md2WNkCgGQc39VxgZEw5DlB/r5E8M+R5wV1ENhxSNG0zMOYPXqx3YoqtgFgrgcGO+6ELu4pqGwdBAVN5BDBIQixiJb0fmCXX1EAkEKi/Sv6WKC9oEATBE31k8OChiqSQOZMVmkpLe7JGcqX9/O9SLFmscnYseZhZv50YR4Ef3MdBIXtVAQF820UijxURE+zS9EzgOws69hEhfI7CJxZUIH666CgiWwTFLHoy5RREgBMEMgQMq3hNQhROJ8MEXxNjbWZfs62d9ztYCQTL6pJdNIlT35ciqSSAWAuCrdfehapnteY8+8UjimaCiyVm4qOiC9l/LXXl4FkLPqah/RltHT7lAgfuwNyzAOxXZeey7pnDwtusqKE/Dz0zW6qB5daMdZJGhYCydGRd71GPERtQ46U0XUMABOvg8B+CP5jq+OSdQlkfYJ6y28BI5FEcnT0iF/TzqdLnznklL0cBYAJgueWNcXi/t+y4JzxhJnKyzL13qb6KyGrU1kgcWIUwjA+9FPyfKee/DFZjgNgjHG0r2OQWVjOYSfDy+S6oH6QNAEDoSeR+HgEikd73XfptvOceuon83ENAMyg6ED74xCcMx4t24DkIZJMSDGzt5AZyZFR6NE4tAbfv3gveeY6N5wveboGgDGFYwPt64WOn4DY1qGAGWvY0ADMsBtIRjyO5GgUzGxoAc/N3mXbNrrl/LIAQAqJ7bj0XKF4BsF8ht3BmCXsAoGCZ092+VYbvZFMIDkSBRsGSFMPKz5a7lu64zW39XR9BhgbAL8U8sQ+mvsoG8a1ticeuT5oCEDuH0y3ZiTkEx8zHS+b6vf2+pZvkxc6y9LKBoCx0cQH2q4SQn2MWdivTaso0Lxes44BqTV8OZUF9HjCnOohi5yksrIeU31qt2fptv6yeP6kkLIDQMqVgSUJ8vyzkTTWFTtYuUiUMYiaz1sz+QrkRo4+GoUej08aNrPi8f7a37r9r4q1RSn9KgKAMYUTz3cuFnH0CMPIefuo8ODYPFuQYDA/ISs6oqnayk85I6FDJBMQ+uQCpwzyaC/5VV5Ly/tklFVFWlWYKz60ap1hJB6GSFXIKqXJz0jF44HqUaFonjIvHhkiqZuOFskkjKSeKi2d0RSP9nvVo13nWbZV5hKoaKsKAIxZIDbQtV6w8Z1cCSuLsZR8VaiaCsXrMQNVSbH1NZpHJMvdObB0tq6bzh5byOXqRKp2SPVpd3iXbS2+KmgxRsjTp6oAMKZnfLDrK8x0nzCSuRMelGQIAilkzg4kQxvH/5X/VfLMGpxyuHS8EJY1UDR1P0Hc5WvrL6m4g2WBNgirEgDja4QXr1giRo17ha4vB7imToyIKK54tIiXlNudPLyx4VtLpFUNgMkjiO1u/1MY2jfkRVVmrsoNAVLUjxRVeUFV+Rfa8h1PWfJAhYlqBgBjdpJnDImhrquY+FaRFMsKXVdz2b5Mmvo+KbQVuv4jf/tAzRWrrDkAZDpUbjMzeS+GSlcCfBELcSYY6bWQHUIBESVIUQ4pqvqaIPG0L4qHaeWOEYfYV4RNzQMgm9VknGJc84dIURaBcYEgkpm0PsECTTI2Fcw+BlQwT76/ppNCMXmISQqNEHACjD8A/CYxDXlZ7KCO/mlXXeT/AQOtWhTnoNDfAAAAAElFTkSuQmCC" class="theme-float-btn"></main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.f60bfc341.js" defer></script><script src="/assets/js/6.7f8a8777.js" defer></script><script src="/assets/js/3.9d86cf58.js" defer></script><script src="/assets/js/66.74665605.js" defer></script><script src="/assets/js/11.fb060006.js" defer></script>
  </body>
</html>

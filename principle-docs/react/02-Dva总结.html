<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ä¸€ã€ç¯å¢ƒæ­å»º | é¢è¯•æŒ‡å—</title>
    <meta name="description" content="å‰ç«¯é¢è¯•æŒ‡å—ï¼Œå‰ç«¯é¢è¯•é¢˜æ•´ç†ï¼ŒæŒ‰æ¨¡å—åˆ†ç±»æ•´ç†æ€»ç»“ï¼Œæ‰“é€ æœ€å…¨é¢çš„å‰ç«¯é¢è¯•é¢˜">
    <link rel="icon" href="/logo.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
  <meta name="apple-mobile-web-app-status-bar-style">

    <link rel="preload" href="/assets/css/0.styles.9ad7bc48.css" as="style"><link rel="preload" href="/assets/js/app.f60bfc34.js" as="script"><link rel="preload" href="/assets/js/6.7f8a8777.js" as="script"><link rel="preload" href="/assets/js/3.9d86cf58.js" as="script"><link rel="preload" href="/assets/js/99.7d033614.js" as="script"><link rel="preload" href="/assets/js/11.fb060006.js" as="script"><link rel="prefetch" href="/assets/js/1.9e1b498f.js"><link rel="prefetch" href="/assets/js/10.fbc04ea9.js"><link rel="prefetch" href="/assets/js/100.c06a0f53.js"><link rel="prefetch" href="/assets/js/101.54402ede.js"><link rel="prefetch" href="/assets/js/102.d3860a7d.js"><link rel="prefetch" href="/assets/js/103.51a83ab2.js"><link rel="prefetch" href="/assets/js/104.4107118f.js"><link rel="prefetch" href="/assets/js/105.aada2418.js"><link rel="prefetch" href="/assets/js/106.4ce7d3b7.js"><link rel="prefetch" href="/assets/js/107.ca87a327.js"><link rel="prefetch" href="/assets/js/108.df939701.js"><link rel="prefetch" href="/assets/js/109.9f0c8605.js"><link rel="prefetch" href="/assets/js/110.016c3eb7.js"><link rel="prefetch" href="/assets/js/111.ff5dbcc4.js"><link rel="prefetch" href="/assets/js/112.ab20caec.js"><link rel="prefetch" href="/assets/js/113.6c12e76f.js"><link rel="prefetch" href="/assets/js/114.48e1a019.js"><link rel="prefetch" href="/assets/js/115.f291caf1.js"><link rel="prefetch" href="/assets/js/116.0188d28e.js"><link rel="prefetch" href="/assets/js/117.9b579bae.js"><link rel="prefetch" href="/assets/js/118.89da516f.js"><link rel="prefetch" href="/assets/js/119.c70b5105.js"><link rel="prefetch" href="/assets/js/12.9774db85.js"><link rel="prefetch" href="/assets/js/120.fcf3186f.js"><link rel="prefetch" href="/assets/js/13.ac14541c.js"><link rel="prefetch" href="/assets/js/14.155007f0.js"><link rel="prefetch" href="/assets/js/15.2d9ec2b2.js"><link rel="prefetch" href="/assets/js/16.aec442e8.js"><link rel="prefetch" href="/assets/js/17.59c81a6b.js"><link rel="prefetch" href="/assets/js/18.c38ff446.js"><link rel="prefetch" href="/assets/js/19.8203bd99.js"><link rel="prefetch" href="/assets/js/20.103004c4.js"><link rel="prefetch" href="/assets/js/21.1e6e08c9.js"><link rel="prefetch" href="/assets/js/22.5abbfd40.js"><link rel="prefetch" href="/assets/js/23.4cd5fd4d.js"><link rel="prefetch" href="/assets/js/24.602403ee.js"><link rel="prefetch" href="/assets/js/25.da971f83.js"><link rel="prefetch" href="/assets/js/26.43589785.js"><link rel="prefetch" href="/assets/js/27.6d18f825.js"><link rel="prefetch" href="/assets/js/28.843b905f.js"><link rel="prefetch" href="/assets/js/29.81e33cc0.js"><link rel="prefetch" href="/assets/js/30.7a4491ed.js"><link rel="prefetch" href="/assets/js/31.4275e9d2.js"><link rel="prefetch" href="/assets/js/32.6e6c282b.js"><link rel="prefetch" href="/assets/js/33.35641348.js"><link rel="prefetch" href="/assets/js/34.7737e542.js"><link rel="prefetch" href="/assets/js/35.3d539e4d.js"><link rel="prefetch" href="/assets/js/36.78f70288.js"><link rel="prefetch" href="/assets/js/37.ed0997e2.js"><link rel="prefetch" href="/assets/js/38.6d35141d.js"><link rel="prefetch" href="/assets/js/39.3b4241bb.js"><link rel="prefetch" href="/assets/js/4.cda2fc13.js"><link rel="prefetch" href="/assets/js/40.dd7b6d84.js"><link rel="prefetch" href="/assets/js/41.05fcd6ed.js"><link rel="prefetch" href="/assets/js/42.24fc3ac4.js"><link rel="prefetch" href="/assets/js/43.27b59a40.js"><link rel="prefetch" href="/assets/js/44.ac552dd9.js"><link rel="prefetch" href="/assets/js/45.6b1e07c4.js"><link rel="prefetch" href="/assets/js/46.8bf4b340.js"><link rel="prefetch" href="/assets/js/47.57a13e6c.js"><link rel="prefetch" href="/assets/js/48.8ef881a7.js"><link rel="prefetch" href="/assets/js/49.b76df872.js"><link rel="prefetch" href="/assets/js/5.eb1f29dc.js"><link rel="prefetch" href="/assets/js/50.f04492e5.js"><link rel="prefetch" href="/assets/js/51.e000ebea.js"><link rel="prefetch" href="/assets/js/52.bfbd5e6e.js"><link rel="prefetch" href="/assets/js/53.fc0a60dd.js"><link rel="prefetch" href="/assets/js/54.a798cd42.js"><link rel="prefetch" href="/assets/js/55.5ccb6ae1.js"><link rel="prefetch" href="/assets/js/56.1605b000.js"><link rel="prefetch" href="/assets/js/57.79350f4e.js"><link rel="prefetch" href="/assets/js/58.dcff3859.js"><link rel="prefetch" href="/assets/js/59.a366020b.js"><link rel="prefetch" href="/assets/js/60.2c42a67f.js"><link rel="prefetch" href="/assets/js/61.4d471001.js"><link rel="prefetch" href="/assets/js/62.07f7a685.js"><link rel="prefetch" href="/assets/js/63.3774b497.js"><link rel="prefetch" href="/assets/js/64.d8437f45.js"><link rel="prefetch" href="/assets/js/65.eaf10ccb.js"><link rel="prefetch" href="/assets/js/66.74665605.js"><link rel="prefetch" href="/assets/js/67.072c35ca.js"><link rel="prefetch" href="/assets/js/68.764ab8cb.js"><link rel="prefetch" href="/assets/js/69.6a27592a.js"><link rel="prefetch" href="/assets/js/7.9a5c64fa.js"><link rel="prefetch" href="/assets/js/70.2e7f3527.js"><link rel="prefetch" href="/assets/js/71.c6365fbe.js"><link rel="prefetch" href="/assets/js/72.15cfe1be.js"><link rel="prefetch" href="/assets/js/73.d56ee920.js"><link rel="prefetch" href="/assets/js/74.f848ccac.js"><link rel="prefetch" href="/assets/js/75.905f5556.js"><link rel="prefetch" href="/assets/js/76.49d98a04.js"><link rel="prefetch" href="/assets/js/77.4b62003f.js"><link rel="prefetch" href="/assets/js/78.5a4046ff.js"><link rel="prefetch" href="/assets/js/79.eb3ec067.js"><link rel="prefetch" href="/assets/js/8.bccf8145.js"><link rel="prefetch" href="/assets/js/80.c8247597.js"><link rel="prefetch" href="/assets/js/81.69952221.js"><link rel="prefetch" href="/assets/js/82.4439fbe3.js"><link rel="prefetch" href="/assets/js/83.df1321d3.js"><link rel="prefetch" href="/assets/js/84.23d01b47.js"><link rel="prefetch" href="/assets/js/85.c983047a.js"><link rel="prefetch" href="/assets/js/86.29b0f2d4.js"><link rel="prefetch" href="/assets/js/87.12e2e192.js"><link rel="prefetch" href="/assets/js/88.fb19aa58.js"><link rel="prefetch" href="/assets/js/89.ee2be7d8.js"><link rel="prefetch" href="/assets/js/9.ce1180ae.js"><link rel="prefetch" href="/assets/js/90.479f4d9d.js"><link rel="prefetch" href="/assets/js/91.619e0c8d.js"><link rel="prefetch" href="/assets/js/92.ae858703.js"><link rel="prefetch" href="/assets/js/93.f90a7ae1.js"><link rel="prefetch" href="/assets/js/94.8894adb4.js"><link rel="prefetch" href="/assets/js/95.683396f3.js"><link rel="prefetch" href="/assets/js/96.f65dc164.js"><link rel="prefetch" href="/assets/js/97.75bd77e0.js"><link rel="prefetch" href="/assets/js/98.892b530a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9ad7bc48.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="é¢è¯•æŒ‡å—" class="logo">  </a> <div class="links" style="background: rgb(255, 255, 255); max-width: 1297px;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value="" class="" placeholder=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div><a href="/docs/base.html" class="nav-link">åŸºç¡€
      </a></div></div><div class="nav-item"><div><a href="/docs/simply.html" class="nav-link">âœ¨è¿›é˜¶
      </a></div></div><div class="nav-item"><div><a href="/excellent-docs/1-HTMLæ¨¡å—.html" class="nav-link">ğŸ‘ç²¾é€‰
      </a></div></div><div class="nav-item"><div><a href="/docs/excellent.html" class="nav-link">ğŸ”¥é«˜é¢‘
      </a></div></div><div class="nav-item"><div><a href="/docs/guide.html" class="nav-link">æŒ‡å—
      </a></div></div><div class="nav-item"><div><a href="/docs/performance.html" class="nav-link">æ€§èƒ½
      </a></div></div><div class="nav-item"><div><a href="/docs/detail-expain.html" class="nav-link">ç»¼åˆ
      </a></div></div><div class="nav-item"><div><a href="/principle-docs/comprehensive/01-è™šæ‹ŸDOMåŸç†åˆ†æ.html" class="nav-link">åŸç†
      </a></div></div><div class="nav-item"><div><a href="/docs/handwritten.html" class="nav-link">æ‰‹å†™
      </a></div></div><div class="nav-item"><div><a href="/qa/1-å‰ç«¯100é¢˜è‡ªæ£€.html" class="nav-link">è‡ªæ£€
      </a></div></div><div class="nav-item"><div><a href="/interview-exp/å‰ç«¯é¢ç»æ±‡æ€».html" class="nav-link">â­é¢ç»
      </a></div></div><div class="nav-item"><div><a href="/days/æ¯æ—¥ä¸€é¢˜.html" class="nav-link">ğŸ’¥æ¯æ—¥ä¸€é¢˜
      </a></div></div><div class="nav-item"><div><a href="/docs/design-pattern.html" class="nav-link">è®¾è®¡æ¨¡å¼
      </a></div></div><div class="nav-item"><div><a href="/algorithm-interview/note/01-å¿«é€Ÿä¸Šæ‰‹â€”â€”ä»0åˆ°1æŒæ¡ç®—æ³•é¢è¯•éœ€è¦çš„æ•°æ®ç»“æ„ï¼ˆä¸€ï¼‰.html" class="nav-link">
      </a></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ‹“å±•é˜…è¯»" class="dropdown-title"><span class="title">æ‹“å±•é˜…è¯»</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display: none;"><li class="dropdown-subitem"><div><a href="https://blog.poetries.top/browser-working-principle/guide/part1/lesson01.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        æµè§ˆå™¨åŸç†
        HTTPåŸºç¡€
      </div></a></div></li><li class="dropdown-subitem"><div><a href="/docs/webpack.html" class="nav-link">webpack
      </a></div></li><li class="dropdown-subitem"><div><a href="/docs/npm-script.html" class="nav-link">npmå·¥ä½œæµ
      </a></div></li><li class="dropdown-subitem"><div><a href="/docs/canvas.html" class="nav-link">Canvas
      </a></div></li><li class="dropdown-subitem"><div><a href="/docs/Taro.html" class="nav-link">TaroåŸç†
      </a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-nodejs-docs/nodejs-docs/base/01-ç¯å¢ƒæ­å»º.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        Nodeå­¦ä¹ æŒ‡å—
      </div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-vue-docs/vue-analysis/prepare/" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        Vueæºç åˆ†æ
      </div></a></div></li></ul></li><li class="dropdown-item"><h4>å…¶ä»–</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-blog-docs/blog-docs/javascript/-Ajaxæ€»ç»“ç¯‡.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        æ—¥å¸¸ç§¯ç´¯
      </div></a></div></li><li class="dropdown-subitem"><div><a href="http://blog.poetries.top/archives/" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        åšæ–‡
      </div></a></div></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->   <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/principle-docs/vue/01-ä»æºç è§£è¯»Vueç”Ÿå‘½å‘¨æœŸ.html" class="sidebar-link">ä»æºç è§£è¯»Vueç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="/principle-docs/vue/02-ç»„ä»¶çš„æœ¬è´¨.html" class="sidebar-link">ç»„ä»¶çš„æœ¬è´¨</a></li><li><a href="/principle-docs/vue/03-æœ‰çŠ¶æ€ç»„ä»¶çš„è®¾è®¡.html" class="sidebar-link">æœ‰çŠ¶æ€ç»„ä»¶çš„è®¾è®¡</a></li><li><a href="/principle-docs/vue/04-è®¾è®¡ VNode.html" class="sidebar-link">è®¾è®¡ VNode</a></li><li><a href="/principle-docs/vue/05-è¾…åŠ©åˆ›å»º VNode çš„ h å‡½æ•°.html" class="sidebar-link">è¾…åŠ©åˆ›å»º VNode çš„ h å‡½æ•°</a></li><li><a href="/principle-docs/vue/06-è‡ªå®šä¹‰æ¸²æŸ“å™¨å’Œå¼‚æ­¥æ¸²æŸ“.html" class="sidebar-link">è‡ªå®šä¹‰æ¸²æŸ“å™¨å’Œå¼‚æ­¥æ¸²æŸ“</a></li><li><a href="/principle-docs/vue/07-æ¸²æŸ“å™¨ä¹‹æŒ‚è½½.html" class="sidebar-link">æ¸²æŸ“å™¨ä¹‹æŒ‚è½½</a></li><li><a href="/principle-docs/vue/08-æ¸²æŸ“å™¨çš„æ ¸å¿ƒ Diff ç®—æ³•.html" class="sidebar-link">æ¸²æŸ“å™¨çš„æ ¸å¿ƒ Diff ç®—æ³•</a></li><li><a href="/principle-docs/vue/09-æ¸²æŸ“å™¨ä¹‹patch.html" class="sidebar-link">æ¸²æŸ“å™¨ä¹‹patch</a></li><li><a href="/principle-docs/vue/10-å›¾è§£ Vue å“åº”å¼åŸç†.html" class="sidebar-link">å›¾è§£ Vue å“åº”å¼åŸç†</a></li><li><a href="/principle-docs/vue/11-å›¾è§£ Vue å¼‚æ­¥æ›´æ–°.html" class="sidebar-link">å›¾è§£ Vue å¼‚æ­¥æ›´æ–°</a></li><li><a href="/principle-docs/vue/12-å‰–æ Vue å†…éƒ¨è¿è¡Œæœºåˆ¶.html" class="sidebar-link">å‰–æ Vue å†…éƒ¨è¿è¡Œæœºåˆ¶</a></li><li><a href="/principle-docs/vue/13-vueå“åº”å¼åŸç†æ¨¡æ‹Ÿ.html" class="sidebar-link">vueå“åº”å¼åŸç†æ¨¡æ‹Ÿ</a></li><li><a href="/principle-docs/vue/14-vueçŠ¶æ€ç®¡ç†ä¹‹vuex.html" class="sidebar-link">vueçŠ¶æ€ç®¡ç†ä¹‹vuex</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>React</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/principle-docs/react/01-React-routeråŸç†.html" class="sidebar-link">React</a></li><li><a href="/principle-docs/react/02-Dvaæ€»ç»“.html" class="active sidebar-link">Dvaæ€»ç»“</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#ä¸€ã€ç¯å¢ƒæ­å»º" class="sidebar-link">ä¸€ã€ç¯å¢ƒæ­å»º</a></li><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#äºŒã€åˆè¯†dva" class="sidebar-link">äºŒã€åˆè¯†Dva</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#_2-1-dvaçš„ç‰¹æ€§" class="sidebar-link">2.1 Dvaçš„ç‰¹æ€§</a></li><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#_2-2-dvaçš„äº”ä¸ªapi" class="sidebar-link">2.2 Dvaçš„äº”ä¸ªAPI</a></li><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#_2-3-dvaä¹ä¸ªæ¦‚å¿µ" class="sidebar-link">2.3 Dvaä¹ä¸ªæ¦‚å¿µ</a></li><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#_2-4-æ•´ä½“æ¶æ„" class="sidebar-link">2.4 æ•´ä½“æ¶æ„</a></li><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#_2-5-dvaå›¾è§£" class="sidebar-link">2.5 Dvaå›¾è§£</a></li></ul></li><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#ä¸‰ã€è®¡æ•°å™¨ä¾‹å­" class="sidebar-link">ä¸‰ã€è®¡æ•°å™¨ä¾‹å­</a></li><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#å››ã€dvaå®è·µ" class="sidebar-link">å››ã€Dvaå®è·µ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#_4-1-æŠ½ç¦»model" class="sidebar-link">4.1 æŠ½ç¦»Model</a></li><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#_4-2-è®¾è®¡ç»„ä»¶" class="sidebar-link">4.2 è®¾è®¡ç»„ä»¶</a></li><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#_4-3-æ·»åŠ reducer" class="sidebar-link">4.3 æ·»åŠ Reducer</a></li></ul></li><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#äº”ã€ä½¿ç”¨dvaæ¡†æ¶å’Œç›´æ¥ä½¿ç”¨reduxå†™æ³•çš„åŒºåˆ«" class="sidebar-link">äº”ã€ä½¿ç”¨dvaæ¡†æ¶å’Œç›´æ¥ä½¿ç”¨reduxå†™æ³•çš„åŒºåˆ«</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#_5-1-ä½¿ç”¨-redux" class="sidebar-link">5.1 ä½¿ç”¨ redux</a></li><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#_5-2-ä½¿ç”¨dva" class="sidebar-link">5.2 ä½¿ç”¨dva</a></li></ul></li><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#å…­ã€ä½¿ç”¨axiosç»Ÿä¸€å¤„ç†" class="sidebar-link">å…­ã€ä½¿ç”¨axiosç»Ÿä¸€å¤„ç†</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#_6-1-ç¤ºä¾‹ä»£ç " class="sidebar-link">6.1 ç¤ºä¾‹ä»£ç </a></li><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#_6-2-æ˜ç¡®å“åº”ä½“" class="sidebar-link">6.2 æ˜ç¡®å“åº”ä½“</a></li><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#_6-3-ä¾èµ–åŒ…åˆ†æ" class="sidebar-link">6.3 ä¾èµ–åŒ…åˆ†æ</a></li><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#_6-4-axios-å…¨å±€é…ç½®" class="sidebar-link">6.4 axios å…¨å±€é…ç½®</a></li><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#_6-5-åŠ è½½-nprogress-è¿‡æ¸¡ç»„ä»¶" class="sidebar-link">6.5 åŠ è½½ NProgress è¿‡æ¸¡ç»„ä»¶</a></li><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#_6-6-ç½‘ç»œè¯·æ±‚æˆåŠŸå¤„ç†" class="sidebar-link">6.6 ç½‘ç»œè¯·æ±‚æˆåŠŸå¤„ç†</a></li><li class="sidebar-sub-header"><a href="/principle-docs/react/02-Dvaæ€»ç»“.html#_6-7-ç½‘ç»œè¯·æ±‚å¤±è´¥å¤„ç†" class="sidebar-link">6.7 ç½‘ç»œè¯·æ±‚å¤±è´¥å¤„ç†</a></li></ul></li></ul></li><li><a href="/principle-docs/react/03-MobXæ€»ç»“.html" class="sidebar-link">MobXæ€»ç»“</a></li><li><a href="/principle-docs/react/04-æµ…æredux-sagaä¸­é—´ä»¶åŠç”¨æ³•.html" class="sidebar-link">æµ…æredux</a></li><li><a href="/principle-docs/react/05-Reduxä¹‹æµ…æä¸­é—´ä»¶.html" class="sidebar-link">Reduxä¹‹æµ…æä¸­é—´ä»¶</a></li><li><a href="/principle-docs/react/06-Reduxä¹‹æºç åˆ†æ.html" class="sidebar-link">Reduxä¹‹æºç åˆ†æ</a></li><li><a href="/principle-docs/react/07-Reduxä¹‹å¼‚æ­¥ActionåŠæ“ä½œ.html" class="sidebar-link">Reduxä¹‹å¼‚æ­¥ActionåŠæ“ä½œ</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Webpack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/principle-docs/webpack/01-Webpack4æ‰“åŒ…æœºåˆ¶åŸç†è§£æ.html" class="sidebar-link">Webpack4æ‰“åŒ…æœºåˆ¶åŸç†è§£æ</a></li><li><a href="/principle-docs/webpack/02-webpackä¸­çš„HMRçƒ­æ›´æ–°åŸç†å‰–æ.html" class="sidebar-link">webpackä¸­çš„HMRçƒ­æ›´æ–°åŸç†å‰–æ</a></li><li><a href="/principle-docs/webpack/03-ä»æºç çª¥æ¢Webpack4.xåŸç†.html" class="sidebar-link">ä»æºç çª¥æ¢Webpack4.xåŸç†</a></li><li><a href="/principle-docs/webpack/04-å®ç°webpackå°å‹æ‰“åŒ…å·¥å…·.html" class="sidebar-link">å®ç°webpackå°å‹æ‰“åŒ…å·¥å…·</a></li><li><a href="/principle-docs/webpack/05-BabelåŸç†åŠå…¶ä½¿ç”¨.html" class="sidebar-link">BabelåŸç†åŠå…¶ä½¿ç”¨</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ç»¼åˆ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/principle-docs/comprehensive/01-è™šæ‹ŸDOMåŸç†åˆ†æ.html" class="sidebar-link">è™šæ‹ŸDOMåŸç†åˆ†æ</a></li><li><a href="/principle-docs/comprehensive/02-setTimeoutå®ç°åŸç†å’Œä½¿ç”¨æ³¨æ„.html" class="sidebar-link">setTimeoutå®ç°åŸç†å’Œä½¿ç”¨æ³¨æ„</a></li><li><a href="/principle-docs/comprehensive/03-æµ…æPromiseåŸç†.html" class="sidebar-link">æµ…æPromiseåŸç†</a></li><li><a href="/principle-docs/comprehensive/04-æµè§ˆå™¨æ¸²æŸ“åŸç†.html" class="sidebar-link">æµè§ˆå™¨æ¸²æŸ“åŸç†</a></li><li><a href="/principle-docs/comprehensive/05-å‰ç«¯é¢è¯•ä¹‹MVVMæµ…æ.html" class="sidebar-link">å‰ç«¯é¢è¯•ä¹‹MVVMæµ…æ</a></li><li><a href="/principle-docs/comprehensive/06-å‰ç«¯é¢è¯•ä¹‹ç»„ä»¶åŒ–.html" class="sidebar-link">å‰ç«¯é¢è¯•ä¹‹ç»„ä»¶åŒ–</a></li><li><a href="/principle-docs/comprehensive/07-è™šæ‹ŸDOMï¼ˆä¸€ï¼‰.html" class="sidebar-link">è™šæ‹ŸDOMï¼ˆä¸€ï¼‰</a></li><li><a href="/principle-docs/comprehensive/08-è™šæ‹ŸDOMï¼ˆäºŒï¼‰.html" class="sidebar-link">è™šæ‹ŸDOMï¼ˆäºŒï¼‰</a></li><li><a href="/principle-docs/comprehensive/09-å‰ç«¯æ€§èƒ½ä¹‹Performance.html" class="sidebar-link">å‰ç«¯æ€§èƒ½ä¹‹Performance</a></li></ul></section></li></ul> </aside> <main class="page"> <div id="container" class="theme-default-content"><div class="content__default"><h2 id="ä¸€ã€ç¯å¢ƒæ­å»º"><a href="#ä¸€ã€ç¯å¢ƒæ­å»º" class="header-anchor">#</a> ä¸€ã€ç¯å¢ƒæ­å»º</h2> <div class="language- extra-class"><pre class="language-text"><code>$ npm install dva-cli -g

# åˆ›å»ºåº”ç”¨
$ dva new dva-quickstart

# å¯åŠ¨
$ npm start
</code></pre></div><blockquote><p>reacté¡¹ç›®çš„æ¨èç›®å½•ç»“æ„ï¼ˆå¦‚æœä½¿ç”¨dvaè„šæ‰‹æ¶åˆ›å»ºï¼Œåˆ™è‡ªåŠ¨ç”Ÿæˆå¦‚ä¸‹ï¼‰</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>|â”€â”€ /mock/             # æ•°æ®mockçš„æ¥å£æ–‡ä»¶
|â”€â”€ /src/              # é¡¹ç›®æºç ç›®å½•ï¼ˆæˆ‘ä»¬å¼€å‘çš„ä¸»è¦å·¥ä½œåŒºåŸŸï¼‰
|   |â”€â”€ /components/   # é¡¹ç›®ç»„ä»¶ï¼ˆç”¨äºè·¯ç”±ç»„ä»¶å†…å¼•ç”¨çš„å¯å¤ç”¨ç»„ä»¶ï¼‰
|   |â”€â”€ /routes/       # è·¯ç”±ç»„ä»¶ï¼ˆé¡µé¢ç»´åº¦ï¼‰
|   |  |â”€â”€ route1.js
|   |  |â”€â”€ route2.js   # æ ¹æ®router.jsä¸­çš„æ˜ å°„ï¼Œåœ¨ä¸åŒçš„urlä¸‹ï¼ŒæŒ‚è½½ä¸åŒçš„è·¯ç”±ç»„ä»¶
|   |  â””â”€â”€ route3.js
|   |â”€â”€ /models/       # æ•°æ®æ¨¡å‹ï¼ˆå¯ä»¥ç†è§£ä¸ºstoreï¼Œç”¨äºå­˜å‚¨æ•°æ®ä¸æ–¹æ³•ï¼‰
|   |  |â”€â”€ model1.js
|   |  |â”€â”€ model2.js   # é€‰æ‹©åˆ†ç¦»ä¸ºå¤šä¸ªmodelæ¨¡å‹ï¼Œæ˜¯æ ¹æ®ä¸šåŠ¡å®ä½“è¿›è¡Œåˆ’åˆ†
|   |  â””â”€â”€ model3.js
|   |â”€â”€ /services/     # æ•°æ®æ¥å£ï¼ˆå¤„ç†å‰å°é¡µé¢çš„ajaxè¯·æ±‚ï¼Œè½¬å‘åˆ°åå°ï¼‰
|   |â”€â”€ /utils/        # å·¥å…·å‡½æ•°ï¼ˆå·¥å…·åº“ï¼Œå­˜å‚¨é€šç”¨å‡½æ•°ä¸é…ç½®å‚æ•°ï¼‰
|   |â”€â”€ router.js       # è·¯ç”±é…ç½®ï¼ˆå®šä¹‰è·¯ç”±ä¸å¯¹åº”çš„è·¯ç”±ç»„ä»¶ï¼‰
|   |â”€â”€ index.js       # å…¥å£æ–‡ä»¶
|   |â”€â”€ index.less
|   â””â”€â”€ index.html
|â”€â”€ package.json       # é¡¹ç›®ä¿¡æ¯
â””â”€â”€ proxy.config.js    # æ•°æ®mocké…ç½®
</code></pre></div><p><strong>ä½¿ç”¨ antd</strong></p> <div class="language- extra-class"><pre class="language-text"><code>npm i babel-plugin-import --save
</code></pre></div><blockquote><p><code>babel-plugin-import</code> æ˜¯ç”¨æ¥æŒ‰éœ€åŠ è½½ <code>antd</code> çš„è„šæœ¬å’Œæ ·å¼çš„</p></blockquote> <ul><li>ç¼–è¾‘ <code>.webpackrc</code>ï¼Œä½¿ <code>babel-plugin-import</code> æ’ä»¶ç”Ÿæ•ˆ</li></ul> <div class="language- extra-class"><pre class="language-text"><code>{
+  &quot;extraBabelPlugins&quot;: [
+    [&quot;import&quot;, { &quot;libraryName&quot;: &quot;antd&quot;, &quot;libraryDirectory&quot;: &quot;es&quot;, &quot;style&quot;: &quot;css&quot; }]
+  ]
}
</code></pre></div><h2 id="äºŒã€åˆè¯†dva"><a href="#äºŒã€åˆè¯†dva" class="header-anchor">#</a> äºŒã€åˆè¯†Dva</h2> <h3 id="_2-1-dvaçš„ç‰¹æ€§"><a href="#_2-1-dvaçš„ç‰¹æ€§" class="header-anchor">#</a> 2.1 Dvaçš„ç‰¹æ€§</h3> <div class="language- extra-class"><pre class="language-text"><code>dva = React-Router + Redux + Redux-saga
</code></pre></div><ul><li>ä»…æœ‰ 5 ä¸ª<code>API</code>ï¼Œä»…æœ‰5ä¸ªä¸»è¦çš„<code>api</code></li> <li>æ”¯æŒ <code>HMR</code>ï¼Œæ”¯æŒæ¨¡å—çš„çƒ­æ›´æ–°</li> <li>æ”¯æŒ <code>SSR (ServerSideRender)</code>ï¼Œæ”¯æŒæœåŠ¡å™¨ç«¯æ¸²æŸ“</li> <li>æ”¯æŒ <code>Mobile/ReactNative</code>ï¼Œæ”¯æŒç§»åŠ¨æ‰‹æœºç«¯çš„ä»£ç ç¼–å†™</li> <li>æ”¯æŒ<code>TypeScript</code></li> <li>æ”¯æŒè·¯ç”±å’Œ <code>Model</code> çš„åŠ¨æ€åŠ è½½</li></ul> <h3 id="_2-2-dvaçš„äº”ä¸ªapi"><a href="#_2-2-dvaçš„äº”ä¸ªapi" class="header-anchor">#</a> 2.2 Dvaçš„äº”ä¸ªAPI</h3> <p><img src="https://poetries1.gitee.io/img-repo/20191001/43.png" alt="img"></p> <h4 id="_2-2-1-app-dva-opts"><a href="#_2-2-1-app-dva-opts" class="header-anchor">#</a> 2.2.1 app = dva(Opts)</h4> <blockquote><p><code>app = dva(Opts)</code>ï¼šåˆ›å»ºåº”ç”¨ï¼Œè¿”å› <code>dva</code> å®ä¾‹ã€‚(æ³¨ï¼šdva æ”¯æŒå¤šå®ä¾‹)**</p></blockquote> <p>åœ¨<code>opts</code>å¯ä»¥é…ç½®æ‰€æœ‰çš„<code>hooks</code></p> <div class="language- extra-class"><pre class="language-text"><code>const app = dva({
     history,
     initialState,
     onError,
     onAction,
     onStateChange,
     onReducer,
     onEffect,
     onHmr,
     extraReducers,
     extraEnhancers,
});
</code></pre></div><blockquote><p>hooksåŒ…å«å¦‚ä¸‹é…ç½®é¡¹</p></blockquote> <p>1ã€ <code>onError((err, dispatch) =&gt; {})</code></p> <ul><li><code>effect</code> æ‰§è¡Œé”™è¯¯æˆ– <code>subscription</code> é€šè¿‡<code>done</code> ä¸»åŠ¨æŠ›é”™æ—¶è§¦å‘ï¼Œå¯ç”¨äºç®¡ç†å…¨å±€å‡ºé”™çŠ¶æ€</li> <li>æ³¨æ„ï¼š<code>subscription</code> å¹¶æ²¡æœ‰åŠ  <code>try...catch</code>ï¼Œæ‰€ä»¥æœ‰é”™è¯¯æ—¶éœ€é€šè¿‡ç¬¬äºŒä¸ªå‚æ•° <code>done</code> ä¸»åŠ¨æŠ›é”™</li></ul> <div class="language- extra-class"><pre class="language-text"><code>app.model({
  subscriptions: {
    setup({ dispatch }, done) {
      done(e)
    },
  },
})
</code></pre></div><p>2ã€ <code>onAction(fn | fn[])</code></p> <blockquote><p>åœ¨<code>action</code>è¢«<code>dispatch</code>æ—¶è§¦å‘ï¼Œç”¨äºæ³¨å†Œ <code>redux</code> ä¸­é—´ä»¶ã€‚æ”¯æŒå‡½æ•°æˆ–å‡½æ•°æ•°ç»„æ ¼å¼</p></blockquote> <ul><li>ä¾‹å¦‚æˆ‘ä»¬è¦é€šè¿‡ <code>redux-logger</code> æ‰“å°æ—¥å¿—</li></ul> <div class="language- extra-class"><pre class="language-text"><code>import createLogger from 'redux-logger';
const app = dva({
  onAction: createLogger(opts),
})
</code></pre></div><p>3ã€ <code>onStateChange(fn)</code></p> <blockquote><p><code>state</code> æ”¹å˜æ—¶è§¦å‘ï¼Œå¯ç”¨äºåŒæ­¥ state åˆ° <code>localStorage</code>ï¼ŒæœåŠ¡å™¨ç«¯ç­‰</p></blockquote> <p>4ã€ <code>onReducer(fn)</code></p> <blockquote><p>å°è£… <code>reducer</code> æ‰§è¡Œï¼Œæ¯”å¦‚å€ŸåŠ© <code>redux-undo</code> å®ç° <code>redo/undo</code></p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>import undoable from 'redux-undo';
const app = dva({
  onReducer: reducer =&gt; {
    return (state, action) =&gt; {
      const undoOpts = {};
      const newState = undoable(reducer, undoOpts)(state, action);
      // ç”±äº dva åŒæ­¥äº† routing æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦æŠŠè¿™éƒ¨åˆ†è¿˜åŸ
      return { ...newState, routing: newState.present.routing };
    },
  },
})
</code></pre></div><p>5ã€ <code>onEffect(fn)</code></p> <blockquote><p>å°è£… <code>effect</code> æ‰§è¡Œã€‚æ¯”å¦‚ <code>dva-loading</code> åŸºäºæ­¤å®ç°äº†è‡ªåŠ¨å¤„ç† <code>loading</code> çŠ¶æ€</p></blockquote> <p>6ã€ <code>onHmr(fn)</code></p> <blockquote><p>çƒ­æ›¿æ¢ç›¸å…³ï¼Œç›®å‰ç”¨äº <code>babel-plugin-dva-hmr</code></p></blockquote> <p>7ã€ <code>extraReducers</code></p> <blockquote><p>æŒ‡å®šé¢å¤–çš„ <code>reducer</code>ï¼Œæ¯”å¦‚ <code>redux-form</code> éœ€è¦æŒ‡å®šé¢å¤–çš„ <code>form reducer</code></p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>import { reducer as formReducer } from 'redux-form'
const app = dva({
  extraReducers: {
    form: formReducer,
  },
})
</code></pre></div><blockquote><p>è¿™é‡Œæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ï¼Œ<code>history</code>çš„é…ç½®ï¼Œä¸€èˆ¬é»˜è®¤çš„æ˜¯<code>hashHistory</code>ï¼Œå¦‚æœè¦é…ç½® <code>history</code>ä¸º <code>browserHistory</code>ï¼Œå¯ä»¥è¿™æ ·</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>import createHistory from 'history/createBrowserHistory';
const app = dva({
  history: createHistory(),
});
</code></pre></div><blockquote><div class="language- extra-class"><pre class="language-text"><code>initialState`ï¼šæŒ‡å®šåˆå§‹æ•°æ®ï¼Œä¼˜å…ˆçº§é«˜äº `model` ä¸­çš„ `state`ï¼Œé»˜è®¤æ˜¯ `{}`ï¼Œä½†æ˜¯åŸºæœ¬ä¸Šéƒ½åœ¨`modal`é‡Œé¢è®¾ç½®ç›¸åº”çš„`state
</code></pre></div></blockquote> <h4 id="_2-2-2-app-use-hooks"><a href="#_2-2-2-app-use-hooks" class="header-anchor">#</a> 2.2.2 app.use(Hooks)</h4> <blockquote><p>app.use(Hooks)ï¼šé…ç½® hooks æˆ–è€…æ³¨å†Œæ’ä»¶</p></blockquote> <p>è¿™é‡Œæœ€å¸¸è§çš„å°±æ˜¯<code>dva-loading</code>æ’ä»¶çš„é…ç½®</p> <div class="language- extra-class"><pre class="language-text"><code>import createLoading from 'dva-loading';
...
app.use(createLoading(opts));
</code></pre></div><blockquote><p>ä½†æ˜¯ä¸€èˆ¬å¯¹äºå…¨å±€çš„<code>loading</code>æˆ‘ä»¬ä¼šæ ¹æ®ä¸šåŠ¡çš„ä¸åŒæ¥æ˜¾ç¤ºç›¸åº”ä¸åŒçš„<code>loading</code>å›¾æ ‡ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦æ¥é€‰æ‹©æ³¨å†Œç›¸åº”çš„æ’ä»¶</p></blockquote> <h4 id="_2-2-3-app-model-modelobject"><a href="#_2-2-3-app-model-modelobject" class="header-anchor">#</a> 2.2.3 app.model(ModelObject)</h4> <blockquote><p><code>app.model(ModelObject)</code>ï¼šè¿™ä¸ªæ˜¯ä½ æ•°æ®é€»è¾‘å¤„ç†ï¼Œæ•°æ®æµåŠ¨çš„åœ°æ–¹</p></blockquote> <p><img src="https://poetries1.gitee.io/img-repo/20191001/44.png" alt="img"></p> <h4 id="_2-2-4-app-unmodel-namespace"><a href="#_2-2-4-app-unmodel-namespace" class="header-anchor">#</a> 2.2.4 app.unmodel(namespace)</h4> <blockquote><p>å–æ¶ˆ <code>model</code> æ³¨å†Œï¼Œæ¸…ç† <code>reducers</code>,<code>effects</code> å’Œ <code>subscriptions</code>ã€‚<code>subscription</code> å¦‚æœæ²¡æœ‰è¿”å› <code>unlisten</code> å‡½æ•°ï¼Œä½¿ç”¨ <code>app.unmodel</code> ä¼šç»™äºˆè­¦å‘Š</p></blockquote> <h4 id="_2-2-5-app-router-function"><a href="#_2-2-5-app-router-function" class="header-anchor">#</a> 2.2.5 app.router(Function)</h4> <blockquote><p>æ³¨å†Œè·¯ç”±è¡¨ï¼Œè¿™ä¸€æ“ä½œæ­¥éª¤åœ¨dvaä¸­ä¹Ÿå¾ˆé‡è¦</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>// æ³¨å†Œè·¯ç”±
app.router(require('./router'))


// è·¯ç”±æ–‡ä»¶
import { Router, Route } from 'dva/router';
import IndexPage from './routes/IndexPage'
import TodoList from './routes/TodoList'

function RouterConfig({ history }) {
  return (
    &lt;Router history={history}&gt;
        &lt;Route path=&quot;/&quot; component={IndexPage} /&gt;
        &lt;Route path='/todoList' components={TodoList}/&gt;
    &lt;/Router&gt;
  )
}
export default RouterConfig
</code></pre></div><blockquote><p>å¦‚æœæˆ‘ä»¬æƒ³è§£å†³ç»„ä»¶åŠ¨æ€åŠ è½½é—®é¢˜ï¼Œæˆ‘ä»¬çš„è·¯ç”±æ–‡ä»¶ä¹Ÿå¯ä»¥æŒ‰ç…§ä¸‹é¢çš„å†™æ³•æ¥å†™</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>import { Router, Switch, Route } from 'dva/router'
import dynamic from 'dva/dynamic'

function RouterConfig({ history, app }) {
  const IndexPage = dynamic({
    app,
    component: () =&gt; import('./routes/IndexPage'),
  })

  const Users = dynamic({
    app,
    models: () =&gt; [import('./models/users')],
    component: () =&gt; import('./routes/Users'),
  })

  return (
    &lt;Router history={history}&gt;
      &lt;Switch&gt;
        &lt;Route exact path=&quot;/&quot; component={IndexPage} /&gt;
        &lt;Route exact path=&quot;/users&quot; component={Users} /&gt;
      &lt;/Switch&gt;
    &lt;/Router&gt;
  )
}

export default RouterConfig
</code></pre></div><blockquote><p>å…¶ä¸­<code>dynamic(opts)</code> ä¸­<code>opt</code>åŒ…å«ä¸‰ä¸ªé…ç½®é¡¹ï¼š</p></blockquote> <ul><li><code>app</code>: <code>dva</code> å®ä¾‹ï¼ŒåŠ è½½ <code>models</code> æ—¶éœ€è¦</li> <li><code>models</code>: è¿”å› <code>Promise</code> æ•°ç»„çš„å‡½æ•°ï¼Œ<code>Promise</code>è¿”å› dva model`</li> <li><code>component</code>ï¼šè¿”å› <code>Promise</code>çš„å‡½æ•°ï¼Œ<code>Promise</code>è¿”å› <code>React Component</code></li></ul> <h4 id="_2-2-6-app-start"><a href="#_2-2-6-app-start" class="header-anchor">#</a> 2.2.6 app.start</h4> <blockquote><p>å¯åŠ¨åº”ç”¨ï¼Œå³å°†æˆ‘ä»¬çš„åº”ç”¨è·‘èµ·æ¥</p></blockquote> <h3 id="_2-3-dvaä¹ä¸ªæ¦‚å¿µ"><a href="#_2-3-dvaä¹ä¸ªæ¦‚å¿µ" class="header-anchor">#</a> 2.3 Dvaä¹ä¸ªæ¦‚å¿µ</h3> <h4 id="_2-3-1-state"><a href="#_2-3-1-state" class="header-anchor">#</a> 2.3.1 State</h4> <blockquote><p>åˆå§‹å€¼ï¼Œæˆ‘ä»¬åœ¨ <code>dva()</code> åˆå§‹åŒ–çš„æ—¶å€™å’Œåœ¨ modal é‡Œé¢çš„ <code>state</code> å¯¹å…¶ä¸¤å¤„è¿›è¡Œå®šä¹‰ï¼Œå…¶ä¸­ modal ä¸­çš„ä¼˜å…ˆçº§ä½äºä¼ ç»™ <code>dva()</code> çš„ <code>opts.initialState</code></p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>// dva()åˆå§‹åŒ–
const app = dva({
  initialState: { count: 1 },
});

// modal()å®šä¹‰äº‹ä»¶
app.model({
  namespace: 'count',
  state: 0,
});
</code></pre></div><h4 id="_2-3-2-action"><a href="#_2-3-2-action" class="header-anchor">#</a> 2.3.2 Action</h4> <blockquote><p>è¡¨ç¤ºæ“ä½œäº‹ä»¶ï¼Œå¯ä»¥æ˜¯åŒæ­¥ï¼Œä¹Ÿå¯ä»¥æ˜¯å¼‚æ­¥</p></blockquote> <ul><li><code>action</code> çš„æ ¼å¼å¦‚ä¸‹ï¼Œå®ƒéœ€è¦æœ‰ä¸€ä¸ª <code>type</code>ï¼Œè¡¨ç¤ºè¿™ä¸ª <code>action</code> è¦è§¦å‘ä»€ä¹ˆæ“ä½œï¼›<code>payload</code> åˆ™è¡¨ç¤ºè¿™ä¸ª <code>action</code> å°†è¦ä¼ é€’çš„æ•°æ®</li></ul> <div class="language- extra-class"><pre class="language-text"><code>{
  type: String,
  payload: data,
}
</code></pre></div><blockquote><p>æˆ‘ä»¬é€šè¿‡ dispatch æ–¹æ³•æ¥å‘é€ä¸€ä¸ª action</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>dispatch({ type: 'todos/add', payload: 'Learn Dva' });
</code></pre></div><blockquote><p>å…¶å®æˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸ªAction åˆ›å»ºå‡½æ•°ï¼Œå¦‚ä¸‹</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>function addTodo(text) {
  return {
    type: ADD_TODO,
    text
  }
}

//æˆ‘ä»¬ç›´æ¥dispatch(addTodo()),å°±å‘é€äº†ä¸€ä¸ªactionã€‚
dispatch(addTodo())
</code></pre></div><h4 id="_2-3-3-model"><a href="#_2-3-3-model" class="header-anchor">#</a> 2.3.3 Model</h4> <blockquote><p><code>model</code> æ˜¯ <code>dva</code> ä¸­æœ€é‡è¦çš„æ¦‚å¿µï¼Œ<code>Model</code> é <code>MVC</code> ä¸­çš„ <code>M</code>ï¼Œè€Œæ˜¯é¢†åŸŸæ¨¡å‹ï¼Œç”¨äºæŠŠæ•°æ®ç›¸å…³çš„é€»è¾‘èšåˆåˆ°ä¸€èµ·ï¼Œå‡ ä¹æ‰€æœ‰çš„æ•°æ®ï¼Œé€»è¾‘éƒ½åœ¨è¿™è¾¹è¿›è¡Œå¤„ç†åˆ†å‘</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>import queryString from 'query-string'
import * as todoService from '../services/todo'

export default {
  namespace: 'todo',
  state: {
    list: []
  },
  reducers: {
    save(state, { payload: { list } }) {
      return { ...state, list }
    }
  },
  effects: {
    *addTodo({ payload: value }, { call, put, select }) {
      // æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚
      const data = yield call(todoService.query, value)
      console.log(data)
      let tempList = yield select(state =&gt; state.todo.list)
      let list = []
      list = list.concat(tempList)
      const tempObj = {}
      tempObj.title = value
      tempObj.id = list.length
      tempObj.finished = false
      list.push(tempObj)
      yield put({ type: 'save', payload: { list }})
    },
    *toggle({ payload: index }, { call, put, select }) {
      // æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚
      const data = yield call(todoService.query, index)
      let tempList = yield select(state =&gt; state.todo.list)
      let list = []
      list = list.concat(tempList)
      let obj = list[index]
      obj.finished = !obj.finished
      yield put({ type: 'save', payload: { list } })
    },
    *delete({ payload: index }, { call, put, select }) {
      const data = yield call(todoService.query, index)
      let tempList = yield select(state =&gt; state.todo.list)
      let list = []
      list = list.concat(tempList)
      list.splice(index, 1)
      yield put({ type: 'save', payload: { list } })
    },
    *modify({ payload: { value, index } }, { call, put, select }) {
      const data = yield call(todoService.query, value)
      let tempList = yield select(state =&gt; state.todo.list)
      let list = []
      list = list.concat(tempList)
      let obj = list[index]
      obj.title = value
      yield put({ type: 'save', payload: { list } })
    }
  },
  subscriptions: {
    setup({ dispatch, history }) {
      // ç›‘å¬è·¯ç”±çš„å˜åŒ–ï¼Œè¯·æ±‚é¡µé¢æ•°æ®
      return history.listen(({ pathname, search }) =&gt; {
        const query = queryString.parse(search)
        let list = []
        if (pathname === 'todoList') {
          dispatch({ type: 'save', payload: {list} })
        }
      })
    }
  }
}
</code></pre></div><blockquote><p><code>model</code>å¯¹è±¡ä¸­åŒ…å«5ä¸ªé‡è¦çš„å±æ€§</p></blockquote> <p><strong>state</strong></p> <blockquote><p>è¿™é‡Œçš„ state è·Ÿæˆ‘ä»¬åˆšåˆšè®²çš„ state çš„æ¦‚å¿µæ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡å¥¹çš„ä¼˜å…ˆçº§æ¯”åˆå§‹åŒ–çš„ä½ï¼Œä½†æ˜¯åŸºæœ¬ä¸Šé¡¹ç›®ä¸­çš„ state éƒ½æ˜¯åœ¨è¿™é‡Œå®šä¹‰çš„</p></blockquote> <p><strong>namespace</strong></p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>model` çš„å‘½åç©ºé—´ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä»–åœ¨å…¨å±€ `state` ä¸Šçš„å±æ€§ï¼Œåªèƒ½ç”¨å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å‘é€åœ¨å‘é€ `action` åˆ°ç›¸åº”çš„ `reducer` æ—¶ï¼Œå°±ä¼šéœ€è¦ç”¨åˆ° `namespace
</code></pre></div></blockquote> <p><strong>Reducer</strong></p> <blockquote><p>ä»¥<code>key/value</code> æ ¼å¼å®šä¹‰ <code>reducer</code>ï¼Œç”¨äºå¤„ç†åŒæ­¥æ“ä½œï¼Œå”¯ä¸€å¯ä»¥ä¿®æ”¹ <code>state</code> çš„åœ°æ–¹ã€‚ç”± <code>action</code> è§¦å‘ã€‚å…¶å®ä¸€ä¸ªçº¯å‡½æ•°</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>namespace: 'todo',
  state: {
    list: []
  },
  // reducers å†™æ³•
  reducers: {
    save(state, { payload: { list } }) {
      return { ...state, list }
    }
 }
</code></pre></div><p><strong>Effect</strong></p> <blockquote><p>ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œå’Œä¸šåŠ¡é€»è¾‘ï¼Œä¸ç›´æ¥ä¿®æ”¹ <code>state</code>ï¼Œç®€å•çš„æ¥è¯´ï¼Œå°±æ˜¯è·å–ä»æœåŠ¡ç«¯è·å–æ•°æ®ï¼Œå¹¶ä¸”å‘èµ·ä¸€ä¸ª <code>action</code>äº¤ç»™<code>reducer</code> çš„åœ°æ–¹</p></blockquote> <p>å…¶ä¸­å®ƒç”¨åˆ°äº†<code>redux-saga</code>ï¼Œé‡Œé¢æœ‰å‡ ä¸ªå¸¸ç”¨çš„å‡½æ•°ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>// effects å†™æ³•
effects: {
    *addTodo({ payload: value }, { call, put, select }) {
      // æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚
      const data = yield call(todoService.query, value)
      console.log(data)
      let tempList = yield select(state =&gt; state.todo.list)
      let list = []
      list = list.concat(tempList)
      const tempObj = {}
      tempObj.title = value
      tempObj.id = list.length
      tempObj.finished = false
      list.push(tempObj)
      yield put({ type: 'save', payload: { list }})
    },
    *toggle({ payload: index }, { call, put, select }) {
      // æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚
      const data = yield call(todoService.query, index)
      let tempList = yield select(state =&gt; state.todo.list)
      let list = []
      list = list.concat(tempList)
      let obj = list[index]
      obj.finished = !obj.finished
      yield put({ type: 'save', payload: { list } })
    },
    *delete({ payload: index }, { call, put, select }) {
      const data = yield call(todoService.query, index)
      let tempList = yield select(state =&gt; state.todo.list)
      let list = []
      list = list.concat(tempList)
      list.splice(index, 1)
      yield put({ type: 'save', payload: { list } })
    },
    *modify({ payload: { value, index } }, { call, put, select }) {
      const data = yield call(todoService.query, value)
      let tempList = yield select(state =&gt; state.todo.list)
      let list = []
      list = list.concat(tempList)
      let obj = list[index]
      obj.title = value
      yield put({ type: 'save', payload: { list } })
    }
}
</code></pre></div><p><img src="https://upload-images.jianshu.io/upload_images/1505342-9ecb8ba2d8fd3ec2.png" alt="img"></p> <blockquote><p>åœ¨é¡¹ç›®ä¸­æœ€ä¸»è¦çš„ä¼šç”¨åˆ°çš„æ˜¯ <code>put</code> ä¸ <code>call</code></p></blockquote> <p><strong>Subscription</strong></p> <blockquote><ul><li>ä»¥ <code>key/value</code> æ ¼å¼å®šä¹‰ <code>subscription</code>ï¼Œ<code>subscription</code> æ˜¯è®¢é˜…ï¼Œç”¨äºè®¢é˜…ä¸€ä¸ªæ•°æ®æºï¼Œç„¶åæ ¹æ®éœ€è¦ dispatch ç›¸åº”çš„ action</li> <li><code>subscription</code> æ˜¯è®¢é˜…ï¼Œç”¨äºè®¢é˜…ä¸€ä¸ªæ•°æ®æºï¼Œç„¶åæ ¹æ®éœ€è¦ <code>dispatch</code> ç›¸åº”çš„<code>action</code>ã€‚åœ¨ <code>app.start()</code> æ—¶è¢«æ‰§è¡Œï¼Œæ•°æ®æºå¯ä»¥æ˜¯å½“å‰çš„æ—¶é—´ã€å½“å‰é¡µé¢çš„<code>url</code>ã€æœåŠ¡å™¨çš„ <code>websocket</code> è¿æ¥ã€<code>history</code>è·¯ç”±å˜åŒ–ç­‰ç­‰ã€‚</li></ul></blockquote> <ul><li><strong>æ³¨æ„</strong>ï¼šå¦‚æœè¦ä½¿ç”¨ <code>app.unmodel()</code>ï¼Œ<code>subscription</code> å¿…é¡»è¿”å› <code>unlisten</code> æ–¹æ³•ï¼Œç”¨äºå–æ¶ˆæ•°æ®è®¢é˜…</li></ul> <div class="language- extra-class"><pre class="language-text"><code>// subscriptions å†™æ³•
subscriptions: {
    setup({ dispatch, history }) {
      // ç›‘å¬è·¯ç”±çš„å˜åŒ–ï¼Œè¯·æ±‚é¡µé¢æ•°æ®
      return history.listen(({ pathname, search }) =&gt; {
        const query = queryString.parse(search)
        let list = []
        if (pathname === 'todoList') {
          dispatch({ type: 'save', payload: {list} })
        }
      })
    }
  }
</code></pre></div><h4 id="_2-3-4-router"><a href="#_2-3-4-router" class="header-anchor">#</a> 2.3.4 Router</h4> <blockquote><div class="language- extra-class"><pre class="language-text"><code>Router` è¡¨ç¤ºè·¯ç”±é…ç½®ä¿¡æ¯ï¼Œé¡¹ç›®ä¸­çš„ `router.js
</code></pre></div></blockquote> <div class="language- extra-class"><pre class="language-text"><code>export default function({ history }){
  return(
    &lt;Router history={history}&gt;
      &lt;Route path=&quot;/&quot; component={App} /&gt;
    &lt;/Router&gt;
  );
}
</code></pre></div><p><strong>RouteComponent</strong></p> <blockquote><p><code>RouteComponent</code> è¡¨ç¤º<code>Router</code> é‡ŒåŒ¹é…è·¯å¾„çš„ <code>Component</code>ï¼Œé€šå¸¸ä¼šç»‘å®š<code>model</code>çš„æ•°æ®ã€‚å¦‚ä¸‹:</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>import { connect } from 'dva';

function App() {
  return &lt;div&gt;App&lt;/div&gt;;
}

function mapStateToProps(state) {
  return { todos: state.todos };
}

export default connect(mapStateToProps)(App);
</code></pre></div><h3 id="_2-4-æ•´ä½“æ¶æ„"><a href="#_2-4-æ•´ä½“æ¶æ„" class="header-anchor">#</a> 2.4 æ•´ä½“æ¶æ„</h3> <p><img src="https://poetries1.gitee.io/img-repo/20191001/45.png" alt="img"></p> <ul><li>é¦–å…ˆæˆ‘ä»¬æ ¹æ® <code>url</code> è®¿é—®ç›¸å…³çš„ <code>Route-Component</code>ï¼Œåœ¨ç»„ä»¶ä¸­æˆ‘ä»¬é€šè¿‡ <code>dispatch</code>å‘é€ <code>action</code> åˆ° <code>model</code> é‡Œé¢çš„ <code>effect</code> æˆ–è€…ç›´æ¥ <code>Reducer</code></li> <li>å½“æˆ‘ä»¬å°†<code>action</code>å‘é€ç»™<code>Effect</code>ï¼ŒåŸºæœ¬ä¸Šæ˜¯å–æœåŠ¡å™¨ä¸Šé¢è¯·æ±‚æ•°æ®çš„ï¼ŒæœåŠ¡å™¨è¿”å›æ•°æ®ä¹‹åï¼Œ<code>effect</code> ä¼šå‘é€ç›¸åº”çš„ <code>action</code>ç»™ <code>reducer</code>ï¼Œç”±å”¯ä¸€èƒ½æ”¹å˜ <code>state</code>çš„ <code>reducer</code> æ”¹å˜ <code>state</code> ï¼Œç„¶åé€šè¿‡<code>connect</code>é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚</li> <li>å½“æˆ‘ä»¬å°†<code>action</code>å‘é€ç»™<code>reducer</code>ï¼Œé‚£ç›´æ¥ç”± <code>reducer</code> æ”¹å˜ <code>state</code>ï¼Œç„¶åé€šè¿‡<code>connect</code>é‡æ–°æ¸²æŸ“ç»„ä»¶</li></ul> <h3 id="_2-5-dvaå›¾è§£"><a href="#_2-5-dvaå›¾è§£" class="header-anchor">#</a> 2.5 Dvaå›¾è§£</h3> <p><strong>å›¾è§£ä¸€ï¼šåŠ å…¥Saga</strong></p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>React` åªè´Ÿè´£é¡µé¢æ¸²æŸ“, è€Œä¸è´Ÿè´£é¡µé¢é€»è¾‘, é¡µé¢é€»è¾‘å¯ä»¥ä»ä¸­å•ç‹¬æŠ½å–å‡ºæ¥, å˜æˆ `store
</code></pre></div></blockquote> <p><img src="https://poetries1.gitee.io/img-repo/20191001/46.png" alt="img"></p> <blockquote><p>ä½¿ç”¨ <code>Middleware</code> æ‹¦æˆª <code>action</code>, è¿™æ ·ä¸€æ¥å¼‚æ­¥çš„ç½‘ç»œæ“ä½œä¹Ÿå°±å¾ˆæ–¹ä¾¿äº†, åšæˆä¸€ä¸ª <code>Middleware</code>å°±è¡Œäº†, è¿™é‡Œä½¿ç”¨<code>redux-saga</code> è¿™ä¸ªç±»åº“</p></blockquote> <ul><li>ç‚¹å‡»åˆ›å»º <code>Todo</code>çš„æŒ‰é’®, å‘èµ·ä¸€ä¸ª <code>type == addTodo</code> çš„ <code>action</code></li> <li><code>saga</code> æ‹¦æˆªè¿™ä¸ª <code>action</code>, å‘èµ· <code>http</code> è¯·æ±‚, å¦‚æœè¯·æ±‚æˆåŠŸ, åˆ™ç»§ç»­å‘ <code>reducer</code> å‘ä¸€ä¸ª <code>type == addTodoSucc</code> çš„ <code>action</code>, æç¤ºåˆ›å»ºæˆåŠŸ, åä¹‹åˆ™å‘é€ <code>type == addTodoFail</code> çš„<code>action</code> å³å¯</li></ul> <p><strong>å›¾è§£äºŒï¼šDvaè¡¨ç¤ºæ³•</strong></p> <p><img src="https://poetries1.gitee.io/img-repo/20191001/47.png" alt="img"></p> <blockquote><p>dvaåšäº† 3 ä»¶å¾ˆé‡è¦çš„äº‹æƒ…</p></blockquote> <ul><li>æŠŠ <code>store</code>åŠ <code>saga</code> ç»Ÿä¸€ä¸ºä¸€ä¸ª <code>model</code> çš„æ¦‚å¿µ, å†™åœ¨ä¸€ä¸ª js æ–‡ä»¶é‡Œé¢</li> <li>å¢åŠ äº†ä¸€ä¸ª <code>Subscriptions</code>, ç”¨äºæ”¶é›†å…¶ä»–æ¥æºçš„ <code>action</code>, eg: é”®ç›˜æ“ä½œ</li> <li><code>model</code> å†™æ³•å¾ˆç®€çº¦, ç±»ä¼¼äº <code>DSL</code> æˆ–è€… <code>RoR</code></li></ul> <h2 id="ä¸‰ã€è®¡æ•°å™¨ä¾‹å­"><a href="#ä¸‰ã€è®¡æ•°å™¨ä¾‹å­" class="header-anchor">#</a> ä¸‰ã€è®¡æ•°å™¨ä¾‹å­</h2> <div class="language- extra-class"><pre class="language-text"><code>$ dva new myapp
</code></pre></div><p><strong>ç›®å½•ç»“æ„ä»‹ç»</strong></p> <div class="language- extra-class"><pre class="language-text"><code>.
â”œâ”€â”€ mock    // mockæ•°æ®æ–‡ä»¶å¤¹
â”œâ”€â”€ node_modules // ç¬¬ä¸‰æ–¹çš„ä¾èµ–
â”œâ”€â”€ public  // å­˜æ”¾å…¬å…±publicæ–‡ä»¶çš„æ–‡ä»¶å¤¹
â”œâ”€â”€ src  // æœ€é‡è¦çš„æ–‡ä»¶å¤¹ï¼Œç¼–å†™ä»£ç éƒ½åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹
â”‚   â”œâ”€â”€ assets // å¯ä»¥æ”¾å›¾ç‰‡ç­‰å…¬å…±èµ„æº
â”‚   â”œâ”€â”€ components // å°±æ˜¯reactä¸­çš„æœ¨å¶ç»„ä»¶
â”‚   â”œâ”€â”€ models // dvaæœ€é‡è¦çš„æ–‡ä»¶å¤¹ï¼Œæ‰€æœ‰çš„æ•°æ®äº¤äº’åŠé€»è¾‘éƒ½å†™åœ¨è¿™é‡Œ
â”‚   â”œâ”€â”€ routes // å°±æ˜¯reactä¸­çš„æ™ºèƒ½ç»„ä»¶ï¼Œä¸è¦è¢«æ–‡ä»¶å¤¹åå­—è¯¯å¯¼ã€‚
â”‚   â”œâ”€â”€ services // æ”¾è¯·æ±‚å€Ÿå£æ–¹æ³•çš„æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ utils // è‡ªå·±çš„å·¥å…·æ–¹æ³•å¯ä»¥æ”¾åœ¨è¿™è¾¹
â”‚   â”œâ”€â”€ index.css // å…¥å£æ–‡ä»¶æ ·å¼
â”‚   â”œâ”€â”€ index.ejs // ejsæ¨¡æ¿å¼•æ“
â”‚   â”œâ”€â”€ index.js // å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ router.js // é¡¹ç›®çš„è·¯ç”±æ–‡ä»¶
â”œâ”€â”€ .eslintrc // bowerå®‰è£…ç›®å½•çš„é…ç½®
â”œâ”€â”€ .editorconfig // ä¿è¯ä»£ç åœ¨ä¸åŒç¼–è¾‘å™¨å¯è§†åŒ–çš„å·¥å…·
â”œâ”€â”€ .gitignore // gitä¸Šä¼ æ—¶å¿½ç•¥çš„æ–‡ä»¶
â”œâ”€â”€ .roadhogrc.js // é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ¥å£è½¬å‘ï¼Œcss_moduleç­‰éƒ½åœ¨è¿™è¾¹ã€‚
â”œâ”€â”€ .roadhogrc.mock.js // é¡¹ç›®çš„é…ç½®æ–‡ä»¶
â””â”€â”€ package.json // å½“å‰æ•´ä¸€ä¸ªé¡¹ç›®çš„ä¾èµ–
</code></pre></div><p><strong>é¦–å…ˆæ˜¯å‰ç«¯çš„é¡µé¢ï¼Œæˆ‘ä»¬ä½¿ç”¨ class å½¢å¼æ¥åˆ›å»ºç»„ä»¶ï¼ŒåŸä¾‹å­ä¸­æ˜¯ä½¿ç”¨æ— çŠ¶æ€æ¥åˆ›å»ºçš„ã€‚react åˆ›å»ºç»„ä»¶çš„å„ç§æ–¹å¼ï¼Œå¤§å®¶å¯ä»¥çœ‹<a href="http://www.cnblogs.com/wonyun/p/5930333.html" target="_blank" rel="noopener noreferrer">Reactåˆ›å»ºç»„ä»¶çš„ä¸‰ç§æ–¹å¼åŠå…¶åŒºåˆ«<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p> <blockquote><p>æˆ‘ä»¬å…ˆä¿®æ”¹<code>route/IndexPage.js</code></p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>import React from 'react';
import { connect } from 'dva';
import styles from './IndexPage.css';

class IndexPage extends React.Component {
  render() {
    const { dispatch } = this.props;

    return (
      &lt;div className={styles.normal}&gt;
        &lt;div className={styles.record}&gt;Highest Record: 1&lt;/div&gt;
        &lt;div className={styles.current}&gt;2&lt;/div&gt;
        &lt;div className={styles.button}&gt;
          &lt;button onClick={() =&gt; {}}&gt;+&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  }
}

export default connect()(IndexPage);
</code></pre></div><blockquote><p>åŒæ—¶ä¿®æ”¹æ ·å¼<code>routes/IndexPage.css</code></p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>.normal {
  width: 200px;
  margin: 100px auto;
  padding: 20px;
  border: 1px solid #ccc;
  box-shadow: 0 0 20px #ccc;
}
.record {
  border-bottom: 1px solid #ccc;
  padding-bottom: 8px;
  color: #ccc;
}
.current {
  text-align: center;
  font-size: 40px;
  padding: 40px 0;
}
.button {
  text-align: center;
  button {
    width: 100px;
    height: 40px;
    background: #aaa;
    color: #fff;
  }
}
</code></pre></div><blockquote><p>åœ¨ <code>model</code> å¤„ç†<code>state</code>ï¼Œåœ¨é¡µé¢é‡Œé¢è¾“å‡º <code>model</code> ä¸­çš„ <code>state</code></p></blockquote> <ul><li>é¦–å…ˆæˆ‘ä»¬åœ¨index.jsä¸­å°†<code>models/example.js</code>ï¼Œå³å°†modelä¸‹ä¸€è¡Œçš„çš„æ³¨é‡Šæ‰“å¼€</li></ul> <div class="language- extra-class"><pre class="language-text"><code>import dva from 'dva';
import './index.css';

// 1. Initialize
const app = dva();

// 2. Plugins
// app.use({});

// 3. Model
app.model(require('./models/example')); // æ‰“å¼€æ³¨é‡Š

// 4. Router
app.router(require('./router'));

// 5. Start
app.start('#root');
</code></pre></div><blockquote><p>æ¥ä¸‹æ¥æˆ‘ä»¬è¿›å…¥ <code>models/example.js</code>ï¼Œå°†<code>namespace</code> åå­—æ”¹ä¸º <code>count</code>ï¼Œ<code>state</code>å¯¹è±¡åŠ ä¸Š <code>record</code> ä¸ <code>current</code> å±æ€§ã€‚å¦‚ä¸‹</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>export default {
  namespace: 'count',
  state: {
    record: 0,
    current: 0,
  },
  ...
};
</code></pre></div><blockquote><p>æ¥ç€æˆ‘ä»¬æ¥åˆ° <code>routes/indexpage.js</code> é¡µé¢ï¼Œé€šè¿‡çš„ <code>mapStateToProps</code>å¼•å…¥ç›¸å…³çš„ <code>state</code></p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>import React from 'react';
import { connect } from 'dva';
import styles from './IndexPage.css';

class IndexPage extends React.Component {
  render() {
    const { dispatch, count } = this.props;

    return (
      &lt;div className={styles.normal}&gt;
        &lt;div className={styles.record}&gt;
         Highest Record: {count.record} // å°†countçš„recordè¾“å‡º
        &lt;/div&gt;
        &lt;div className={styles.current}&gt;
         {count.current}
        &lt;/div&gt;
        &lt;div className={styles.button}&gt;
          &lt;button onClick={() =&gt; {} } &gt;
                 +
          &lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  }
}

function mapStateToProps(state) {
  return { count: state.count };
} // è·å–state

export default connect(mapStateToProps)(IndexPage);
</code></pre></div><blockquote><p>é€šè¿‡ <code>+</code> å‘é€ <code>action</code>ï¼Œé€šè¿‡ <code>reducer</code> æ”¹å˜ç›¸åº”çš„ <code>state</code></p></blockquote> <ul><li>é¦–å…ˆæˆ‘ä»¬åœ¨ <code>models/example.js</code>ï¼Œå†™ç›¸åº”çš„ <code>reducer</code></li></ul> <div class="language- extra-class"><pre class="language-text"><code>export default {
  ...
  reducers: {
    add1(state) {
      const newCurrent = state.current + 1;
      return { ...state,
        record: newCurrent &gt; state.record ? newCurrent : state.record,
        current: newCurrent,
      };
    },
    minus(state) {
      return { ...state, current: state.current - 1 };
    },
  },
};
</code></pre></div><blockquote><p>åœ¨é¡µé¢çš„æ¨¡æ¿ <code>routes/IndexPage.js</code> ä¸­ <code>+</code> å·ç‚¹å‡»çš„æ—¶å€™ï¼Œ<code>dispatch</code>ä¸€ä¸ª <code>action</code></p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>import React from 'react';
import { connect } from 'dva';
import styles from './IndexPage.css';

class IndexPage extends React.Component {
  render() {
    const { dispatch, count } = this.props;
    return (
      &lt;div className={styles.normal}&gt;
        &lt;div className={styles.record}&gt;Highest Record: {count.record}&lt;/div&gt;
        &lt;div className={styles.current}&gt;{count.current}&lt;/div&gt;
        &lt;div className={styles.button}&gt;
          &lt;button
+            onClick={() =&gt; { dispatch({ type: 'count/add1' });}
          }&gt;+&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  }
}
function mapStateToProps(state) {
  return { count: state.count };
}

export default connect(mapStateToProps)(IndexPage);
</code></pre></div><blockquote><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥ä½¿ç”¨ <code>effect</code> æ¨¡æ‹Ÿä¸€ä¸ªæ•°æ®æ¥å£è¯·æ±‚ï¼Œè¿”å›ä¹‹åï¼Œé€šè¿‡ <code>yield put()</code> æ”¹å˜ç›¸åº”çš„ <code>state</code></p></blockquote> <ul><li>é¦–å…ˆæˆ‘ä»¬æ›¿æ¢ç›¸åº”çš„ <code>models/example.js</code> çš„ <code>effect</code></li></ul> <div class="language- extra-class"><pre class="language-text"><code>effects: {
    *add(action, { call, put }) {
      yield call(delay, 1000);
      yield put({ type: 'minus' });
    },
},
</code></pre></div><blockquote><p>è¿™é‡Œçš„ <code>delay</code>ï¼Œæ˜¯æˆ‘è¿™è¾¹å†™çš„ä¸€ä¸ªå»¶æ—¶çš„å‡½æ•°ï¼Œæˆ‘ä»¬åœ¨ <code>utils</code> é‡Œé¢ç¼–å†™ä¸€ä¸ª <code>utils.js</code> ï¼Œä¸€èˆ¬è¯·æ±‚æ¥å£çš„å‡½æ•°éƒ½ä¼šå†™åœ¨ <code>servers</code> æ–‡ä»¶å¤¹ä¸­</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>export function delay(timeout) {
  return new Promise((resolve) =&gt; {
    setTimeout(resolve, timeout);
  });
}
</code></pre></div><blockquote><p>è®¢é˜…è®¢é˜…é”®ç›˜äº‹ä»¶ï¼Œä½¿ç”¨ <code>subscriptions</code>ï¼Œå½“ç”¨æˆ·æŒ‰ä½ <code>command+up</code> æ—¶å€™è§¦å‘æ·»åŠ æ•°å­—çš„ <code>action</code></p></blockquote> <ul><li>åœ¨ <code>models/example.js</code> ä¸­ä½œå¦‚ä¸‹ä¿®æ”¹</li></ul> <div class="language- extra-class"><pre class="language-text"><code>+import key from 'keymaster';
...
app.model({
  namespace: 'count',
+ subscriptions: {
+   keyboardWatcher({ dispatch }) {
+     key('âŒ˜+up, ctrl+up', () =&gt; { dispatch({type:'add'}) });
+   },
+ },
});
</code></pre></div><ul><li>åœ¨è¿™é‡Œä½ éœ€è¦å®‰è£… <code>keymaster</code> è¿™ä¸ªä¾èµ–</li></ul> <div class="language- extra-class"><pre class="language-text"><code>npm install keymaster --save
</code></pre></div><ul><li>ç°åœ¨ä½ å¯ä»¥æŒ‰ä½ <code>command+up</code> å°±å¯ä»¥ä½¿ <code>current</code> åŠ 1</li></ul> <h2 id="å››ã€dvaå®è·µ"><a href="#å››ã€dvaå®è·µ" class="header-anchor">#</a> å››ã€Dvaå®è·µ</h2> <h3 id="_4-1-æŠ½ç¦»model"><a href="#_4-1-æŠ½ç¦»model" class="header-anchor">#</a> 4.1 æŠ½ç¦»Model</h3> <blockquote><p>æŠ½ç¦»<code>Model</code>ï¼Œæ ¹æ®è®¾è®¡é¡µé¢éœ€æ±‚ï¼Œè®¾è®¡ç›¸åº”çš„<code>Model</code></p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>// models/users.js
// version1: ä»æ•°æ®ç»´åº¦æŠ½å–ï¼Œæ›´é€‚ç”¨äºæ— çŠ¶æ€çš„æ•°æ®
// version2: ä»ä¸šåŠ¡çŠ¶æ€æŠ½å–ï¼Œå°†æ•°æ®ä¸ç»„ä»¶çš„ä¸šåŠ¡çŠ¶æ€ç»Ÿä¸€æŠ½ç¦»æˆä¸€ä¸ªmodel
// æ–°å¢éƒ¨åˆ†ä¸ºåœ¨æ•°æ®ç»´åº¦åŸºç¡€ä¸Šï¼Œæ”¹ä¸ºä»ä¸šåŠ¡çŠ¶æ€æŠ½å–è€Œæ·»åŠ çš„ä»£ç 
export default {
  namespace: 'users',
  state: {
    list: [],
    total: null,
+   loading: false, // æ§åˆ¶åŠ è½½çŠ¶æ€
+   current: null, // å½“å‰åˆ†é¡µä¿¡æ¯
+   currentItem: {}, // å½“å‰æ“ä½œçš„ç”¨æˆ·å¯¹è±¡
+   modalVisible: false, // å¼¹å‡ºçª—çš„æ˜¾ç¤ºçŠ¶æ€
+   modalType: 'create', // å¼¹å‡ºçª—çš„ç±»å‹ï¼ˆæ·»åŠ ç”¨æˆ·ï¼Œç¼–è¾‘ç”¨æˆ·ï¼‰
  },

    // å¼‚æ­¥æ“ä½œ
    effects: {
        *query(){},
        *create(){},
        *'delete'(){},   // å› ä¸ºdeleteæ˜¯å…³é”®å­—ï¼Œç‰¹æ®Šå¤„ç†
        *update(){},
    },

    // æ›¿æ¢çŠ¶æ€æ ‘
    reducers: {
+       showLoading(){}, // æ§åˆ¶åŠ è½½çŠ¶æ€çš„ reducer
+       showModel(){}, // æ§åˆ¶ Model æ˜¾ç¤ºçŠ¶æ€çš„ reducer
+       hideModel(){},
        querySuccess(){},
        createSuccess(){},
        deleteSuccess(){},
        updateSuccess(){},
    }
}
</code></pre></div><h3 id="_4-2-è®¾è®¡ç»„ä»¶"><a href="#_4-2-è®¾è®¡ç»„ä»¶" class="header-anchor">#</a> 4.2 è®¾è®¡ç»„ä»¶</h3> <blockquote><p>å…ˆè®¾ç½®å®¹å™¨ç»„ä»¶çš„è®¿é—®è·¯å¾„ï¼Œå†åˆ›å»ºç»„ä»¶æ–‡ä»¶</p></blockquote> <h4 id="_4-2-1-å®¹å™¨ç»„ä»¶"><a href="#_4-2-1-å®¹å™¨ç»„ä»¶" class="header-anchor">#</a> 4.2.1 å®¹å™¨ç»„ä»¶</h4> <blockquote><p>å…·æœ‰ç›‘å¬æ•°æ®è¡Œä¸ºçš„ç»„ä»¶ï¼ŒèŒè´£æ˜¯ç»‘å®šç›¸å…³è”çš„ model æ•°æ®ï¼ŒåŒ…å«å­ç»„ä»¶ï¼›ä¼ å…¥çš„æ•°æ®æ¥æºäºmodel</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>import React, { Component, PropTypes } from 'react';

// dva çš„ connect æ–¹æ³•å¯ä»¥å°†ç»„ä»¶å’Œæ•°æ®å…³è”åœ¨ä¸€èµ·
import { connect } from 'dva';

// ç»„ä»¶æœ¬èº«
const MyComponent = (props)=&gt;{};

// propTypeså±æ€§ï¼Œç”¨äºé™åˆ¶propsçš„ä¼ å…¥æ•°æ®ç±»å‹
MyComponent.propTypes = {};

// å£°æ˜æ¨¡å‹ä¼ é€’å‡½æ•°ï¼Œç”¨äºå»ºç«‹ç»„ä»¶å’Œæ•°æ®çš„æ˜ å°„å…³ç³»
// å®é™…è¡¨ç¤º å°†ModelAè¿™ä¸€ä¸ªæ•°æ®æ¨¡å‹ï¼Œç»‘å®šåˆ°å½“å‰çš„ç»„ä»¶ä¸­ï¼Œåˆ™åœ¨å½“å‰ç»„ä»¶ä¸­ï¼Œéšæ—¶å¯ä»¥å–åˆ°ModelAçš„æœ€æ–°å€¼
// å¯ä»¥ç»‘å®šå¤šä¸ªModel
function mapStateToProps({ModelA}) {
  return {ModelA};
}

// å…³è” model
// æ­£å¼è°ƒç”¨æ¨¡å‹ä¼ é€’å‡½æ•°ï¼Œå®Œæˆæ¨¡å‹ç»‘å®š
export default connect(mapStateToProps)(MyComponent);
</code></pre></div><h4 id="_4-2-2-å±•ç¤ºç»„ä»¶"><a href="#_4-2-2-å±•ç¤ºç»„ä»¶" class="header-anchor">#</a> 4.2.2 å±•ç¤ºç»„ä»¶</h4> <blockquote><p>å±•ç¤ºé€šè¿‡ <code>props</code> ä¼ é€’åˆ°ç»„ä»¶å†…éƒ¨æ•°æ®ï¼›ä¼ å…¥çš„æ•°æ®æ¥æºäºå®¹å™¨ç»„ä»¶å‘å±•ç¤ºç»„ä»¶çš„<code>props</code></p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>import React, { Component, PropTypes } from 'react';

// ç»„ä»¶æœ¬èº«
// æ‰€éœ€è¦çš„æ•°æ®é€šè¿‡ Container Component é€šè¿‡ props ä¼ é€’ä¸‹æ¥
const MyComponent = (props)=&gt;{}
MyComponent.propTypes = {};

// å¹¶ä¸ä¼šç›‘å¬æ•°æ®
export default MyComponent;
</code></pre></div><h4 id="_4-2-3-è®¾ç½®è·¯ç”±"><a href="#_4-2-3-è®¾ç½®è·¯ç”±" class="header-anchor">#</a> 4.2.3 è®¾ç½®è·¯ç”±</h4> <div class="language- extra-class"><pre class="language-text"><code>// .src/router.js
import React, { PropTypes } from 'react';
import { Router, Route } from 'dva/router';
import Users from './routes/Users';

export default function({ history }) {
  return (
    &lt;Router history={history}&gt;
      &lt;Route path=&quot;/users&quot; component={Users} /&gt;
    &lt;/Router&gt;
  );
};
</code></pre></div><p><strong>å®¹å™¨ç»„ä»¶é›å½¢</strong></p> <div class="language- extra-class"><pre class="language-text"><code>// .src/routes/Users.jsx
import React, { PropTypes } from 'react';

function Users() {
  return (
    &lt;div&gt;User Router Component&lt;/div&gt;
  );
}

export default Users;
</code></pre></div><h4 id="_4-2-4-è®¾è®¡å®¹å™¨ç»„ä»¶"><a href="#_4-2-4-è®¾è®¡å®¹å™¨ç»„ä»¶" class="header-anchor">#</a> 4.2.4 è®¾è®¡å®¹å™¨ç»„ä»¶</h4> <blockquote><p>è‡ªé¡¶å‘ä¸‹çš„è®¾è®¡æ–¹æ³•ï¼šå…ˆè®¾è®¡å®¹å™¨ç»„ä»¶ï¼Œå†é€æ­¥ç»†åŒ–å†…éƒ¨çš„å±•ç¤ºå®¹å™¨</p></blockquote> <p>ç»„ä»¶çš„å®šä¹‰æ–¹å¼</p> <div class="language- extra-class"><pre class="language-text"><code>// æ–¹æ³•ä¸€ï¼š es6 çš„å†™æ³•ï¼Œå½“ç»„ä»¶è®¾è®¡reactç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œå¯é‡‡ç”¨è¿™ç§å†™æ³•
// å…·æœ‰ç”Ÿå‘½å‘¨æœŸçš„ç»„ä»¶ï¼Œå¯ä»¥åœ¨æ¥æ”¶åˆ°ä¼ å…¥æ•°æ®å˜åŒ–æ—¶ï¼Œè‡ªå®šä¹‰æ‰§è¡Œæ–¹æ³•ï¼Œæœ‰è‡ªå·±çš„è¡Œä¸ºæ¨¡å¼
// æ¯”å¦‚åœ¨ç»„ä»¶ç”Ÿæˆåè°ƒç”¨xxè¯·æ±‚(componentDidMount)ã€å¯ä»¥è‡ªå·±å†³å®šè¦ä¸è¦æ›´æ–°æ¸²æŸ“(shouldComponentUpdate)ç­‰
class App extends React.Component({});

// æ–¹æ³•äºŒï¼š stateless çš„å†™æ³•ï¼Œå®šä¹‰æ— çŠ¶æ€ç»„ä»¶
// æ— çŠ¶æ€ç»„ä»¶ï¼Œä»…ä»…æ ¹æ®ä¼ å…¥çš„æ•°æ®æ›´æ–°ï¼Œä¿®æ”¹è‡ªå·±çš„æ¸²æŸ“å†…å®¹
const App = (props) =&gt; ({});
</code></pre></div><p>å®¹å™¨ç»„ä»¶ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>// ./src/routes/Users.jsx
import React, { Component, PropTypes } from 'react';

// å¼•å…¥å±•ç¤ºç»„ä»¶ ï¼ˆæš‚æ—¶éƒ½æ²¡å®ç°ï¼‰
import UserList from '../components/Users/UserList';
import UserSearch from '../components/Users/UserSearch';
import UserModal from '../components/Users/UserModal';

// å¼•å…¥cssæ ·å¼è¡¨
import styles from './style.less'

function Users() {

  // å‘userListPropsä¸­ä¼ å…¥é™æ€æ•°æ®
  const userSearchProps = {};
  const userListProps = {
    total: 3,
    current: 1,
    loading: false,
    dataSource: [
      {
        name: 'å¼ ä¸‰',
        age: 23,
        address: 'æˆéƒ½',
      },
      {
        name: 'æå››',
        age: 24,
        address: 'æ­å·',
      },
      {
        name: 'ç‹äº”',
        age: 25,
        address: 'ä¸Šæµ·',
      },
    ],
  };
  const userModalProps = {};

  return (
    &lt;div className={styles.normal}&gt;
      {/* ç”¨æˆ·ç­›é€‰æœç´¢æ¡† */}
      &lt;UserSearch {...userSearchProps} /&gt;
      {/* ç”¨æˆ·ä¿¡æ¯å±•ç¤ºåˆ—è¡¨ */}
      &lt;UserList {...userListProps} /&gt;
      {/* æ·»åŠ ç”¨æˆ· &amp; ä¿®æ”¹ç”¨æˆ·å¼¹å‡ºçš„æµ®å±‚ */}
      &lt;UserModal {...userModalProps} /&gt;
    &lt;/div&gt;
  );
}

// å¾ˆå…³é”®çš„å¯¹å¤–è¾“å‡ºexportï¼›ä½¿å¤–éƒ¨å¯é€šè¿‡importå¼•ç”¨ä½¿ç”¨æ­¤ç»„ä»¶
export default Users;
</code></pre></div><p>å±•ç¤ºç»„ä»¶UserList</p> <div class="language- extra-class"><pre class="language-text"><code>// ./src/components/Users/UserList.jsx
import React, { Component, PropTypes } from 'react';

// é‡‡ç”¨antdçš„UIç»„ä»¶
import { Table, message, Popconfirm } from 'antd';

// é‡‡ç”¨ stateless çš„å†™æ³•
const UserList = ({
    total,
    current,
    loading,
    dataSource,
}) =&gt; {
  const columns = [{
    title: 'å§“å',
    dataIndex: 'name',
    key: 'name',
    render: (text) =&gt; &lt;a href=&quot;#&quot;&gt;{text}&lt;/a&gt;,
  }, {
    title: 'å¹´é¾„',
    dataIndex: 'age',
    key: 'age',
  }, {
    title: 'ä½å€',
    dataIndex: 'address',
    key: 'address',
  }, {
    title: 'æ“ä½œ',
    key: 'operation',
    render: (text, record) =&gt; (
      &lt;p&gt;
        &lt;a onClick={()=&gt;{}}&gt;ç¼–è¾‘&lt;/a&gt;

        &lt;Popconfirm title=&quot;ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ&quot; onConfirm={()=&gt;{}}&gt;
          &lt;a&gt;åˆ é™¤&lt;/a&gt;
        &lt;/Popconfirm&gt;
      &lt;/p&gt;
    ),
  }];

  // å®šä¹‰åˆ†é¡µå¯¹è±¡
  const pagination = {
    total,
    current,
    pageSize: 10,
    onChange: ()=&gt;{},
  };


  // æ­¤å¤„çš„Tableæ ‡ç­¾ä½¿ç”¨äº†antdç»„ä»¶ï¼Œä¼ å…¥çš„å‚æ•°æ ¼å¼æ˜¯ç”±antdç»„ä»¶åº“æœ¬èº«å†³å®šçš„
  // æ­¤å¤–è¿˜éœ€è¦åœ¨index.jsä¸­å¼•å…¥antd  import 'antd/dist/antd.css'
  return (
    &lt;div&gt;
      &lt;Table
        columns={columns}
        dataSource={dataSource}
        loading={loading}
        rowKey={record =&gt; record.id}
        pagination={pagination}
      /&gt;
    &lt;/div&gt;
  );
}

export default UserList;
</code></pre></div><h3 id="_4-3-æ·»åŠ reducer"><a href="#_4-3-æ·»åŠ reducer" class="header-anchor">#</a> 4.3 æ·»åŠ Reducer</h3> <blockquote><p>åœ¨æ•´ä¸ªåº”ç”¨ä¸­ï¼Œåªæœ‰<code>model</code>ä¸­çš„<code>reducer</code>å‡½æ•°å¯ä»¥ç›´æ¥ä¿®æ”¹è‡ªå·±æ‰€åœ¨<code>model</code>çš„<code>state</code>å‚æ•°ï¼Œå…¶ä½™éƒ½æ˜¯éæ³•æ“ä½œï¼›
å¹¶ä¸”å¿…é¡»ä½¿ç”¨<code>return {...state}</code>çš„å½¢å¼è¿›è¡Œä¿®æ”¹</p></blockquote> <h4 id="_4-3-1-ç¬¬ä¸€æ­¥ï¼šå®ç°reducerå‡½æ•°"><a href="#_4-3-1-ç¬¬ä¸€æ­¥ï¼šå®ç°reducerå‡½æ•°" class="header-anchor">#</a> 4.3.1 ç¬¬ä¸€æ­¥ï¼šå®ç°reducerå‡½æ•°</h4> <div class="language- extra-class"><pre class="language-text"><code>// models/users.js
// ä½¿ç”¨é™æ€æ•°æ®è¿”å›ï¼ŒæŠŠuserListä¸­çš„é™æ€æ•°æ®ç§»åˆ°æ­¤å¤„
// querySuccessè¿™ä¸ªactionçš„ä½œç”¨åœ¨äºï¼Œä¿®æ”¹äº†modelçš„æ•°æ®
export default {
  namespace: 'users',
  stateï¼š {}ï¼Œ
  subscriptions: {},
  effects: {},
  reducers: {
    querySuccess(state){
        const mock = {
          total: 3,
          current: 1,
          loading: false,
          list: [
            {
              id: 1,
              name: 'å¼ ä¸‰',
              age: 23,
              address: 'æˆéƒ½',
            },
            {
              id: 2,
              name: 'æå››',
              age: 24,
              address: 'æ­å·',
            },
            {
              id: 3,
              name: 'ç‹äº”',
              age: 25,
              address: 'ä¸Šæµ·',
            },
          ]
        };
        // return çš„å†…å®¹æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ¶µç›–åŸstateä¸­çš„æ‰€æœ‰å±æ€§ï¼Œä»¥å®ç°â€œæ›´æ–°æ›¿æ¢â€çš„æ•ˆæœ
        return {...state, ...mock, loading: false};
      }
  }
}
</code></pre></div><h4 id="_4-3-2-ç¬¬äºŒæ­¥ï¼šå…³è”modelä¸­çš„æ•°æ®æº"><a href="#_4-3-2-ç¬¬äºŒæ­¥ï¼šå…³è”modelä¸­çš„æ•°æ®æº" class="header-anchor">#</a> 4.3.2 ç¬¬äºŒæ­¥ï¼šå…³è”Modelä¸­çš„æ•°æ®æº</h4> <div class="language- extra-class"><pre class="language-text"><code>// routes/Users.jsx

import React, { PropTypes } from 'react';

// æœ€åç”¨åˆ°äº†connectå‡½æ•°ï¼Œéœ€è¦åœ¨å¤´éƒ¨é¢„å…ˆå¼•å…¥connect
import { connect } from 'dva';

function Users({ location, dispatch, users }) {

  const {
    loading, list, total, current,
    currentItem, modalVisible, modalType
    } = users;

  const userSearchProps={};

  // ä½¿ç”¨ä¼ å…¥çš„æ•°æ®æºï¼Œè¿›è¡Œæ•°æ®æ¸²æŸ“
  const userListProps={
    dataSource: list,
    total,
    loading,
    current,
  };
  const userModalProps={};

  return (
    &lt;div className={styles.normal}&gt;
      {/* ç”¨æˆ·ç­›é€‰æœç´¢æ¡† */}
      &lt;UserSearch {...userSearchProps} /&gt;
      {/* ç”¨æˆ·ä¿¡æ¯å±•ç¤ºåˆ—è¡¨ */}
      &lt;UserList {...userListProps} /&gt;
      {/* æ·»åŠ ç”¨æˆ· &amp; ä¿®æ”¹ç”¨æˆ·å¼¹å‡ºçš„æµ®å±‚ */}
      &lt;UserModal {...userModalProps} /&gt;
    &lt;/div&gt;
  );
}

// å£°æ˜ç»„ä»¶çš„propsç±»å‹
Users.propTypes = {
  users: PropTypes.object,
};

// æŒ‡å®šè®¢é˜…æ•°æ®ï¼Œå¹¶ä¸”å…³è”åˆ°usersä¸­
function mapStateToProps({ users }) {
  return {users};
}

// å»ºç«‹æ•°æ®å…³è”å…³ç³»
export default connect(mapStateToProps)(Users);
</code></pre></div><h4 id="_4-3-3-ç¬¬ä¸‰æ­¥ï¼šé€šè¿‡å‘èµ·actionï¼Œåœ¨ç»„ä»¶ä¸­è·å–modelä¸­çš„æ•°æ®"><a href="#_4-3-3-ç¬¬ä¸‰æ­¥ï¼šé€šè¿‡å‘èµ·actionï¼Œåœ¨ç»„ä»¶ä¸­è·å–modelä¸­çš„æ•°æ®" class="header-anchor">#</a> 4.3.3 ç¬¬ä¸‰æ­¥ï¼šé€šè¿‡å‘èµ·Actionï¼Œåœ¨ç»„ä»¶ä¸­è·å–Modelä¸­çš„æ•°æ®</h4> <div class="language- extra-class"><pre class="language-text"><code>// models/users.js
// åœ¨ç»„ä»¶ç”Ÿæˆåå‘å‡ºactionï¼Œç¤ºä¾‹ï¼š
componentDidMount() {
  this.props.dispatch({
    type: 'model/action',     // typeå¯¹åº”actionçš„åå­—
  });
}

// åœ¨æœ¬æ¬¡å®è·µä¸­ï¼Œåœ¨è®¿é—®/users/è·¯ç”±æ—¶ï¼Œå°±æ˜¯æˆ‘ä»¬è·å–ç”¨æˆ·æ•°æ®çš„æ—¶æœº
// å› æ­¤æŠŠdispatchç§»è‡³subscriptionä¸­
// subcriptionï¼Œè®¢é˜…(æˆ–æ˜¯ç›‘å¬)ä¸€ä¸ªæ•°æ®æºï¼Œç„¶åæ ¹æ®æ¡ä»¶dispatchå¯¹åº”çš„action
// æ•°æ®æºå¯ä»¥æ˜¯å½“å‰çš„æ—¶é—´ã€æœåŠ¡å™¨çš„ websocket è¿æ¥ã€keyboard è¾“å…¥ã€geolocation å˜åŒ–ã€history è·¯ç”±å˜åŒ–ç­‰ç­‰
// æ­¤å¤„è®¢é˜…çš„æ•°æ®æºå°±æ˜¯è·¯ç”±ä¿¡æ¯ï¼Œå½“è·¯ç”±ä¸º/usersï¼Œåˆ™æ´¾å‘'querySuccess'è¿™ä¸ªeffectsæ–¹æ³•
subscriptions: {
    setup({ dispatch, history }) {
      history.listen(location =&gt; {
        if (location.pathname === '/users') {
          dispatch({
            type: 'querySuccess',
            payload: {}
          });
        }
      });
    },
  },
</code></pre></div><h4 id="_4-3-4-ç¬¬å››æ­¥ï¼š-åœ¨index-jsä¸­æ·»åŠ models"><a href="#_4-3-4-ç¬¬å››æ­¥ï¼š-åœ¨index-jsä¸­æ·»åŠ models" class="header-anchor">#</a> 4.3.4 ç¬¬å››æ­¥ï¼š åœ¨index.jsä¸­æ·»åŠ models</h4> <div class="language- extra-class"><pre class="language-text"><code>// modelå¿…é¡»åœ¨æ­¤å®Œæˆæ³¨å†Œï¼Œæ‰èƒ½å…¨å±€æœ‰æ•ˆ
// index.js
app.model(require('./models/users.js'));
</code></pre></div><h4 id="_4-4-æ·»åŠ effects"><a href="#_4-4-æ·»åŠ effects" class="header-anchor">#</a> 4.4 æ·»åŠ Effects</h4> <blockquote><div class="language- extra-class"><pre class="language-text"><code>Effects`çš„ä½œç”¨åœ¨äºå¤„ç†å¼‚æ­¥å‡½æ•°ï¼Œæ§åˆ¶æ•°æ®æµç¨‹ã€‚
å› ä¸ºåœ¨çœŸå®åœºæ™¯ä¸­ï¼Œæ•°æ®éƒ½æ¥è‡ªæœåŠ¡å™¨ï¼Œéœ€è¦åœ¨å‘èµ·å¼‚æ­¥è¯·æ±‚è·å¾—è¿”å›å€¼åå†è®¾ç½®æ•°æ®ï¼Œæ›´æ–°`state`ã€‚
å› æ­¤æˆ‘ä»¬å¾€å¾€åœ¨`Effects`ä¸­è°ƒç”¨`reducer
</code></pre></div></blockquote> <div class="language- extra-class"><pre class="language-text"><code>export default {
  namespace: 'users',
  stateï¼š {}ï¼Œ
  subscriptions: {},
  effects: {
    // æ·»åŠ effectså‡½æ•°
    // callä¸putæ˜¯dvaçš„å‡½æ•°
    // callè°ƒç”¨æ‰§è¡Œä¸€ä¸ªå‡½æ•°
    // putåˆ™æ˜¯dispatchæ‰§è¡Œä¸€ä¸ªaction
    // selectç”¨äºè®¿é—®å…¶ä»–model
    *query({ payload }, { select, call, put }) {
        yield put({ type: 'showLoading' });
        const { data } = yield call(query);
        if (data) {
          yield put({
            type: 'querySuccess',
            payload: {
              list: data.data,
              total: data.page.total,
              current: data.page.current
            }
          });
        }
      },
    },
  reducers: {}
}



// æ·»åŠ è¯·æ±‚å¤„ç†   åŒ…å«äº†ä¸€ä¸ªajaxè¯·æ±‚
// models/users.js
import request from '../utils/request';
import qs from 'qs';
async function query(params) {
  return request(`/api/users?${qs.stringify(params)}`);
}
</code></pre></div><h4 id="_4-5-æŠŠè¯·æ±‚å¤„ç†åˆ†ç¦»åˆ°serviceä¸­"><a href="#_4-5-æŠŠè¯·æ±‚å¤„ç†åˆ†ç¦»åˆ°serviceä¸­" class="header-anchor">#</a> 4.5 æŠŠè¯·æ±‚å¤„ç†åˆ†ç¦»åˆ°serviceä¸­</h4> <blockquote><p>ç”¨æ„åœ¨äºåˆ†ç¦»(å¯å¤ç”¨çš„)ajaxè¯·æ±‚</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>// services/users.js
import request from '../utils/request';
import qs from 'qs';
export async function query(params) {
  return request(`/api/users?${qs.stringify(params)}`);
}

// åœ¨modelsä¸­å¼•ç”¨
// models/users.js
import {query} from '../services/users';
</code></pre></div><h2 id="äº”ã€ä½¿ç”¨dvaæ¡†æ¶å’Œç›´æ¥ä½¿ç”¨reduxå†™æ³•çš„åŒºåˆ«"><a href="#äº”ã€ä½¿ç”¨dvaæ¡†æ¶å’Œç›´æ¥ä½¿ç”¨reduxå†™æ³•çš„åŒºåˆ«" class="header-anchor">#</a> äº”ã€ä½¿ç”¨dvaæ¡†æ¶å’Œç›´æ¥ä½¿ç”¨reduxå†™æ³•çš„åŒºåˆ«</h2> <h3 id="_5-1-ä½¿ç”¨-redux"><a href="#_5-1-ä½¿ç”¨-redux" class="header-anchor">#</a> 5.1 ä½¿ç”¨ redux</h3> <div class="language- extra-class"><pre class="language-text"><code>// action.js

export const REQUEST_TODO = 'REQUEST_TODO';
export const RESPONSE_TODO = 'RESPONSE_TODO';

const request = count =&gt; ({type: REQUEST_TODO, payload: {loading: true, count}});

const response = count =&gt; ({type: RESPONSE_TODO, payload: {loading: false, count}});

export const fetch = count =&gt; {
  return (dispatch) =&gt; {
    dispatch(request(count));

    return new Promise(resolve =&gt; {
      setTimeout(() =&gt; {
        resolve(count + 1);
      }, 1000)
    }).then(data =&gt; {
      dispatch(response(data))
    })
  }
}
//reducer.js
import { REQUEST_TODO, RESPONSE_TODO } from './actions';

export default (state = {
  loading: false,
  count: 0
}, action) =&gt; {
  switch (action.type) {
    case REQUEST_TODO:
      return {...state, ...action.payload};
    case RESPONSE_TODO:
      return {...state, ...action.payload};
    default:
      return state;
  }
}
// app.js
import React from 'react';
import { bindActionCreators } from 'redux';
import { connect } from 'react-redux';

import * as actions from './actions';

const App = ({fetch, count, loading}) =&gt; {
  return (
    &lt;div&gt;
      {loading ? &lt;div&gt;loading...&lt;/div&gt; : &lt;div&gt;{count}&lt;/div&gt;}
      &lt;button onClick={() =&gt; fetch(count)}&gt;add&lt;/button&gt;
    &lt;/div&gt;
  )
}

function mapStateToProps(state) {
  return state;
}

function mapDispatchToProps(dispatch) {
  return bindActionCreators(actions, dispatch)
}

export default connect(mapStateToProps, mapDispatchToProps)(App)
//index.js
import { render } from 'react-dom';
import { createStore, applyMiddleware } from 'redux';
import { Provider } from 'react-redux'
import thunkMiddleware from 'redux-thunk';

import reducer from './app/reducer';
import App from './app/app';

const store = createStore(reducer, applyMiddleware(thunkMiddleware));

render(
  &lt;Provider store={store}&gt;
    &lt;App/&gt;
  &lt;/Provider&gt;
  ,
  document.getElementById('app')
)
</code></pre></div><h3 id="_5-2-ä½¿ç”¨dva"><a href="#_5-2-ä½¿ç”¨dva" class="header-anchor">#</a> 5.2 ä½¿ç”¨dva</h3> <div class="language- extra-class"><pre class="language-text"><code>// model.js
export default {
  namespace: 'demo',
  state: {
    loading: false,
    count: 0
  },
  reducers: {
    request(state, payload) {
      return {...state, ...payload};
    },
    response(state, payload) {
      return {...state, ...payload};
    }
  },
  effects: {
    *'fetch'(action, {put, call}) {
      yield put({type: 'request', loading: true});

      let count = yield call((count) =&gt; {
        return new Promise(resolve =&gt; {
          setTimeout(() =&gt; {
            resolve(count + 1);
          }, 1000);
        });
      }, action.count);

      yield put({
        type: 'response',
        loading: false,
        count
      });
    }
  }
}
//app.js

import React from 'react'
import { connect } from 'dva';

const App = ({fetch, count, loading}) =&gt; {
  return (
    &lt;div&gt;
      {loading ? &lt;div&gt;loading...&lt;/div&gt; : &lt;div&gt;{count}&lt;/div&gt;}
      &lt;button onClick={() =&gt; fetch(count)}&gt;add&lt;/button&gt;
    &lt;/div&gt;
  )
}

function mapStateToProps(state) {
  return state.demo;
}

function mapDispatchToProps(dispatch) {
  return {
    fetch(count){
      dispatch({type: 'demo/fetch', count});
    }
  }
}

export default connect(mapStateToProps, mapDispatchToProps)(App)
// index.js
import dva from 'dva';
import model from './model';
import App from './app';

const app = dva();

app.use({});

app.model(model);

app.router(() =&gt; &lt;App /&gt;);

app.start();
</code></pre></div><ul><li>ä½¿ç”¨ <code>redux</code> éœ€è¦æ‹†åˆ†å‡º<code>action</code>æ¨¡å—å’Œ<code>reducer</code>æ¨¡å—</li> <li><code>dva</code>å°†<code>action</code>å’Œ<code>reducer</code>å°è£…åˆ°<code>model</code>ä¸­ï¼Œå¼‚æ­¥æµç¨‹é‡‡ç”¨<code>Generator</code>å¤„ç†</li></ul> <h2 id="å…­ã€ä½¿ç”¨axiosç»Ÿä¸€å¤„ç†"><a href="#å…­ã€ä½¿ç”¨axiosç»Ÿä¸€å¤„ç†" class="header-anchor">#</a> å…­ã€ä½¿ç”¨axiosç»Ÿä¸€å¤„ç†</h2> <h3 id="_6-1-ç¤ºä¾‹ä»£ç "><a href="#_6-1-ç¤ºä¾‹ä»£ç " class="header-anchor">#</a> 6.1 ç¤ºä¾‹ä»£ç </h3> <div class="language- extra-class"><pre class="language-text"><code>// request.js
import axios from 'axios';
import NProgress from 'nprogress';
import { notification, message } from 'antd';
import { routerRedux } from 'dva/router';
import store from '../index';

/**
 * ä¸€ã€åŠŸèƒ½ï¼š
 * 1. ç»Ÿä¸€æ‹¦æˆªhttpé”™è¯¯è¯·æ±‚ç ï¼›
 * 2. ç»Ÿä¸€æ‹¦æˆªä¸šåŠ¡é”™è¯¯ä»£ç ï¼›
 * 3. ç»Ÿä¸€è®¾ç½®è¯·æ±‚å‰ç¼€
 * |-- æ¯ä¸ª http åŠ å‰ç¼€ baseURL = /api/v1ï¼Œä»é…ç½®æ–‡ä»¶ä¸­è·å– apiPrefix
 * 4. é…ç½®å¼‚æ­¥è¯·æ±‚è¿‡æ¸¡çŠ¶æ€ï¼šæ˜¾ç¤ºè“è‰²åŠ è½½æ¡è¡¨ç¤ºæ­£åœ¨è¯·æ±‚ä¸­ï¼Œé¿å…ç»™ç”¨æˆ·é¡µé¢å‡æ­»çš„ä¸å¥½ä½“éªŒã€‚
 * |-- ä½¿ç”¨ NProgress å·¥å…·åº“ã€‚
 *
 * äºŒã€å¼•åŒ…ï¼š
 * |-- axiosï¼šhttp è¯·æ±‚å·¥å…·åº“
 * |-- NProgressï¼šå¼‚æ­¥è¯·æ±‚è¿‡åº¦æ¡ï¼Œåœ¨æµè§ˆå™¨ä¸»ä½“éƒ¨åˆ†é¡¶éƒ¨æ˜¾ç¤ºè“è‰²å°æ¡
 * |-- notificationï¼šAntdç»„ä»¶ &gt; å¤„ç†é”™è¯¯å“åº”ç æç¤ºä¿¡æ¯
 * |-- routerReduxï¼šdva/routerå¯¹è±¡ï¼Œç”¨äºè·¯ç”±è·³è½¬ï¼Œé”™è¯¯å“åº”ç è·³è½¬ç›¸åº”é¡µé¢
 * |-- storeï¼šdvaä¸­å¯¹è±¡ï¼Œä½¿ç”¨é‡Œé¢çš„ dispatch å¯¹è±¡ï¼Œç”¨äºè§¦å‘è·¯ç”±è·³è½¬
 */

// è®¾ç½®å…¨å±€å‚æ•°ï¼Œå¦‚å“åº”è¶…å¸‚æ—¶é—´ï¼Œè¯·æ±‚å‰ç¼€ç­‰ã€‚
axios.defaults.timeout = 5000
axios.defaults.baseURL = '/api/v1';
axios.defaults.withCredentials = true;

// çŠ¶æ€ç é”™è¯¯ä¿¡æ¯
const codeMessage = {
  200: 'æœåŠ¡å™¨æˆåŠŸè¿”å›è¯·æ±‚çš„æ•°æ®ã€‚',
  201: 'æ–°å»ºæˆ–ä¿®æ”¹æ•°æ®æˆåŠŸã€‚',
  202: 'ä¸€ä¸ªè¯·æ±‚å·²ç»è¿›å…¥åå°æ’é˜Ÿï¼ˆå¼‚æ­¥ä»»åŠ¡ï¼‰ã€‚',
  204: 'åˆ é™¤æ•°æ®æˆåŠŸã€‚',
  400: 'å‘å‡ºçš„è¯·æ±‚æœ‰é”™è¯¯ï¼ŒæœåŠ¡å™¨æ²¡æœ‰è¿›è¡Œæ–°å»ºæˆ–ä¿®æ”¹æ•°æ®çš„æ“ä½œã€‚',
  401: 'ç”¨æˆ·æ²¡æœ‰æƒé™ï¼ˆä»¤ç‰Œã€ç”¨æˆ·åã€å¯†ç é”™è¯¯ï¼‰ã€‚',
  403: 'ç”¨æˆ·å¾—åˆ°æˆæƒï¼Œä½†æ˜¯è®¿é—®æ˜¯è¢«ç¦æ­¢çš„ã€‚',
  404: 'å‘å‡ºçš„è¯·æ±‚é’ˆå¯¹çš„æ˜¯ä¸å­˜åœ¨çš„è®°å½•ï¼ŒæœåŠ¡å™¨æ²¡æœ‰è¿›è¡Œæ“ä½œã€‚',
  406: 'è¯·æ±‚çš„æ ¼å¼ä¸å¯å¾—ã€‚',
  410: 'è¯·æ±‚çš„èµ„æºè¢«æ°¸ä¹…åˆ é™¤ï¼Œä¸”ä¸ä¼šå†å¾—åˆ°çš„ã€‚',
  422: 'å½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå‘ç”Ÿä¸€ä¸ªéªŒè¯é”™è¯¯ã€‚',
  500: 'æœåŠ¡å™¨å‘ç”Ÿé”™è¯¯ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨ã€‚',
  502: 'ç½‘å…³é”™è¯¯ã€‚',
  503: 'æœåŠ¡ä¸å¯ç”¨ï¼ŒæœåŠ¡å™¨æš‚æ—¶è¿‡è½½æˆ–ç»´æŠ¤ã€‚',
  504: 'ç½‘å…³è¶…æ—¶ã€‚',
};

// æ·»åŠ ä¸€ä¸ªè¯·æ±‚æ‹¦æˆªå™¨ï¼Œç”¨äºè®¾ç½®è¯·æ±‚è¿‡æ¸¡çŠ¶æ€
axios.interceptors.request.use((config) =&gt; {
  // è¯·æ±‚å¼€å§‹ï¼Œè“è‰²è¿‡æ¸¡æ»šåŠ¨æ¡å¼€å§‹å‡ºç°
  NProgress.start();
  return config;
}, (error) =&gt; {
  return Promise.reject(error);
});

// æ·»åŠ ä¸€ä¸ªè¿”å›æ‹¦æˆªå™¨
axios.interceptors.response.use((response) =&gt; {
  // è¯·æ±‚ç»“æŸï¼Œè“è‰²è¿‡æ¸¡æ»šåŠ¨æ¡æ¶ˆå¤±
  NProgress.done();
  return response;
}, (error) =&gt; {
  // è¯·æ±‚ç»“æŸï¼Œè“è‰²è¿‡æ¸¡æ»šåŠ¨æ¡æ¶ˆå¤±
  // å³ä½¿å‡ºç°å¼‚å¸¸ï¼Œä¹Ÿè¦è°ƒç”¨å…³é—­æ–¹æ³•ï¼Œå¦åˆ™ä¸€ç›´å¤„äºåŠ è½½çŠ¶æ€å¾ˆå¥‡æ€ª
  NProgress.done();
  return Promise.reject(error);
});

export default function request (opt) {
  // è°ƒç”¨ axios apiï¼Œç»Ÿä¸€æ‹¦æˆª
  return axios(opt)
    .then((response) =&gt;
      // &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; è¯·æ±‚æˆåŠŸ &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
      console.log(`ã€${opt.method} ${opt.url}ã€‘è¯·æ±‚æˆåŠŸï¼Œå“åº”æ•°æ®ï¼š%o`, response);

      // æ‰“å°ä¸šåŠ¡é”™è¯¯æç¤º
      if (response.data &amp;&amp; response.data.code != '0000') {
        message.error(response.data.message);
      }

      return { ...response.data };
    })
    .catch((error) =&gt; {
      // &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; è¯·æ±‚å¤±è´¥ &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
      // è¯·æ±‚é…ç½®å‘ç”Ÿçš„é”™è¯¯
      if (!error.response) {
        return console.log('Error', error.message);
      }

      // å“åº”æ—¶çŠ¶æ€ç å¤„ç†
      const status = error.response.status;
      const errortext = codeMessage[status] || error.response.statusText;

      notification.error({
        message: `è¯·æ±‚é”™è¯¯ ${status}`,
        description: errortext,
      });

      // å­˜åœ¨è¯·æ±‚ï¼Œä½†æ˜¯æœåŠ¡å™¨çš„è¿”å›ä¸€ä¸ªçŠ¶æ€ç ï¼Œå®ƒä»¬éƒ½åœ¨2xxä¹‹å¤–
      const { dispatch } = store;

      if (status === 401) {
        dispatch(routerRedux.push('/user/login'));
      } else if (status === 403) {
        dispatch(routerRedux.push('/exception/403'));
      } else if (status &lt;= 504 &amp;&amp; status &gt;= 500) {
        dispatch(routerRedux.push('/exception/500'));
      } else if (status &gt;= 404 &amp;&amp; status &lt; 422) {
        dispatch(routerRedux.push('/exception/404'));
      }

      // å¼€å‘æ—¶ä½¿ç”¨ï¼Œä¸Šçº¿æ—¶åˆ é™¤
      console.log(`ã€${opt.method} ${opt.url}ã€‘è¯·æ±‚å¤±è´¥ï¼Œå“åº”æ•°æ®ï¼š%o`, error.response);

      return { code: status, message: errortext };
    });
}
</code></pre></div><h3 id="_6-2-æ˜ç¡®å“åº”ä½“"><a href="#_6-2-æ˜ç¡®å“åº”ä½“" class="header-anchor">#</a> 6.2 æ˜ç¡®å“åº”ä½“</h3> <blockquote><p>ä»¥å¾®ä¿¡å°ç¨‹åºä¸ºä¾‹ï¼Œè¯·æ±‚å“åº”æ•°æ®åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</p></blockquote> <ul><li>ç½‘ç»œè¯·æ±‚æ˜¯å¦æˆåŠŸï¼›</li> <li>ä¸šåŠ¡åœºæ™¯å€¼ã€‚å³ä¾¿ç½‘ç»œè¯·æ±‚æˆåŠŸäº†ï¼Œä¸šåŠ¡å¤„ç†ä¸Šå¯èƒ½æœ‰æ—¶ä¹Ÿä¼šå‡ºé”™ï¼Œæ¯”å¦‚æ ¡éªŒä¸é€šè¿‡</li></ul> <p>æˆ‘ä»¬åœ¨æ‹¦æˆªå“åº”æ—¶è¦åˆ†åˆ«å¯¹è¿™ä¸¤éƒ¨åˆ†è¿›è¡Œå¤„ç†</p> <div class="language- extra-class"><pre class="language-text"><code>response = {
  status: 200,                // ç½‘ç»œè¯·æ±‚çŠ¶æ€ã€‚
  statusText: 'xxx',
  data: {
    code: '1001',             // ä¸šåŠ¡è¯·æ±‚çŠ¶æ€ã€‚è¿™é‡Œ '0000' è¡¨ç¤ºä¸šåŠ¡æ²¡é—®é¢˜ï¼Œå…¶å®ƒéƒ½æœ‰é—®é¢˜
    message: 'yyy',
    data: {  },
  }
}
</code></pre></div><h3 id="_6-3-ä¾èµ–åŒ…åˆ†æ"><a href="#_6-3-ä¾èµ–åŒ…åˆ†æ" class="header-anchor">#</a> 6.3 ä¾èµ–åŒ…åˆ†æ</h3> <div class="language- extra-class"><pre class="language-text"><code>import axios from 'axios';
import NProgress from 'nprogress';
import { notification, message } from 'antd';
import { routerRedux } from 'dva/router';
import store from '../index';
</code></pre></div><blockquote><p><code>import store from '../index';</code>è¿™æ˜¯ <code>dva</code> ä¸­å¯¼å‡ºçš„å¯¹è±¡ã€‚å³ä¸‹é¢ä»£ç æœ€ç»ˆå¯¼å‡ºçš„ <code>app._store</code>ï¼Œå¼•å…¥å®ƒæ˜¯å› ä¸º <code>dispatch</code> å¯¹è±¡åœ¨é‡Œé¢ï¼Œæˆ‘ä»¬éœ€è¦ dispatch å¯¹è±¡è¿›è¡Œè·¯ç”±è·³è½¬</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>// index.js
import dva from 'dva';
import { message } from 'antd';
import { createBrowserHistory as createHistory } from 'history';

// 1. Initialize
const app = dva({
  history: createHistory(),
});

// 2. Plugins
app.use(createLoading());

// 3. Model
app.model(require('./models/app/global').default);

// 4. Router
app.router(require('./router').default);

// 5. Start
app.start('#root');

export default app._store;
</code></pre></div><h3 id="_6-4-axios-å…¨å±€é…ç½®"><a href="#_6-4-axios-å…¨å±€é…ç½®" class="header-anchor">#</a> 6.4 axios å…¨å±€é…ç½®</h3> <div class="language- extra-class"><pre class="language-text"><code>// è®¾ç½®å…¨å±€å‚æ•°ï¼Œå¦‚å“åº”è¶…å¸‚æ—¶é—´ï¼Œè¯·æ±‚å‰ç¼€ç­‰ã€‚
axios.defaults.timeout = 5000
axios.defaults.baseURL = '/api/v1';
axios.defaults.withCredentials = true;
</code></pre></div><blockquote><p>axios å¯ä»¥è®¾ç½®å¾ˆå¤šå…¨å±€é…ç½®ï¼Œå…·ä½“å¯å‚é˜… https://segmentfault.com/a/1190000008470355</p></blockquote> <h3 id="_6-5-åŠ è½½-nprogress-è¿‡æ¸¡ç»„ä»¶"><a href="#_6-5-åŠ è½½-nprogress-è¿‡æ¸¡ç»„ä»¶" class="header-anchor">#</a> 6.5 åŠ è½½ NProgress è¿‡æ¸¡ç»„ä»¶</h3> <div class="language- extra-class"><pre class="language-text"><code>/ æ·»åŠ ä¸€ä¸ªè¯·æ±‚æ‹¦æˆªå™¨ï¼Œç”¨äºè®¾ç½®è¯·æ±‚è¿‡æ¸¡çŠ¶æ€
axios.interceptors.request.use((config) =&gt; {
  // è¯·æ±‚å¼€å§‹ï¼Œè“è‰²è¿‡æ¸¡æ»šåŠ¨æ¡å¼€å§‹å‡ºç°
  NProgress.start();
  return config;
}, (error) =&gt; {
  return Promise.reject(error);
});

// æ·»åŠ ä¸€ä¸ªè¿”å›æ‹¦æˆªå™¨
axios.interceptors.response.use((response) =&gt; {
  // è¯·æ±‚ç»“æŸï¼Œè“è‰²è¿‡æ¸¡æ»šåŠ¨æ¡æ¶ˆå¤±
  NProgress.done();
  return response;
}, (error) =&gt; {
  // è¯·æ±‚ç»“æŸï¼Œè“è‰²è¿‡æ¸¡æ»šåŠ¨æ¡æ¶ˆå¤±
  // å³ä½¿å‡ºç°å¼‚å¸¸ï¼Œä¹Ÿè¦è°ƒç”¨å…³é—­æ–¹æ³•ï¼Œå¦åˆ™ä¸€ç›´å¤„äºåŠ è½½çŠ¶æ€å¾ˆå¥‡æ€ª
  NProgress.done();
  return Promise.reject(error);
});
</code></pre></div><blockquote><p><code>NProgress</code> çš„ä½¿ç”¨ä¸»è¦æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œå½“è°ƒç”¨ <code>NProgress.start();</code> æ—¶åœ¨æµè§ˆå™¨é¡¶éƒ¨å°±ä¼šå‡ºç°è“è‰²å°æ¡ï¼Œå½“è°ƒç”¨ <code>NProgress.done();</code> è“è‰²å°æ¡å°±ä¼šæ¶ˆå¤±ã€‚æˆ‘ä»¬åˆ†åˆ«åœ¨è¯·æ±‚å¼€å§‹å’Œæ¥æ”¶åˆ°å“åº”è°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•</p></blockquote> <p><img src="https://upload-images.jianshu.io/upload_images/6693922-948c3efcfeeaf4fd.gif" alt="img"></p> <h3 id="_6-6-ç½‘ç»œè¯·æ±‚æˆåŠŸå¤„ç†"><a href="#_6-6-ç½‘ç»œè¯·æ±‚æˆåŠŸå¤„ç†" class="header-anchor">#</a> 6.6 ç½‘ç»œè¯·æ±‚æˆåŠŸå¤„ç†</h3> <div class="language- extra-class"><pre class="language-text"><code>.then((response) =&gt;
      // &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; è¯·æ±‚æˆåŠŸ &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
      console.log(`ã€${opt.method} ${opt.url}ã€‘è¯·æ±‚æˆåŠŸï¼Œå“åº”æ•°æ®ï¼š%o`, response);

      // æ‰“å°ä¸šåŠ¡é”™è¯¯æç¤º
      if (response.data &amp;&amp; response.data.code != '0000') {
        message.error(response.data.message);
      }

      return { ...response.data };
    })
</code></pre></div><blockquote><p>ç½‘ç»œè¯·æ±‚çŠ¶æ€ç ä¸º <code>200-300</code> è¡¨ç¤ºæˆåŠŸï¼Œæ­¤æ—¶è¿˜åº”è¯¥åˆ¤æ–­ä¸šåŠ¡å¤„ç†æ˜¯å¦æˆåŠŸã€‚è¿™ä¸ªæ ¹æ®å…·ä½“é¡¹ç›®å…·ä½“è§„å®šï¼Œæ¯”å¦‚å¾®ä¿¡å°ç¨‹åºæœ‰ä¸€å¥—åœºæ™¯å€¼ã€‚åœ¨å®é™…é¡¹ç›®ä¸­å¯ä»¥è‡ªè¡Œè§„å®š <code>code = '0000'</code> ä¸šåŠ¡å¤„ç†å®Œå…¨æ²¡é—®é¢˜ï¼Œ<code>code = '1111'</code>æ ¡éªŒä¸é€šè¿‡ï¼Œ<code>code = '2222'</code> æ•°æ®åº“å‡ºé”™ç­‰ç­‰ã€‚</p></blockquote> <ul><li>æœ€ååˆ«å¿˜äº†è¦è¿”å›å…·ä½“å¯¹è±¡ <code>{ ...response.data }</code></li></ul> <h3 id="_6-7-ç½‘ç»œè¯·æ±‚å¤±è´¥å¤„ç†"><a href="#_6-7-ç½‘ç»œè¯·æ±‚å¤±è´¥å¤„ç†" class="header-anchor">#</a> 6.7 ç½‘ç»œè¯·æ±‚å¤±è´¥å¤„ç†</h3> <div class="language- extra-class"><pre class="language-text"><code>// çŠ¶æ€ç é”™è¯¯ä¿¡æ¯
const codeMessage = {
  200: 'æœåŠ¡å™¨æˆåŠŸè¿”å›è¯·æ±‚çš„æ•°æ®ã€‚',
  201: 'æ–°å»ºæˆ–ä¿®æ”¹æ•°æ®æˆåŠŸã€‚',
  202: 'ä¸€ä¸ªè¯·æ±‚å·²ç»è¿›å…¥åå°æ’é˜Ÿï¼ˆå¼‚æ­¥ä»»åŠ¡ï¼‰ã€‚',
  204: 'åˆ é™¤æ•°æ®æˆåŠŸã€‚',
  400: 'å‘å‡ºçš„è¯·æ±‚æœ‰é”™è¯¯ï¼ŒæœåŠ¡å™¨æ²¡æœ‰è¿›è¡Œæ–°å»ºæˆ–ä¿®æ”¹æ•°æ®çš„æ“ä½œã€‚',
  401: 'ç”¨æˆ·æ²¡æœ‰æƒé™ï¼ˆä»¤ç‰Œã€ç”¨æˆ·åã€å¯†ç é”™è¯¯ï¼‰ã€‚',
  403: 'ç”¨æˆ·å¾—åˆ°æˆæƒï¼Œä½†æ˜¯è®¿é—®æ˜¯è¢«ç¦æ­¢çš„ã€‚',
  404: 'å‘å‡ºçš„è¯·æ±‚é’ˆå¯¹çš„æ˜¯ä¸å­˜åœ¨çš„è®°å½•ï¼ŒæœåŠ¡å™¨æ²¡æœ‰è¿›è¡Œæ“ä½œã€‚',
  406: 'è¯·æ±‚çš„æ ¼å¼ä¸å¯å¾—ã€‚',
  410: 'è¯·æ±‚çš„èµ„æºè¢«æ°¸ä¹…åˆ é™¤ï¼Œä¸”ä¸ä¼šå†å¾—åˆ°çš„ã€‚',
  422: 'å½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå‘ç”Ÿä¸€ä¸ªéªŒè¯é”™è¯¯ã€‚',
  500: 'æœåŠ¡å™¨å‘ç”Ÿé”™è¯¯ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨ã€‚',
  502: 'ç½‘å…³é”™è¯¯ã€‚',
  503: 'æœåŠ¡ä¸å¯ç”¨ï¼ŒæœåŠ¡å™¨æš‚æ—¶è¿‡è½½æˆ–ç»´æŠ¤ã€‚',
  504: 'ç½‘å…³è¶…æ—¶ã€‚',
};

// ...........

.catch((error) =&gt; {
      // &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; è¯·æ±‚å¤±è´¥ &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
      // è¯·æ±‚é…ç½®å‘ç”Ÿçš„é”™è¯¯
      if (!error.response) {
        return console.log('Error', error.message);
      }

      // å“åº”æ—¶çŠ¶æ€ç å¤„ç†
      const status = error.response.status;
      const errortext = codeMessage[status] || error.response.statusText;

      notification.error({
        message: `è¯·æ±‚é”™è¯¯ ${status}`,
        description: errortext,
      });

      // å­˜åœ¨è¯·æ±‚ï¼Œä½†æ˜¯æœåŠ¡å™¨çš„è¿”å›ä¸€ä¸ªçŠ¶æ€ç ï¼Œå®ƒä»¬éƒ½åœ¨2xxä¹‹å¤–
      const { dispatch } = store;

      if (status === 401) {
        dispatch(routerRedux.push('/user/login'));
      } else if (status === 403) {
        dispatch(routerRedux.push('/exception/403'));
      } else if (status &lt;= 504 &amp;&amp; status &gt;= 500) {
        dispatch(routerRedux.push('/exception/500'));
      } else if (status &gt;= 404 &amp;&amp; status &lt; 422) {
        dispatch(routerRedux.push('/exception/404'));
      }

      // å¼€å‘æ—¶ä½¿ç”¨ï¼Œä¸Šçº¿æ—¶åˆ é™¤
      console.log(`ã€${opt.method} ${opt.url}ã€‘è¯·æ±‚å¤±è´¥ï¼Œå“åº”æ•°æ®ï¼š%o`, error.response);

      return { code: status, message: errortext };
    });
</code></pre></div><ul><li>ç½‘ç»œè¯·æ±‚å¤±è´¥ï¼Œé¦–å…ˆéœ€è¦æ ¹æ® <code>status</code> æ‰“å°æç¤ºæ¶ˆæ¯ï¼Œå‘Šè¯‰ç”¨æˆ·ä¸ºä»€ä¹ˆè¯·æ±‚å¤±è´¥ã€‚å¦‚å“åº”ç ä¸º <code>401</code>ï¼Œé‚£ä¹ˆæç¤ºç”¨æˆ·çš„æ–‡å­—å°±ä¼šæ˜¯ ç”¨æˆ·æ²¡æœ‰æƒé™ï¼ˆä»¤ç‰Œã€ç”¨æˆ·åã€å¯†ç é”™è¯¯ï¼‰</li> <li>å¦‚æœæ˜¯ <code>401</code> é”™è¯¯ï¼Œè¡¨ç¤ºç”¨æˆ·æ²¡æœ‰æƒé™è®¿é—®æˆ–è€…ç”¨æˆ·åå¯†ç è¾“å…¥é”™è¯¯ï¼Œåº”è¯¥è·³è½¬åˆ°ç™»å½•é¡µé¢ï¼š`dispatch(routerRedux.push('/user/login'));</li></ul></div> <!---->  </div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/principle-docs/react/01-React-routeråŸç†.html" class="prev">React</a></span> <span class="next"><a href="/principle-docs/react/03-MobXæ€»ç»“.html">MobXæ€»ç»“</a>
      â†’
    </span></p></div>  <div class="el-dialog__wrapper" style="display:none;"><div role="dialog" aria-modal="true" aria-label="è¯·å…ˆé˜…è¯»è´­ä¹°åè®®" class="el-dialog el-dialog--center" style="margin-top:15vh;width:30%;"><div class="el-dialog__header"><span class="el-dialog__title">è¯·å…ˆé˜…è¯»è´­ä¹°åè®®</span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><!----><div class="el-dialog__footer"><span class="dialog-footer"><button disabled="disabled" type="button" class="el-button el-button--danger is-disabled" style="width:100%;"><!----><!----><span>æˆ‘å·²é˜…è¯»ï¼ˆ8sï¼‰</span></button></span></div></div></div> <div class="el-dialog__wrapper" style="display:none;"><div role="dialog" aria-modal="true" aria-label="ä»˜è´¹é˜…è¯»" class="el-dialog" style="margin-top:15vh;width:30%;"><div class="el-dialog__header"><span class="el-dialog__title">ä»˜è´¹é˜…è¯»</span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><!----><div class="el-dialog__footer"><span class="dialog-footer"><button disabled="disabled" type="button" class="el-button el-button--danger is-disabled" style="width:100%;"><!----><!----><span>ç¡® å®š</span></button></span></div></div></div> <div class="el-dialog__wrapper" style="display:none;"><div role="dialog" aria-modal="true" aria-label="dialog" class="el-dialog" style="margin-top:15vh;width:30%;"><div class="el-dialog__header"><span class="el-dialog__title"></span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><!----><!----></div></div> <img src="data:image/png;base64,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" class="theme-float-btn"></main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.f60bfc341.js" defer></script><script src="/assets/js/6.7f8a8777.js" defer></script><script src="/assets/js/3.9d86cf58.js" defer></script><script src="/assets/js/99.7d033614.js" defer></script><script src="/assets/js/11.fb060006.js" defer></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ä¸€ã€PromiseåŸºç¡€ç”¨æ³• | é¢è¯•æŒ‡å—</title>
    <meta name="description" content="å‰ç«¯é¢è¯•æŒ‡å—ï¼Œå‰ç«¯é¢è¯•é¢˜æ•´ç†ï¼ŒæŒ‰æ¨¡å—åˆ†ç±»æ•´ç†æ€»ç»“ï¼Œæ‰“é€ æœ€å…¨é¢çš„å‰ç«¯é¢è¯•é¢˜">
    <link rel="icon" href="/logo.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
  <meta name="apple-mobile-web-app-status-bar-style">

    <link rel="preload" href="/assets/css/0.styles.9ad7bc48.css" as="style"><link rel="preload" href="/assets/js/app.f60bfc34.js" as="script"><link rel="preload" href="/assets/js/6.7f8a8777.js" as="script"><link rel="preload" href="/assets/js/3.9d86cf58.js" as="script"><link rel="preload" href="/assets/js/88.fb19aa58.js" as="script"><link rel="preload" href="/assets/js/11.fb060006.js" as="script"><link rel="prefetch" href="/assets/js/1.9e1b498f.js"><link rel="prefetch" href="/assets/js/10.fbc04ea9.js"><link rel="prefetch" href="/assets/js/100.c06a0f53.js"><link rel="prefetch" href="/assets/js/101.54402ede.js"><link rel="prefetch" href="/assets/js/102.d3860a7d.js"><link rel="prefetch" href="/assets/js/103.51a83ab2.js"><link rel="prefetch" href="/assets/js/104.4107118f.js"><link rel="prefetch" href="/assets/js/105.aada2418.js"><link rel="prefetch" href="/assets/js/106.4ce7d3b7.js"><link rel="prefetch" href="/assets/js/107.ca87a327.js"><link rel="prefetch" href="/assets/js/108.df939701.js"><link rel="prefetch" href="/assets/js/109.9f0c8605.js"><link rel="prefetch" href="/assets/js/110.016c3eb7.js"><link rel="prefetch" href="/assets/js/111.ff5dbcc4.js"><link rel="prefetch" href="/assets/js/112.ab20caec.js"><link rel="prefetch" href="/assets/js/113.6c12e76f.js"><link rel="prefetch" href="/assets/js/114.48e1a019.js"><link rel="prefetch" href="/assets/js/115.f291caf1.js"><link rel="prefetch" href="/assets/js/116.0188d28e.js"><link rel="prefetch" href="/assets/js/117.9b579bae.js"><link rel="prefetch" href="/assets/js/118.89da516f.js"><link rel="prefetch" href="/assets/js/119.c70b5105.js"><link rel="prefetch" href="/assets/js/12.9774db85.js"><link rel="prefetch" href="/assets/js/120.fcf3186f.js"><link rel="prefetch" href="/assets/js/13.ac14541c.js"><link rel="prefetch" href="/assets/js/14.155007f0.js"><link rel="prefetch" href="/assets/js/15.2d9ec2b2.js"><link rel="prefetch" href="/assets/js/16.aec442e8.js"><link rel="prefetch" href="/assets/js/17.59c81a6b.js"><link rel="prefetch" href="/assets/js/18.c38ff446.js"><link rel="prefetch" href="/assets/js/19.8203bd99.js"><link rel="prefetch" href="/assets/js/20.103004c4.js"><link rel="prefetch" href="/assets/js/21.1e6e08c9.js"><link rel="prefetch" href="/assets/js/22.5abbfd40.js"><link rel="prefetch" href="/assets/js/23.4cd5fd4d.js"><link rel="prefetch" href="/assets/js/24.602403ee.js"><link rel="prefetch" href="/assets/js/25.da971f83.js"><link rel="prefetch" href="/assets/js/26.43589785.js"><link rel="prefetch" href="/assets/js/27.6d18f825.js"><link rel="prefetch" href="/assets/js/28.843b905f.js"><link rel="prefetch" href="/assets/js/29.81e33cc0.js"><link rel="prefetch" href="/assets/js/30.7a4491ed.js"><link rel="prefetch" href="/assets/js/31.4275e9d2.js"><link rel="prefetch" href="/assets/js/32.6e6c282b.js"><link rel="prefetch" href="/assets/js/33.35641348.js"><link rel="prefetch" href="/assets/js/34.7737e542.js"><link rel="prefetch" href="/assets/js/35.3d539e4d.js"><link rel="prefetch" href="/assets/js/36.78f70288.js"><link rel="prefetch" href="/assets/js/37.ed0997e2.js"><link rel="prefetch" href="/assets/js/38.6d35141d.js"><link rel="prefetch" href="/assets/js/39.3b4241bb.js"><link rel="prefetch" href="/assets/js/4.cda2fc13.js"><link rel="prefetch" href="/assets/js/40.dd7b6d84.js"><link rel="prefetch" href="/assets/js/41.05fcd6ed.js"><link rel="prefetch" href="/assets/js/42.24fc3ac4.js"><link rel="prefetch" href="/assets/js/43.27b59a40.js"><link rel="prefetch" href="/assets/js/44.ac552dd9.js"><link rel="prefetch" href="/assets/js/45.6b1e07c4.js"><link rel="prefetch" href="/assets/js/46.8bf4b340.js"><link rel="prefetch" href="/assets/js/47.57a13e6c.js"><link rel="prefetch" href="/assets/js/48.8ef881a7.js"><link rel="prefetch" href="/assets/js/49.b76df872.js"><link rel="prefetch" href="/assets/js/5.eb1f29dc.js"><link rel="prefetch" href="/assets/js/50.f04492e5.js"><link rel="prefetch" href="/assets/js/51.e000ebea.js"><link rel="prefetch" href="/assets/js/52.bfbd5e6e.js"><link rel="prefetch" href="/assets/js/53.fc0a60dd.js"><link rel="prefetch" href="/assets/js/54.a798cd42.js"><link rel="prefetch" href="/assets/js/55.5ccb6ae1.js"><link rel="prefetch" href="/assets/js/56.1605b000.js"><link rel="prefetch" href="/assets/js/57.79350f4e.js"><link rel="prefetch" href="/assets/js/58.dcff3859.js"><link rel="prefetch" href="/assets/js/59.a366020b.js"><link rel="prefetch" href="/assets/js/60.2c42a67f.js"><link rel="prefetch" href="/assets/js/61.4d471001.js"><link rel="prefetch" href="/assets/js/62.07f7a685.js"><link rel="prefetch" href="/assets/js/63.3774b497.js"><link rel="prefetch" href="/assets/js/64.d8437f45.js"><link rel="prefetch" href="/assets/js/65.eaf10ccb.js"><link rel="prefetch" href="/assets/js/66.74665605.js"><link rel="prefetch" href="/assets/js/67.072c35ca.js"><link rel="prefetch" href="/assets/js/68.764ab8cb.js"><link rel="prefetch" href="/assets/js/69.6a27592a.js"><link rel="prefetch" href="/assets/js/7.9a5c64fa.js"><link rel="prefetch" href="/assets/js/70.2e7f3527.js"><link rel="prefetch" href="/assets/js/71.c6365fbe.js"><link rel="prefetch" href="/assets/js/72.15cfe1be.js"><link rel="prefetch" href="/assets/js/73.d56ee920.js"><link rel="prefetch" href="/assets/js/74.f848ccac.js"><link rel="prefetch" href="/assets/js/75.905f5556.js"><link rel="prefetch" href="/assets/js/76.49d98a04.js"><link rel="prefetch" href="/assets/js/77.4b62003f.js"><link rel="prefetch" href="/assets/js/78.5a4046ff.js"><link rel="prefetch" href="/assets/js/79.eb3ec067.js"><link rel="prefetch" href="/assets/js/8.bccf8145.js"><link rel="prefetch" href="/assets/js/80.c8247597.js"><link rel="prefetch" href="/assets/js/81.69952221.js"><link rel="prefetch" href="/assets/js/82.4439fbe3.js"><link rel="prefetch" href="/assets/js/83.df1321d3.js"><link rel="prefetch" href="/assets/js/84.23d01b47.js"><link rel="prefetch" href="/assets/js/85.c983047a.js"><link rel="prefetch" href="/assets/js/86.29b0f2d4.js"><link rel="prefetch" href="/assets/js/87.12e2e192.js"><link rel="prefetch" href="/assets/js/89.ee2be7d8.js"><link rel="prefetch" href="/assets/js/9.ce1180ae.js"><link rel="prefetch" href="/assets/js/90.479f4d9d.js"><link rel="prefetch" href="/assets/js/91.619e0c8d.js"><link rel="prefetch" href="/assets/js/92.ae858703.js"><link rel="prefetch" href="/assets/js/93.f90a7ae1.js"><link rel="prefetch" href="/assets/js/94.8894adb4.js"><link rel="prefetch" href="/assets/js/95.683396f3.js"><link rel="prefetch" href="/assets/js/96.f65dc164.js"><link rel="prefetch" href="/assets/js/97.75bd77e0.js"><link rel="prefetch" href="/assets/js/98.892b530a.js"><link rel="prefetch" href="/assets/js/99.7d033614.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9ad7bc48.css">
  function hasClass(obj, cls) {
	return obj.className.match(new RegExp('(\\s|^)' + cls + '(\\s|$)'));
}

function addClass(obj, cls) {
	if (!this.hasClass(obj, cls)) obj.className += " " + cls;
}

function removeClass(obj, cls) {
	if (hasClass(obj, cls)) {
		var reg = new RegExp('(\\s|^)' + cls + '(\\s|$)');
		obj.className = obj.className.replace(reg, ' ');
	}
}

function toggleClass(obj,cls){
	if(hasClass(obj,cls)){
		removeClass(obj, cls);
	}else{
		addClass(obj, cls);
	}
}
function openSlider() {
	let node = document.querySelector(".theme-container");
	toggleClass(node, 'sidebar-open')
}
</head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button" onclick="openSlider()"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active">   </a>  <div class="links" style="max-width: 1309px; background: rgb(255, 255, 255);"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value="" class="" placeholder=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div><a href="/docs/base.html" class="nav-link">åŸºç¡€ç¯‡
      </a></div></div><div class="nav-item"><div><a href="/docs/simply.html" class="nav-link">âœ¨è¿›é˜¶ç¯‡
      </a></div></div><div class="nav-item"><div><a href="/excellent-docs/1-HTMLæ¨¡å—.html" class="nav-link">ğŸ”¥ç²¾é€‰ç¯‡
      </a></div></div><div class="nav-item"><div><a href="/docs/handwritten.html" class="nav-link">æ‰‹å†™ç¯‡
      </a></div></div><div class="nav-item"><div><a href="/qa/1-å‰ç«¯100é¢˜è‡ªæ£€.html" class="nav-link">è‡ªæ£€ç¯‡
      </a></div></div><div class="nav-item"><div><a href="/docs/questions.html" class="nav-link">é—®é¢˜ç¯‡
      </a></div></div><div class="nav-item"><div><a href="/interview-exp/å‰ç«¯é¢ç»æ±‡æ€».html" class="nav-link">é¢ç»ç¯‡
      </a></div></div><div class="nav-item"><div><a href="/days/æ¯æ—¥ä¸€é¢˜.html" class="nav-link">æ¯æ—¥ä¸€é¢˜
      </a></div></div><div class="nav-item"><div><a href="/docs/design-pattern.html" class="nav-link router-link-exact-active router-link-active" aria-current="page">è®¾è®¡æ¨¡å¼
      </a></div></div><div class="nav-item"><div><a href="/principle-docs/comprehensive/01-è™šæ‹ŸDOMåŸç†åˆ†æ.html" class="nav-link">åŸç†ç¯‡
      </a></div></div><div class="nav-item"><div><a href="/docs/detail-expain.html" class="nav-link">ç»¼åˆ
      </a></div></div><div class="nav-item"><div><a href="/algorithm-interview/note/01-å¿«é€Ÿä¸Šæ‰‹â€”â€”ä»0åˆ°1æŒæ¡ç®—æ³•é¢è¯•éœ€è¦çš„æ•°æ®ç»“æ„ï¼ˆä¸€ï¼‰.html" class="nav-link">ç®—æ³•ç¯‡
      </a></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ‹“å±•é˜…è¯»" class="dropdown-title"><span class="title">æ‹“å±•é˜…è¯»</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display: none;"><li class="dropdown-item"><h4>ä¸“é¢˜</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-base-docs/compute-docs/Linux.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        å‰ç«¯åŸºç¡€
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-mobile-docs/h5-docs/1-å¤§å‚ H5 å¼€å‘æ¦‚è¿°.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        ç§»åŠ¨ç«¯
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-css-inspiration-docs/css-docs/note/01-æµè§ˆå™¨.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        CSS
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-vue-docs/learn-vue-base/base/1-Vue CLI 3 é¡¹ç›®æ„å»ºåŸºç¡€.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        Vue
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-react-docs/react-web-action/01-å‰ç«¯å¼€å‘çš„å››ä¸ªæ—¶ä»£.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        React
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-engineering-docs/docs/npm-script.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        å‰ç«¯å·¥ç¨‹
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-micro-docs/docs/01-å¾®å‰ç«¯çš„è¯ç”Ÿ.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        å¾®å‰ç«¯
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-nodejs-docs/nodejs-docs/base/01-ç¯å¢ƒæ­å»º.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        NodeæŒ‡å—
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-ts-axios-docs/ts-axios/chapter1/" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        Typesctipt
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-algorithm-docs/algorithm/prepare/01-å¦‚ä½•ç³»ç»Ÿé«˜æ•ˆåœ°å­¦ä¹ æ•°æ®ç»“æ„ä¸ç®—æ³•.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        æ•°æ®ç»“æ„ä¸ç®—æ³•
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li></ul></li><li class="dropdown-item"><h4>å…¶ä»–</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-blog-docs/blog-docs/javascript/-Ajaxæ€»ç»“ç¯‡.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        æ—¥å¸¸ç§¯ç´¯
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://blog.poetries.top/archives/" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        åšå®¢æ–‡ç« 
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="https://blog.poetries.top/css-reference" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
        CSSå¯è§†åŒ–
        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->   <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/principle-docs/vue/01-ä»æºç è§£è¯»Vueç”Ÿå‘½å‘¨æœŸ.html" class="sidebar-link">ä»æºç è§£è¯»Vueç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="/principle-docs/vue/02-ç»„ä»¶çš„æœ¬è´¨.html" class="sidebar-link">ç»„ä»¶çš„æœ¬è´¨</a></li><li><a href="/principle-docs/vue/03-æœ‰çŠ¶æ€ç»„ä»¶çš„è®¾è®¡.html" class="sidebar-link">æœ‰çŠ¶æ€ç»„ä»¶çš„è®¾è®¡</a></li><li><a href="/principle-docs/vue/04-è®¾è®¡ VNode.html" class="sidebar-link">è®¾è®¡ VNode</a></li><li><a href="/principle-docs/vue/05-è¾…åŠ©åˆ›å»º VNode çš„ h å‡½æ•°.html" class="sidebar-link">è¾…åŠ©åˆ›å»º VNode çš„ h å‡½æ•°</a></li><li><a href="/principle-docs/vue/06-è‡ªå®šä¹‰æ¸²æŸ“å™¨å’Œå¼‚æ­¥æ¸²æŸ“.html" class="sidebar-link">è‡ªå®šä¹‰æ¸²æŸ“å™¨å’Œå¼‚æ­¥æ¸²æŸ“</a></li><li><a href="/principle-docs/vue/07-æ¸²æŸ“å™¨ä¹‹æŒ‚è½½.html" class="sidebar-link">æ¸²æŸ“å™¨ä¹‹æŒ‚è½½</a></li><li><a href="/principle-docs/vue/08-æ¸²æŸ“å™¨çš„æ ¸å¿ƒ Diff ç®—æ³•.html" class="sidebar-link">æ¸²æŸ“å™¨çš„æ ¸å¿ƒ Diff ç®—æ³•</a></li><li><a href="/principle-docs/vue/09-æ¸²æŸ“å™¨ä¹‹patch.html" class="sidebar-link">æ¸²æŸ“å™¨ä¹‹patch</a></li><li><a href="/principle-docs/vue/10-å›¾è§£ Vue å“åº”å¼åŸç†.html" class="sidebar-link">å›¾è§£ Vue å“åº”å¼åŸç†</a></li><li><a href="/principle-docs/vue/11-å›¾è§£ Vue å¼‚æ­¥æ›´æ–°.html" class="sidebar-link">å›¾è§£ Vue å¼‚æ­¥æ›´æ–°</a></li><li><a href="/principle-docs/vue/12-å‰–æ Vue å†…éƒ¨è¿è¡Œæœºåˆ¶.html" class="sidebar-link">å‰–æ Vue å†…éƒ¨è¿è¡Œæœºåˆ¶</a></li><li><a href="/principle-docs/vue/13-vueå“åº”å¼åŸç†æ¨¡æ‹Ÿ.html" class="sidebar-link">vueå“åº”å¼åŸç†æ¨¡æ‹Ÿ</a></li><li><a href="/principle-docs/vue/14-vueçŠ¶æ€ç®¡ç†ä¹‹vuex.html" class="sidebar-link">vueçŠ¶æ€ç®¡ç†ä¹‹vuex</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>React</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/principle-docs/react/01-React-routeråŸç†.html" class="sidebar-link">React</a></li><li><a href="/principle-docs/react/02-Dvaæ€»ç»“.html" class="sidebar-link">Dvaæ€»ç»“</a></li><li><a href="/principle-docs/react/03-MobXæ€»ç»“.html" class="sidebar-link">MobXæ€»ç»“</a></li><li><a href="/principle-docs/react/04-æµ…æredux-sagaä¸­é—´ä»¶åŠç”¨æ³•.html" class="sidebar-link">æµ…æredux</a></li><li><a href="/principle-docs/react/05-Reduxä¹‹æµ…æä¸­é—´ä»¶.html" class="sidebar-link">Reduxä¹‹æµ…æä¸­é—´ä»¶</a></li><li><a href="/principle-docs/react/06-Reduxä¹‹æºç åˆ†æ.html" class="sidebar-link">Reduxä¹‹æºç åˆ†æ</a></li><li><a href="/principle-docs/react/07-Reduxä¹‹å¼‚æ­¥ActionåŠæ“ä½œ.html" class="sidebar-link">Reduxä¹‹å¼‚æ­¥ActionåŠæ“ä½œ</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Webpack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/principle-docs/webpack/01-Webpack4æ‰“åŒ…æœºåˆ¶åŸç†è§£æ.html" class="sidebar-link">Webpack4æ‰“åŒ…æœºåˆ¶åŸç†è§£æ</a></li><li><a href="/principle-docs/webpack/02-webpackä¸­çš„HMRçƒ­æ›´æ–°åŸç†å‰–æ.html" class="sidebar-link">webpackä¸­çš„HMRçƒ­æ›´æ–°åŸç†å‰–æ</a></li><li><a href="/principle-docs/webpack/03-ä»æºç çª¥æ¢Webpack4.xåŸç†.html" class="sidebar-link">ä»æºç çª¥æ¢Webpack4.xåŸç†</a></li><li><a href="/principle-docs/webpack/04-å®ç°webpackå°å‹æ‰“åŒ…å·¥å…·.html" class="sidebar-link">å®ç°webpackå°å‹æ‰“åŒ…å·¥å…·</a></li><li><a href="/principle-docs/webpack/05-BabelåŸç†åŠå…¶ä½¿ç”¨.html" class="sidebar-link">BabelåŸç†åŠå…¶ä½¿ç”¨</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ç»¼åˆ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/principle-docs/comprehensive/01-è™šæ‹ŸDOMåŸç†åˆ†æ.html" class="sidebar-link">è™šæ‹ŸDOMåŸç†åˆ†æ</a></li><li><a href="/principle-docs/comprehensive/02-setTimeoutå®ç°åŸç†å’Œä½¿ç”¨æ³¨æ„.html" class="sidebar-link">setTimeoutå®ç°åŸç†å’Œä½¿ç”¨æ³¨æ„</a></li><li><a href="/principle-docs/comprehensive/03-æµ…æPromiseåŸç†.html" class="active sidebar-link">æµ…æPromiseåŸç†</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/principle-docs/comprehensive/03-æµ…æPromiseåŸç†.html#ä¸€ã€promiseåŸºç¡€ç”¨æ³•" class="sidebar-link">ä¸€ã€PromiseåŸºç¡€ç”¨æ³•</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/principle-docs/comprehensive/03-æµ…æPromiseåŸç†.html#_1-1-åŸºæœ¬ç”¨æ³•" class="sidebar-link">1.1 åŸºæœ¬ç”¨æ³•</a></li><li class="sidebar-sub-header"><a href="/principle-docs/comprehensive/03-æµ…æPromiseåŸç†.html#_1-2-promiseæ•è·é”™è¯¯" class="sidebar-link">1.2 promiseæ•è·é”™è¯¯</a></li><li class="sidebar-sub-header"><a href="/principle-docs/comprehensive/03-æµ…æPromiseåŸç†.html#_1-3-å¸¸ç”¨çš„promiseæ–¹æ³•" class="sidebar-link">1.3 å¸¸ç”¨çš„promiseæ–¹æ³•</a></li><li class="sidebar-sub-header"><a href="/principle-docs/comprehensive/03-æµ…æPromiseåŸç†.html#_1-4-async-awaitç®€åŒ–å†™æ³•" class="sidebar-link">1.4 Async/awaitç®€åŒ–å†™æ³•</a></li><li class="sidebar-sub-header"><a href="/principle-docs/comprehensive/03-æµ…æPromiseåŸç†.html#_1-5-generator" class="sidebar-link">1.5 Generator</a></li></ul></li><li class="sidebar-sub-header"><a href="/principle-docs/comprehensive/03-æµ…æPromiseåŸç†.html#äºŒã€promiseå®ç°åŸç†å‰–æ" class="sidebar-link">äºŒã€Promiseå®ç°åŸç†å‰–æ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/principle-docs/comprehensive/03-æµ…æPromiseåŸç†.html#_2-1-promiseæ ‡å‡†" class="sidebar-link">2.1 Promiseæ ‡å‡†</a></li><li class="sidebar-sub-header"><a href="/principle-docs/comprehensive/03-æµ…æPromiseåŸç†.html#_2-2-å®ç°promise" class="sidebar-link">2.2 å®ç°Promise</a></li><li class="sidebar-sub-header"><a href="/principle-docs/comprehensive/03-æµ…æPromiseåŸç†.html#_2-3-æç®€promiseé›å½¢" class="sidebar-link">2.3 æç®€promiseé›å½¢</a></li><li class="sidebar-sub-header"><a href="/principle-docs/comprehensive/03-æµ…æPromiseåŸç†.html#_2-4-åŠ å…¥å»¶æ—¶æœºåˆ¶" class="sidebar-link">2.4 åŠ å…¥å»¶æ—¶æœºåˆ¶</a></li><li class="sidebar-sub-header"><a href="/principle-docs/comprehensive/03-æµ…æPromiseåŸç†.html#_2-5-åŠ å…¥çŠ¶æ€" class="sidebar-link">2.5 åŠ å…¥çŠ¶æ€</a></li><li class="sidebar-sub-header"><a href="/principle-docs/comprehensive/03-æµ…æPromiseåŸç†.html#_2-6-é“¾å¼promise" class="sidebar-link">2.6 é“¾å¼Promise</a></li><li class="sidebar-sub-header"><a href="/principle-docs/comprehensive/03-æµ…æPromiseåŸç†.html#_2-7-å¤±è´¥å¤„ç†" class="sidebar-link">2.7 å¤±è´¥å¤„ç†</a></li><li class="sidebar-sub-header"><a href="/principle-docs/comprehensive/03-æµ…æPromiseåŸç†.html#_2-8-å¼‚å¸¸å¤„ç†" class="sidebar-link">2.8 å¼‚å¸¸å¤„ç†</a></li><li class="sidebar-sub-header"><a href="/principle-docs/comprehensive/03-æµ…æPromiseåŸç†.html#_2-9-å®Œæ•´å®ç°" class="sidebar-link">2.9 å®Œæ•´å®ç°</a></li><li class="sidebar-sub-header"><a href="/principle-docs/comprehensive/03-æµ…æPromiseåŸç†.html#_2-10-å°ç»“" class="sidebar-link">2.10 å°ç»“</a></li></ul></li></ul></li><li><a href="/principle-docs/comprehensive/04-æµè§ˆå™¨æ¸²æŸ“åŸç†.html" class="sidebar-link">æµè§ˆå™¨æ¸²æŸ“åŸç†</a></li><li><a href="/principle-docs/comprehensive/05-å‰ç«¯é¢è¯•ä¹‹MVVMæµ…æ.html" class="sidebar-link">å‰ç«¯é¢è¯•ä¹‹MVVMæµ…æ</a></li><li><a href="/principle-docs/comprehensive/06-å‰ç«¯é¢è¯•ä¹‹ç»„ä»¶åŒ–.html" class="sidebar-link">å‰ç«¯é¢è¯•ä¹‹ç»„ä»¶åŒ–</a></li><li><a href="/principle-docs/comprehensive/07-è™šæ‹ŸDOMï¼ˆä¸€ï¼‰.html" class="sidebar-link">è™šæ‹ŸDOMï¼ˆä¸€ï¼‰</a></li><li><a href="/principle-docs/comprehensive/08-è™šæ‹ŸDOMï¼ˆäºŒï¼‰.html" class="sidebar-link">è™šæ‹ŸDOMï¼ˆäºŒï¼‰</a></li><li><a href="/principle-docs/comprehensive/09-å‰ç«¯æ€§èƒ½ä¹‹Performance.html" class="sidebar-link">å‰ç«¯æ€§èƒ½ä¹‹Performance</a></li></ul></section></li></ul> </aside> <main class="page"> <div id="container" class="theme-default-content"><div class="content__default"><h2 id="ä¸€ã€promiseåŸºç¡€ç”¨æ³•"><a href="#ä¸€ã€promiseåŸºç¡€ç”¨æ³•" class="header-anchor">#</a> ä¸€ã€PromiseåŸºç¡€ç”¨æ³•</h2> <h3 id="_1-1-åŸºæœ¬ç”¨æ³•"><a href="#_1-1-åŸºæœ¬ç”¨æ³•" class="header-anchor">#</a> 1.1 åŸºæœ¬ç”¨æ³•</h3> <div class="language- extra-class"><pre class="language-text"><code>new Promise(function(resolve, reject) {
    //å¾…å¤„ç†çš„å¼‚æ­¥é€»è¾‘
    //å¤„ç†ç»“æŸåï¼Œè°ƒç”¨resolveæˆ–rejectæ–¹æ³•
})
</code></pre></div><blockquote><ul><li>æ–°å»ºä¸€ä¸ª<code>promise</code>å¾ˆç®€å•ï¼Œåªéœ€è¦<code>new</code>ä¸€ä¸ª<code>promise</code>å¯¹è±¡å³å¯ã€‚æ‰€ä»¥<code>promise</code>æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”ä¼šè¿”å›<code>promise</code>å¯¹è±¡ï¼Œè¿™å°±ç»™é“¾å¼è°ƒç”¨æä¾›äº†åŸºç¡€</li> <li>å…¶å®<code>Promise</code>å‡½æ•°çš„ä½¿å‘½ï¼Œå°±æ˜¯æ„å»ºå‡ºå®ƒçš„å®ä¾‹ï¼Œå¹¶ä¸”è´Ÿè´£å¸®æˆ‘ä»¬ç®¡ç†è¿™äº›å®ä¾‹ã€‚è€Œè¿™äº›å®ä¾‹æœ‰ä»¥ä¸‹ä¸‰ç§çŠ¶æ€ï¼š</li></ul></blockquote> <ul><li><code>pending</code>: åˆå§‹çŠ¶æ€ï¼Œä½å±¥è¡Œæˆ–æ‹’ç»</li> <li><code>fulfilled</code>: æ„å‘³ç€æ“ä½œæˆåŠŸå®Œæˆ</li> <li><code>rejected</code>: æ„å‘³ç€æ“ä½œå¤±è´¥</li></ul> <blockquote><p><code>pending</code> çŠ¶æ€çš„ <code>Promise</code>å¯¹è±¡å¯èƒ½ä»¥ <code>fulfilled</code>çŠ¶æ€è¿”å›äº†ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯èƒ½è¢«æŸç§ç†ç”±ï¼ˆå¼‚å¸¸ä¿¡æ¯ï¼‰æ‹’ç»ï¼ˆ<code>reject</code>ï¼‰äº†ã€‚å½“å…¶ä¸­ä»»ä¸€ç§æƒ…å†µå‡ºç°æ—¶ï¼Œ<code>Promise</code> å¯¹è±¡çš„ <code>then</code> æ–¹æ³•ç»‘å®šçš„å¤„ç†æ–¹æ³•ï¼ˆhandlersï¼‰å°±ä¼šè¢«è°ƒç”¨ï¼Œthenæ–¹æ³•åˆ†åˆ«æŒ‡å®šäº†<code>resolve</code>æ–¹æ³•å’Œ<code>reject</code>æ–¹æ³•çš„å›è°ƒå‡½æ•°</p></blockquote> <p><img src="https://mengera88.github.io/images/promises.png" alt="img"></p> <div class="language- extra-class"><pre class="language-text"><code>var promise = new Promise(function(resolve, reject) {
  if (/* å¼‚æ­¥æ“ä½œæˆåŠŸ */){
    resolve(value);
  } else {
    reject(error);
  }
});
promise.then(function(value) {
  // å¦‚æœè°ƒç”¨äº†resolveæ–¹æ³•ï¼Œæ‰§è¡Œæ­¤å‡½æ•°
}, function(value) {
  // å¦‚æœè°ƒç”¨äº†rejectæ–¹æ³•ï¼Œæ‰§è¡Œæ­¤å‡½æ•°
});
</code></pre></div><blockquote><p>ä¸Šè¿°ä»£ç å¾ˆæ¸…æ™°çš„å±•ç¤ºäº†<code>promise</code>å¯¹è±¡è¿è¡Œçš„æœºåˆ¶ã€‚ä¸‹é¢å†çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼š</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>var getJSON = function(url) {
  var promise = new Promise(function(resolve, reject){
    var client = new XMLHttpRequest();
    client.open(&quot;GET&quot;, url);
    client.onreadystatechange = handler;
    client.responseType = &quot;json&quot;;
    client.setRequestHeader(&quot;Accept&quot;, &quot;application/json&quot;);
    client.send();
    function handler() {
      if (this.status === 200) {
              resolve(this.response);
          } else {
              reject(new Error(this.statusText));
          }
    };
  });
  return promise;
};
getJSON(&quot;/posts.json&quot;).then(function(json) {
  console.log('Contents: ' + json);
}, function(error) {
  console.error('å‡ºé”™äº†', error);
});
</code></pre></div><blockquote><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>resolve</code>æ–¹æ³•å’Œ<code>reject</code>æ–¹æ³•è°ƒç”¨æ—¶ï¼Œéƒ½å¸¦æœ‰å‚æ•°ã€‚å®ƒä»¬çš„å‚æ•°ä¼šè¢«ä¼ é€’ç»™å›è°ƒå‡½æ•°ã€‚<code>reject</code>æ–¹æ³•çš„å‚æ•°é€šå¸¸æ˜¯<code>Error</code>å¯¹è±¡çš„å®ä¾‹ï¼Œè€Œ<code>resolve</code>æ–¹æ³•çš„å‚æ•°é™¤äº†æ­£å¸¸çš„å€¼ä»¥å¤–ï¼Œè¿˜å¯èƒ½æ˜¯å¦ä¸€ä¸ª<code>Promise</code>å®ä¾‹ï¼Œæ¯”å¦‚åƒä¸‹é¢è¿™æ ·ã€‚</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>var p1 = new Promise(function(resolve, reject){
  // ... some code
});
var p2 = new Promise(function(resolve, reject){
  // ... some code
  resolve(p1);
})
</code></pre></div><blockquote><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>p1</code>å’Œ<code>p2</code>éƒ½æ˜¯<code>Promise</code>çš„å®ä¾‹ï¼Œä½†æ˜¯<code>p2</code>çš„<code>resolve</code>æ–¹æ³•å°†<code>p1</code>ä½œä¸ºå‚æ•°ï¼Œè¿™æ—¶<code>p1</code>çš„çŠ¶æ€å°±ä¼šä¼ é€’ç»™<code>p2</code>ã€‚å¦‚æœè°ƒç”¨çš„æ—¶å€™ï¼Œ<code>p1</code>çš„çŠ¶æ€æ˜¯<code>pending</code>ï¼Œé‚£ä¹ˆ<code>p2</code>çš„å›è°ƒå‡½æ•°å°±ä¼šç­‰å¾…<code>p1</code>çš„çŠ¶æ€æ”¹å˜ï¼›å¦‚æœ<code>p1</code>çš„çŠ¶æ€å·²ç»æ˜¯<code>fulfilled</code>æˆ–è€…<code>rejected</code>ï¼Œé‚£ä¹ˆ<code>p2</code>çš„å›è°ƒå‡½æ•°å°†ä¼šç«‹åˆ»æ‰§è¡Œ</p></blockquote> <h3 id="_1-2-promiseæ•è·é”™è¯¯"><a href="#_1-2-promiseæ•è·é”™è¯¯" class="header-anchor">#</a> 1.2 promiseæ•è·é”™è¯¯</h3> <blockquote><p><code>Promise.prototype.catch</code>æ–¹æ³•æ˜¯<code>Promise.prototype.then(null, rejection)</code>çš„åˆ«åï¼Œç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>getJSON(&quot;/visa.json&quot;).then(function(result) {
  // some code
}).catch(function(error) {
  // å¤„ç†å‰ä¸€ä¸ªå›è°ƒå‡½æ•°è¿è¡Œæ—¶å‘ç”Ÿçš„é”™è¯¯
  console.log('å‡ºé”™å•¦ï¼', error);
});
</code></pre></div><blockquote><p><code>Promise</code>å¯¹è±¡çš„é”™è¯¯å…·æœ‰â€œå†’æ³¡â€æ€§è´¨ï¼Œä¼šä¸€ç›´å‘åä¼ é€’ï¼Œç›´åˆ°è¢«æ•è·ä¸ºæ­¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé”™è¯¯æ€»æ˜¯ä¼šè¢«ä¸‹ä¸€ä¸ª<code>catch</code>è¯­å¥æ•è·</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>getJSON(&quot;/visa.json&quot;).then(function(json) {
  return json.name;
}).then(function(name) {
  // proceed
}).catch(function(error) {
    //å¤„ç†å‰é¢ä»»ä¸€ä¸ªthenå‡½æ•°æŠ›å‡ºçš„é”™è¯¯
});
</code></pre></div><h3 id="_1-3-å¸¸ç”¨çš„promiseæ–¹æ³•"><a href="#_1-3-å¸¸ç”¨çš„promiseæ–¹æ³•" class="header-anchor">#</a> 1.3 å¸¸ç”¨çš„promiseæ–¹æ³•</h3> <p><strong>Promise.allæ–¹æ³•</strong></p> <blockquote><p><code>Promise.all</code>æ–¹æ³•ç”¨äºå°†å¤šä¸ª<code>Promise</code>å®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„<code>Promise</code>å®ä¾‹</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>var p = Promise.all([p1,p2,p3]);
</code></pre></div><ul><li>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Promise.all</code>æ–¹æ³•æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œ<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>éƒ½æ˜¯<code>Promise</code>å¯¹è±¡çš„å®ä¾‹ã€‚ï¼ˆ<code>Promise.all</code>æ–¹æ³•çš„å‚æ•°ä¸ä¸€å®šæ˜¯æ•°ç»„ï¼Œä½†æ˜¯å¿…é¡»å…·æœ‰<code>iterator</code>æ¥å£ï¼Œä¸”è¿”å›çš„æ¯ä¸ªæˆå‘˜éƒ½æ˜¯<code>Promise</code>å®ä¾‹ã€‚ï¼‰</li></ul> <blockquote><p><code>p</code>çš„çŠ¶æ€ç”±<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>å†³å®šï¼Œåˆ†æˆä¸¤ç§æƒ…å†µ</p></blockquote> <ul><li>åªæœ‰<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>çš„çŠ¶æ€éƒ½å˜æˆ<code>fulfilled</code>ï¼Œ<code>p</code>çš„çŠ¶æ€æ‰ä¼šå˜æˆ<code>fulfilled</code>ï¼Œæ­¤æ—¶<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ•°ç»„ï¼Œä¼ é€’ç»™<code>p</code>çš„å›è°ƒå‡½æ•°</li> <li>åªè¦<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>ä¹‹ä¸­æœ‰ä¸€ä¸ªè¢«<code>rejected</code>ï¼Œ<code>p</code>çš„çŠ¶æ€å°±å˜æˆ<code>rejected</code>ï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªè¢«<code>reject</code>çš„å®ä¾‹çš„è¿”å›å€¼ï¼Œä¼šä¼ é€’ç»™pçš„å›è°ƒå‡½æ•°</li></ul> <div class="language- extra-class"><pre class="language-text"><code>// ç”Ÿæˆä¸€ä¸ªPromiseå¯¹è±¡çš„æ•°ç»„
var promises = [2, 3, 5, 7, 11, 13].map(function(id){
  return getJSON(&quot;/get/addr&quot; + id + &quot;.json&quot;);
});
Promise.all(promises).then(function(posts) {
  // ...
}).catch(function(reason){
  // ...
});
</code></pre></div><p><strong>Promise.raceæ–¹æ³•</strong></p> <blockquote><p><code>Promise.race</code>æ–¹æ³•åŒæ ·æ˜¯å°†å¤šä¸ª<code>Promise</code>å®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„<code>Promise</code>å®ä¾‹ã€‚</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>var p = Promise.race([p1,p2,p3]);
</code></pre></div><blockquote><p>ä¸Šé¢ä»£ç ä¸­ï¼Œåªè¦<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>ä¹‹ä¸­æœ‰ä¸€ä¸ªå®ä¾‹ç‡å…ˆæ”¹å˜çŠ¶æ€ï¼Œpçš„çŠ¶æ€å°±è·Ÿç€æ”¹å˜ã€‚é‚£ä¸ªç‡å…ˆæ”¹å˜çš„Promiseå®ä¾‹çš„è¿”å›å€¼ï¼Œå°±ä¼ é€’ç»™pçš„è¿”å›å€¼</p></blockquote> <ul><li>å¦‚æœ<code>Promise.all</code>æ–¹æ³•å’Œ<code>Promise.race</code>æ–¹æ³•çš„å‚æ•°ï¼Œä¸æ˜¯<code>Promise</code>å®ä¾‹ï¼Œå°±ä¼šå…ˆè°ƒç”¨ä¸‹é¢è®²åˆ°çš„<code>Promise.resolve</code>æ–¹æ³•ï¼Œå°†å‚æ•°è½¬ä¸º<code>Promise</code>å®ä¾‹ï¼Œå†è¿›ä¸€æ­¥å¤„ç†</li></ul> <p><strong>Promise.resolve</strong></p> <blockquote><p>æœ‰æ—¶éœ€è¦å°†ç°æœ‰å¯¹è±¡è½¬ä¸º<code>Promise</code>å¯¹è±¡ï¼Œ<code>Promise.resolve</code>æ–¹æ³•å°±èµ·åˆ°è¿™ä¸ªä½œç”¨</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>var jsPromise = Promise.resolve($.ajax('/whatever.json'));
</code></pre></div><blockquote><p>ä¸Šé¢ä»£ç å°†<code>jQuery</code>ç”Ÿæˆ<code>deferred</code>å¯¹è±¡ï¼Œè½¬ä¸ºä¸€ä¸ªæ–°çš„<code>ES6</code>çš„<code>Promise</code>å¯¹è±¡</p></blockquote> <ul><li>å¦‚æœ<code>Promise.resolve</code>æ–¹æ³•çš„å‚æ•°ï¼Œä¸æ˜¯å…·æœ‰<code>then</code>æ–¹æ³•çš„å¯¹è±¡ï¼ˆåˆç§°<code>thenable</code>å¯¹è±¡ï¼‰ï¼Œåˆ™è¿”å›ä¸€ä¸ªæ–°çš„<code>Promise</code>å¯¹è±¡ï¼Œä¸”å®ƒçš„çŠ¶æ€ä¸º<code>fulfilled</code>ã€‚</li></ul> <div class="language- extra-class"><pre class="language-text"><code>var p = Promise.resolve('Hello');
p.then(function (s){
  console.log(s)
});
// Hello
</code></pre></div><ul><li>ä¸Šé¢ä»£ç ç”Ÿæˆä¸€ä¸ªæ–°çš„<code>Promise</code>å¯¹è±¡çš„å®ä¾‹<code>p</code>ï¼Œå®ƒçš„çŠ¶æ€ä¸º<code>fulfilled</code>ï¼Œæ‰€ä»¥å›è°ƒå‡½æ•°ä¼šç«‹å³æ‰§è¡Œï¼Œ<code>Promise.resolve</code>æ–¹æ³•çš„å‚æ•°å°±æ˜¯å›è°ƒå‡½æ•°çš„å‚æ•°</li> <li>å¦‚æœ<code>Promise.resolve</code>æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ª<code>Promise</code>å¯¹è±¡çš„å®ä¾‹ï¼Œåˆ™ä¼šè¢«åŸå°ä¸åŠ¨åœ°è¿”å›</li> <li><code>Promise.reject(reason)</code>æ–¹æ³•ä¹Ÿä¼šè¿”å›ä¸€ä¸ªæ–°çš„<code>Promise</code>å®ä¾‹ï¼Œè¯¥å®ä¾‹çš„çŠ¶æ€ä¸º<code>rejected</code>ã€‚<code>Promise.reject</code>æ–¹æ³•çš„å‚æ•°<code>reason</code>ï¼Œä¼šè¢«ä¼ é€’ç»™å®ä¾‹çš„å›è°ƒå‡½æ•°</li></ul> <div class="language- extra-class"><pre class="language-text"><code>var p = Promise.reject('å‡ºé”™å•¦');
p.then(null, function (error){
  console.log(error)
});
// å‡ºé”™äº†
</code></pre></div><h3 id="_1-4-async-awaitç®€åŒ–å†™æ³•"><a href="#_1-4-async-awaitç®€åŒ–å†™æ³•" class="header-anchor">#</a> 1.4 Async/awaitç®€åŒ–å†™æ³•</h3> <div class="language- extra-class"><pre class="language-text"><code>function getDataAsync (url) {
    return new Promise((resolve, reject) =&gt; {
        setTimeout(() =&gt; {
            var res = {
                url: url,
                data: Math.random()
            }
            resolve(res)
        }, 1000)
    })
}
async function getData () {
    var res1 = await getDataAsync('/page/1?param=123')
    console.log(res1)
    var res2 = await getDataAsync(`/page/2?param=${res1.data}`)
    console.log(res2)
    var res3 = await getDataAsync(`/page/2?param=${res2.data}`)
    console.log(res3)
}
</code></pre></div><blockquote><p><code>async/await</code> æ˜¯åŸºäº <code>Promise</code> çš„ï¼Œå› ä¸ºä½¿ç”¨ <code>async</code> ä¿®é¥°çš„æ–¹æ³•æœ€ç»ˆè¿”å›ä¸€ä¸ª <code>Promise</code>ï¼Œ å®é™…ä¸Šï¼Œ<code>async/await</code> å¯ä»¥çœ‹åšæ˜¯ä½¿ç”¨ <code>Generator</code> å‡½æ•°å¤„ç†å¼‚æ­¥çš„è¯­æ³•ç³–ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ <code>Generator</code> å‡½æ•°å¤„ç†å¼‚æ­¥</p></blockquote> <h3 id="_1-5-generator"><a href="#_1-5-generator" class="header-anchor">#</a> 1.5 Generator</h3> <p>é¦–å…ˆå¼‚æ­¥å‡½æ•°ä¾ç„¶æ˜¯ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>function getDataAsync (url) {
    return new Promise((resolve, reject) =&gt; {
        setTimeout(() =&gt; {
            var res = {
                url: url,
                data: Math.random()
            }
            resolve(res)
        }, 1000)
    })
}
</code></pre></div><blockquote><p>ä½¿ç”¨ <code>Generator</code> å‡½æ•°å¯ä»¥è¿™æ ·å†™</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>function * getData () {
    var res1 = yield getDataAsync('/page/1?param=123')
    console.log(res1)
    var res2 = yield getDataAsync(`/page/2?param=${res1.data}`)
    console.log(res2)
    var res3 = yield getDataAsync(`/page/2?param=${res2.data}`)
    console.log(res3))
}
</code></pre></div><p>ç„¶åæˆ‘ä»¬è¿™æ ·é€æ­¥æ‰§è¡Œ</p> <div class="language- extra-class"><pre class="language-text"><code>var g = getData()
g.next().value.then(res1 =&gt; {
    g.next(res1).value.then(res2 =&gt; {
        g.next(res2).value.then(() =&gt; {
            g.next()
        })
    })
})
</code></pre></div><blockquote><p>ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬é€æ­¥è°ƒç”¨éå†å™¨çš„ <code>next()</code> æ–¹æ³•ï¼Œç”±äºæ¯ä¸€ä¸ª <code>next()</code> æ–¹æ³•è¿”å›å€¼çš„ <code>value</code> å±æ€§ä¸ºä¸€ä¸ª <code>Promise</code> å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ºå…¶æ·»åŠ  <code>then</code> æ–¹æ³•ï¼Œ åœ¨ <code>then</code>æ–¹æ³•é‡Œé¢æ¥ç€è¿è¡Œ <code>next</code> æ–¹æ³•æŒªç§»éå†å™¨æŒ‡é’ˆï¼Œç›´åˆ° <code>Generator</code> å‡½æ•°è¿è¡Œå®Œæˆï¼Œå®é™…ä¸Šï¼Œè¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬ä¸å¿…æ‰‹åŠ¨å®Œæˆï¼Œå¯ä»¥å°è£…æˆä¸€ä¸ªç®€å•çš„æ‰§è¡Œå™¨</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>function run (gen) {
    var g = gen()

    function next (data) {
        var res = g.next(data)
        if (res.done) return res.value
        res.value.then((data) =&gt; {
            next(data)
        })
    }

    next()

}
</code></pre></div><blockquote><p><code>run</code>æ–¹æ³•ç”¨æ¥è‡ªåŠ¨è¿è¡Œå¼‚æ­¥çš„ <code>Generator</code> å‡½æ•°ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹è°ƒç”¨çš„è¿‡ç¨‹ã€‚è¿™æ ·æˆ‘ä»¬å°±ä¸å¿…æ‰‹åŠ¨æ‰§è¡Œ <code>Generator</code> å‡½æ•°äº†ã€‚ æœ‰äº† <code>run</code> æ–¹æ³•ï¼Œæˆ‘ä»¬åªéœ€è¦è¿™æ ·è¿è¡Œ getData æ–¹æ³•</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>run(getData)
</code></pre></div><blockquote><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠå¼‚æ­¥æ“ä½œå°è£…åˆ° <code>Generator</code> å‡½æ•°å†…éƒ¨ï¼Œä½¿ç”¨ <code>run</code> æ–¹æ³•ä½œä¸º <code>Generator</code> å‡½æ•°çš„è‡ªæ‰§è¡Œå™¨ï¼Œæ¥å¤„ç†å¼‚æ­¥ã€‚å…¶å®æˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œ <code>async/await</code> æ–¹æ³•ç›¸æ¯”äº <code>Generator</code> å¤„ç†å¼‚æ­¥çš„æ–¹å¼ï¼Œæœ‰å¾ˆå¤šç›¸ä¼¼çš„åœ°æ–¹ï¼Œåªä¸è¿‡ <code>async/await</code> åœ¨è¯­ä¹‰åŒ–æ–¹é¢æ›´åŠ æ˜æ˜¾ï¼ŒåŒæ—¶ <code>async/await</code> ä¸éœ€è¦æˆ‘ä»¬æ‰‹å†™æ‰§è¡Œå™¨ï¼Œå…¶å†…éƒ¨å·²ç»å¸®æˆ‘ä»¬å°è£…å¥½äº†ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¯´ <code>async/await</code> æ˜¯ <code>Generator</code> å‡½æ•°å¤„ç†å¼‚æ­¥çš„è¯­æ³•ç³–äº†</p></blockquote> <h2 id="äºŒã€promiseå®ç°åŸç†å‰–æ"><a href="#äºŒã€promiseå®ç°åŸç†å‰–æ" class="header-anchor">#</a> äºŒã€Promiseå®ç°åŸç†å‰–æ</h2> <h3 id="_2-1-promiseæ ‡å‡†"><a href="#_2-1-promiseæ ‡å‡†" class="header-anchor">#</a> 2.1 Promiseæ ‡å‡†</h3> <ul><li><code>Promise</code> è§„èŒƒæœ‰å¾ˆå¤šï¼Œå¦‚<code>Promise/A</code>ï¼Œ<code>Promise/B</code>ï¼Œ<code>Promise/D</code>ä»¥åŠ <code>Promise/A</code> çš„å‡çº§ç‰ˆ <code>Promise/A+</code>ã€‚<code>ES6</code>ä¸­é‡‡ç”¨äº† <code>Promise/A+</code> è§„èŒƒ</li></ul> <p>ä¸­æ–‡ç‰ˆè§„èŒƒ: <a href="http://www.ituring.com.cn/article/66566" target="_blank" rel="noopener noreferrer">Promises/A+è§„èŒƒ(ä¸­æ–‡)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>Promiseæ ‡å‡†è§£è¯»</strong></p> <ul><li>ä¸€ä¸ª<code>promise</code>çš„å½“å‰çŠ¶æ€åªèƒ½æ˜¯<code>pending</code>ã€<code>fulfilled</code>å’Œ<code>rejected</code>ä¸‰ç§ä¹‹ä¸€ã€‚çŠ¶æ€æ”¹å˜åªèƒ½æ˜¯<code>pending</code>åˆ°<code>fulfilled</code>æˆ–è€…<code>pending</code>åˆ°<code>rejected</code>ã€‚çŠ¶æ€æ”¹å˜ä¸å¯é€†</li> <li><code>promise</code>çš„<code>then</code>æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºè¯¥<code>promise</code>çŠ¶æ€æ”¹å˜æ—¶çš„å›è°ƒ(<code>promise.then(onFulfilled, onRejected)</code>)ã€‚<code>then</code>æ–¹æ³•è¿”å›ä¸€ä¸ª<code>promise</code>ã€‚<code>then</code> æ–¹æ³•å¯ä»¥è¢«åŒä¸€ä¸ª <code>promise</code> è°ƒç”¨å¤šæ¬¡</li></ul> <h3 id="_2-2-å®ç°promise"><a href="#_2-2-å®ç°promise" class="header-anchor">#</a> 2.2 å®ç°Promise</h3> <p><strong>æ„é€ å‡½æ•°</strong></p> <div class="language- extra-class"><pre class="language-text"><code>function Promise(resolver) {}
</code></pre></div><p><strong>åŸå‹æ–¹æ³•</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Promise.prototype.then = function() {}
Promise.prototype.catch = function() {}
</code></pre></div><p><strong>é™æ€æ–¹æ³•</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Promise.resolve = function() {}
Promise.reject = function() {}
Promise.all = function() {}
Promise.race = function() {}
</code></pre></div><h3 id="_2-3-æç®€promiseé›å½¢"><a href="#_2-3-æç®€promiseé›å½¢" class="header-anchor">#</a> 2.3 æç®€promiseé›å½¢</h3> <div class="language- extra-class"><pre class="language-text"><code>function Promise(fn) {
    var value = null,
        callbacks = [];  //callbacksä¸ºæ•°ç»„ï¼Œå› ä¸ºå¯èƒ½åŒæ—¶æœ‰å¾ˆå¤šä¸ªå›è°ƒ
    this.then = function (onFulfilled) {
        callbacks.push(onFulfilled);
    };
    function resolve(value) {
        callbacks.forEach(function (callback) {
            callback(value);
        });
    }
    fn(resolve);
}
</code></pre></div><p><strong>å¤§è‡´çš„é€»è¾‘æ˜¯è¿™æ ·çš„</strong></p> <ul><li>è°ƒç”¨<code>then</code>æ–¹æ³•ï¼Œå°†æƒ³è¦åœ¨<code>Promise</code>å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶æ‰§è¡Œçš„å›è°ƒæ”¾å…¥<code>callbacks</code>é˜Ÿåˆ—ï¼Œå…¶å®ä¹Ÿå°±æ˜¯æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œå¯ä»¥å‘è§‚å¯Ÿè€…æ¨¡å¼æ–¹å‘æ€è€ƒ</li> <li>åˆ›å»º<code>Promise</code>å®ä¾‹æ—¶ä¼ å…¥çš„å‡½æ•°ä¼šè¢«èµ‹äºˆä¸€ä¸ªå‡½æ•°ç±»å‹çš„å‚æ•°ï¼Œå³<code>resolve</code>ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå‚æ•°<code>value</code>ï¼Œä»£è¡¨å¼‚æ­¥æ“ä½œè¿”å›çš„ç»“æœï¼Œå½“ä¸€æ­¥æ“ä½œæ‰§è¡ŒæˆåŠŸåï¼Œç”¨æˆ·ä¼šè°ƒç”¨<code>resolve</code>æ–¹æ³•ï¼Œè¿™æ—¶å€™å…¶å®çœŸæ­£æ‰§è¡Œçš„æ“ä½œæ˜¯å°†<code>callbacks</code>é˜Ÿåˆ—ä¸­çš„å›è°ƒä¸€ä¸€æ‰§è¡Œ</li></ul> <div class="language- extra-class"><pre class="language-text"><code>//ä¾‹1
function getUserId() {
    return new Promise(function(resolve) {
        //å¼‚æ­¥è¯·æ±‚
        http.get(url, function(results) {
            resolve(results.id)
        })
    })
}
getUserId().then(function(id) {
    //ä¸€äº›å¤„ç†
})
// ç»“åˆä¾‹å­1åˆ†æ

// fn å°±æ˜¯getUserIdå‡½æ•°
function Promise(fn) {
    var value = null,
        callbacks = [];  //callbacksä¸ºæ•°ç»„ï¼Œå› ä¸ºå¯èƒ½åŒæ—¶æœ‰å¾ˆå¤šä¸ªå›è°ƒ

    // å½“ç”¨æˆ·è°ƒç”¨getUserId().thençš„æ—¶å€™å¼€å§‹æ³¨å†Œä¼ è¿›æ¥çš„å›è°ƒå‡½æ•°
    // onFulfilledå°±æ˜¯ä¾‹å­ä¸­çš„function(id){}
    // æŠŠthençš„å›è°ƒå‡½æ•°æ”¶é›†èµ·æ¥ åœ¨resolveçš„æ—¶å€™è°ƒç”¨
    this.then = function (onFulfilled) {
        callbacks.push(onFulfilled);
    };

    // valueæ˜¯fnå‡½æ•°æ‰§è¡Œåè¿”å›çš„å€¼
    function resolve(value) {
        // callbacksæ˜¯ä¼ ç»™thençš„å›è°ƒå‡½æ•°å°±æ˜¯ä¾‹å­ä¸­çš„function(id){}
        // éå†ç”¨æˆ·é€šè¿‡thenä¼ é€’è¿›æ¥çš„å›è°ƒå‡½æ•°æŠŠresolveæˆåŠŸçš„ç»“æœè¿”å›ç»™thenè°ƒç”¨å³then(function(data){ console.log(data) }) è¿™é‡Œçš„dataå°±æ˜¯é€šè¿‡è¿™é‡Œè°ƒç”¨è¿”å›
        callbacks.forEach(function (callback) {
            callback(value);
        });
    }

    //æ‰§è¡Œfnå‡½æ•°å³getUserId()å¹¶ä¸”ä¼ å…¥å‡½æ•°å‚æ•°resolve å½“fnæ‰§è¡Œå®Œæˆè¿”å›çš„å€¼ä¼ é€’ç»™resolveå‡½æ•°
    fn(resolve);
}
</code></pre></div><blockquote><p>ç»“åˆä¾‹1ä¸­çš„ä»£ç æ¥çœ‹ï¼Œé¦–å…ˆ<code>new Promise</code>æ—¶ï¼Œä¼ ç»™<code>promise</code>çš„å‡½æ•°å‘é€å¼‚æ­¥è¯·æ±‚ï¼Œæ¥ç€è°ƒç”¨<code>promise</code>å¯¹è±¡çš„<code>then</code>å±æ€§ï¼Œæ³¨å†Œè¯·æ±‚æˆåŠŸçš„å›è°ƒå‡½æ•°ï¼Œç„¶åå½“å¼‚æ­¥è¯·æ±‚å‘é€æˆåŠŸæ—¶ï¼Œè°ƒç”¨<code>resolve(results.id)</code>æ–¹æ³•, è¯¥æ–¹æ³•æ‰§è¡Œ<code>then</code>æ–¹æ³•æ³¨å†Œçš„å›è°ƒæ•°ç»„</p></blockquote> <ul><li><code>then</code>æ–¹æ³•åº”è¯¥èƒ½å¤Ÿé“¾å¼è°ƒç”¨ï¼Œä½†æ˜¯ä¸Šé¢çš„æœ€åŸºç¡€ç®€å•çš„ç‰ˆæœ¬æ˜¾ç„¶æ— æ³•æ”¯æŒé“¾å¼è°ƒç”¨ã€‚æƒ³è®©<code>then</code>æ–¹æ³•æ”¯æŒé“¾å¼è°ƒç”¨ï¼Œå…¶å®ä¹Ÿæ˜¯å¾ˆç®€å•çš„</li></ul> <div class="language- extra-class"><pre class="language-text"><code>this.then = function (onFulfilled) {
    callbacks.push(onFulfilled);
    return this;
};
</code></pre></div><blockquote><p>åªè¦ç®€å•ä¸€å¥è¯å°±å¯ä»¥å®ç°ç±»ä¼¼ä¸‹é¢çš„é“¾å¼è°ƒç”¨</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>// ä¾‹2
getUserId().then(function (id) {
    // ä¸€äº›å¤„ç†
}).then(function (id) {
    // ä¸€äº›å¤„ç†
});
</code></pre></div><h3 id="_2-4-åŠ å…¥å»¶æ—¶æœºåˆ¶"><a href="#_2-4-åŠ å…¥å»¶æ—¶æœºåˆ¶" class="header-anchor">#</a> 2.4 åŠ å…¥å»¶æ—¶æœºåˆ¶</h3> <blockquote><p>ä¸Šè¿°ä»£ç å¯èƒ½è¿˜å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœåœ¨<code>then</code>æ–¹æ³•æ³¨å†Œå›è°ƒä¹‹å‰ï¼Œ<code>resolve</code>å‡½æ•°å°±æ‰§è¡Œäº†ï¼Œæ€ä¹ˆåŠï¼Ÿæ¯”å¦‚<code>promise</code>å†…éƒ¨çš„å‡½æ•°æ˜¯åŒæ­¥å‡½æ•°</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>// ä¾‹3
function getUserId() {
    return new Promise(function (resolve) {
        resolve(9876);
    });
}
getUserId().then(function (id) {
    // ä¸€äº›å¤„ç†
});
</code></pre></div><blockquote><p>è¿™æ˜¾ç„¶æ˜¯ä¸å…è®¸çš„ï¼Œ<code>Promises/A+</code>è§„èŒƒæ˜ç¡®è¦æ±‚å›è°ƒéœ€è¦é€šè¿‡å¼‚æ­¥æ–¹å¼æ‰§è¡Œï¼Œç”¨ä»¥ä¿è¯ä¸€è‡´å¯é çš„æ‰§è¡Œé¡ºåºã€‚å› æ­¤æˆ‘ä»¬è¦åŠ å…¥ä¸€äº›å¤„ç†ï¼Œä¿è¯åœ¨<code>resolve</code>æ‰§è¡Œä¹‹å‰ï¼Œ<code>then</code>æ–¹æ³•å·²ç»æ³¨å†Œå®Œæ‰€æœ‰çš„å›è°ƒã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·æ”¹é€ ä¸‹<code>resolve</code>å‡½æ•°:</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>function resolve(value) {
    setTimeout(function() {
        callbacks.forEach(function (callback) {
            callback(value);
        });
    }, 0)
}
</code></pre></div><blockquote><p>ä¸Šè¿°ä»£ç çš„æ€è·¯ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯é€šè¿‡<code>setTimeout</code>æœºåˆ¶ï¼Œå°†<code>resolve</code>ä¸­æ‰§è¡Œå›è°ƒçš„é€»è¾‘æ”¾ç½®åˆ°<code>JS</code>ä»»åŠ¡é˜Ÿåˆ—æœ«å°¾ï¼Œä»¥ä¿è¯åœ¨<code>resolve</code>æ‰§è¡Œæ—¶ï¼Œ<code>then</code>æ–¹æ³•çš„å›è°ƒå‡½æ•°å·²ç»æ³¨å†Œå®Œæˆ</p></blockquote> <ul><li>ä½†æ˜¯ï¼Œè¿™æ ·å¥½åƒè¿˜å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¯ä»¥ç»†æƒ³ä¸€ä¸‹ï¼šå¦‚æœ<code>Promise</code>å¼‚æ­¥æ“ä½œå·²ç»æˆåŠŸï¼Œè¿™æ—¶ï¼Œåœ¨å¼‚æ­¥æ“ä½œæˆåŠŸä¹‹å‰æ³¨å†Œçš„å›è°ƒéƒ½ä¼šæ‰§è¡Œï¼Œä½†æ˜¯åœ¨<code>Promise</code>å¼‚æ­¥æ“ä½œæˆåŠŸè¿™ä¹‹åè°ƒç”¨çš„<code>then</code>æ³¨å†Œçš„å›è°ƒå°±å†ä¹Ÿä¸ä¼šæ‰§è¡Œäº†ï¼Œè¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„</li></ul> <h3 id="_2-5-åŠ å…¥çŠ¶æ€"><a href="#_2-5-åŠ å…¥çŠ¶æ€" class="header-anchor">#</a> 2.5 åŠ å…¥çŠ¶æ€</h3> <p>æˆ‘ä»¬å¿…é¡»åŠ å…¥çŠ¶æ€æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯å¤§å®¶ç†ŸçŸ¥çš„<code>pending</code>ã€<code>fulfilled</code>ã€<code>rejected</code></p> <blockquote><p><code>Promises/A+</code>è§„èŒƒä¸­çš„<code>2.1 Promise States</code>ä¸­æ˜ç¡®è§„å®šäº†ï¼Œ<code>pending</code>å¯ä»¥è½¬åŒ–ä¸º<code>fulfilled</code>æˆ–<code>rejected</code>å¹¶ä¸”åªèƒ½è½¬åŒ–ä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœ<code>pending</code>è½¬åŒ–åˆ°<code>fulfilled</code>çŠ¶æ€ï¼Œé‚£ä¹ˆå°±ä¸èƒ½å†è½¬åŒ–åˆ°r<code>ejected</code>ã€‚å¹¶ä¸”<code>fulfilled</code>å’Œ<code>rejected</code>çŠ¶æ€åªèƒ½ç”±<code>pending</code>è½¬åŒ–è€Œæ¥ï¼Œä¸¤è€…ä¹‹é—´ä¸èƒ½äº’ç›¸è½¬æ¢</p></blockquote> <p><img src="https://mengera88.github.io/images/promiseState.png" alt="img"></p> <div class="language- extra-class"><pre class="language-text"><code>//æ”¹è¿›åçš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š

function Promise(fn) {
    var state = 'pending',
        value = null,
        callbacks = [];
    this.then = function (onFulfilled) {
        if (state === 'pending') {
            callbacks.push(onFulfilled);
            return this;
        }
        onFulfilled(value);
        return this;
    };
    function resolve(newValue) {
        value = newValue;
        state = 'fulfilled';
        setTimeout(function () {
            callbacks.forEach(function (callback) {
                callback(value);
            });
        }, 0);
    }
    fn(resolve);
}
</code></pre></div><blockquote><p>ä¸Šè¿°ä»£ç çš„æ€è·¯æ˜¯è¿™æ ·çš„ï¼š<code>resolve</code>æ‰§è¡Œæ—¶ï¼Œä¼šå°†çŠ¶æ€è®¾ç½®ä¸º<code>fulfilled</code>ï¼Œåœ¨æ­¤ä¹‹åè°ƒç”¨<code>then</code>æ·»åŠ çš„æ–°å›è°ƒï¼Œéƒ½ä¼šç«‹å³æ‰§è¡Œ</p></blockquote> <h3 id="_2-6-é“¾å¼promise"><a href="#_2-6-é“¾å¼promise" class="header-anchor">#</a> 2.6 é“¾å¼Promise</h3> <blockquote><p>å¦‚æœç”¨æˆ·åœ¨<code>then</code>å‡½æ•°é‡Œé¢æ³¨å†Œçš„ä»ç„¶æ˜¯ä¸€ä¸ª<code>Promise</code>ï¼Œè¯¥å¦‚ä½•è§£å†³ï¼Ÿæ¯”å¦‚ä¸‹é¢çš„ä¾‹4</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>// ä¾‹4
getUserId()
    .then(getUserJobById)
    .then(function (job) {
        // å¯¹jobçš„å¤„ç†
    });
function getUserJobById(id) {
    return new Promise(function (resolve) {
        http.get(baseUrl + id, function(job) {
            resolve(job);
        });
    });
}
</code></pre></div><ul><li>è¿™ç§åœºæ™¯ç›¸ä¿¡ç”¨è¿‡<code>promise</code>çš„äººéƒ½çŸ¥é“ä¼šæœ‰å¾ˆå¤šï¼Œé‚£ä¹ˆç±»ä¼¼è¿™ç§å°±æ˜¯æ‰€è°“çš„é“¾å¼<code>Promise</code></li> <li>é“¾å¼<code>Promise</code>æ˜¯æŒ‡åœ¨å½“å‰<code>promise</code>è¾¾åˆ°<code>fulfilled</code>çŠ¶æ€åï¼Œå³å¼€å§‹è¿›è¡Œä¸‹ä¸€ä¸ª<code>promise</code>ï¼ˆåé‚»<code>promise</code>ï¼‰ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è¡”æ¥å½“å‰<code>promise</code>å’Œåé‚»<code>promise</code>å‘¢ï¼Ÿï¼ˆè¿™æ˜¯è¿™é‡Œçš„éš¾ç‚¹</li> <li>åªè¦åœ¨<code>then</code>æ–¹æ³•é‡Œé¢<code>return</code>ä¸€ä¸ª<code>promise</code>å°±å¥½å•¦ã€‚<code>Promises/A+</code>è§„èŒƒä¸­çš„<code>2.2.7</code>å°±æ˜¯è¿™æ ·</li></ul> <blockquote><p>ä¸‹é¢æ¥çœ‹çœ‹è¿™æ®µæš—è—ç„æœºçš„<code>then</code>æ–¹æ³•å’Œ<code>resolve</code>æ–¹æ³•æ”¹é€ ä»£ç </p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>function Promise(fn) {
    var state = 'pending',
        value = null,
        callbacks = [];
    this.then = function (onFulfilled) {
        return new Promise(function (resolve) {
            handle({
                onFulfilled: onFulfilled || null,
                resolve: resolve
            });
        });
    };
    function handle(callback) {
        if (state === 'pending') {
            callbacks.push(callback);
            return;
        }
        //å¦‚æœthenä¸­æ²¡æœ‰ä¼ é€’ä»»ä½•ä¸œè¥¿
        if(!callback.onFulfilled) {
            callback.resolve(value);
            return;
        }
        var ret = callback.onFulfilled(value);
        callback.resolve(ret);
    }

    function resolve(newValue) {
        if (newValue &amp;&amp; (typeof newValue === 'object' || typeof newValue === 'function')) {
            var then = newValue.then;
            if (typeof then === 'function') {
                then.call(newValue, resolve);
                return;
            }
        }
        state = 'fulfilled';
        value = newValue;
        setTimeout(function () {
            callbacks.forEach(function (callback) {
                handle(callback);
            });
        }, 0);
    }
    fn(resolve);
}
</code></pre></div><blockquote><p>æˆ‘ä»¬ç»“åˆä¾‹4çš„ä»£ç ï¼Œåˆ†æä¸‹ä¸Šé¢çš„ä»£ç é€»è¾‘ï¼Œä¸ºäº†æ–¹ä¾¿é˜…è¯»ï¼Œæˆ‘æŠŠä¾‹4çš„ä»£ç è´´åœ¨è¿™é‡Œ</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>// ä¾‹4
getUserId()
    .then(getUserJobById)
    .then(function (job) {
        // å¯¹jobçš„å¤„ç†
    });
function getUserJobById(id) {
    return new Promise(function (resolve) {
        http.get(baseUrl + id, function(job) {
            resolve(job);
        });
    });
}
</code></pre></div><ul><li><code>then</code>æ–¹æ³•ä¸­ï¼Œåˆ›å»ºå¹¶è¿”å›äº†æ–°çš„<code>Promise</code>å®ä¾‹ï¼Œè¿™æ˜¯ä¸²è¡Œ<code>Promis</code>eçš„åŸºç¡€ï¼Œå¹¶ä¸”æ”¯æŒé“¾å¼è°ƒç”¨</li> <li><code>handle</code>æ–¹æ³•æ˜¯<code>promise</code>å†…éƒ¨çš„æ–¹æ³•ã€‚<code>then</code>æ–¹æ³•ä¼ å…¥çš„å½¢å‚<code>onFulfilled</code>ä»¥åŠåˆ›å»ºæ–°<code>Promise</code>å®ä¾‹æ—¶ä¼ å…¥çš„<code>resolve</code>å‡è¢«<code>push</code>åˆ°å½“å‰<code>promise</code>çš„<code>callbacks</code>é˜Ÿåˆ—ä¸­ï¼Œè¿™æ˜¯è¡”æ¥å½“å‰<code>promise</code>å’Œåé‚»<code>promise</code>çš„å…³é”®æ‰€åœ¨</li> <li><code>getUserId</code>ç”Ÿæˆçš„<code>promise</code>ï¼ˆç®€ç§°<code>getUserId promise</code>ï¼‰å¼‚æ­¥æ“ä½œæˆåŠŸï¼Œæ‰§è¡Œå…¶å†…éƒ¨æ–¹æ³•<code>resolve</code>ï¼Œä¼ å…¥çš„å‚æ•°æ­£æ˜¯å¼‚æ­¥æ“ä½œçš„ç»“æœ<code>id</code></li> <li>è°ƒç”¨<code>handle</code>æ–¹æ³•å¤„ç†<code>callbacks</code>é˜Ÿåˆ—ä¸­çš„å›è°ƒï¼š<code>getUserJobById</code>æ–¹æ³•ï¼Œç”Ÿæˆæ–°çš„<code>promise</code>ï¼ˆg<code>etUserJobById promise</code>ï¼‰</li> <li>æ‰§è¡Œä¹‹å‰ç”±<code>getUserId promise</code>çš„<code>then</code>æ–¹æ³•ç”Ÿæˆçš„æ–°<code>promise</code>(ç§°ä¸º<code>bridge promise</code>)çš„<code>resolve</code>æ–¹æ³•ï¼Œä¼ å…¥å‚æ•°ä¸º<code>getUserJobById promise</code>ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä¼šå°†è¯¥<code>resolve</code>æ–¹æ³•ä¼ å…¥<code>getUserJobById promise</code>çš„<code>then</code>æ–¹æ³•ä¸­ï¼Œå¹¶ç›´æ¥è¿”å›</li> <li>åœ¨<code>getUserJobById promise</code>å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶ï¼Œæ‰§è¡Œå…¶<code>callbacks</code>ä¸­çš„å›è°ƒï¼š<code>getUserId bridge promise</code>ä¸­çš„<code>resolve</code>æ–¹æ³•</li> <li>æœ€åæ‰§è¡Œ<code>getUserId bridge promise</code>çš„åé‚»<code>promise</code>çš„<code>callbacks</code>ä¸­çš„å›è°ƒ</li></ul> <h3 id="_2-7-å¤±è´¥å¤„ç†"><a href="#_2-7-å¤±è´¥å¤„ç†" class="header-anchor">#</a> 2.7 å¤±è´¥å¤„ç†</h3> <blockquote><p>åœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶ï¼Œæ ‡è®°å…¶çŠ¶æ€ä¸º<code>rejected</code>ï¼Œå¹¶æ‰§è¡Œæ³¨å†Œçš„å¤±è´¥å›è°ƒ</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>//ä¾‹5
function getUserId() {
    return new Promise(function(resolve) {
        //å¼‚æ­¥è¯·æ±‚
        http.get(url, function(error, results) {
            if (error) {
                reject(error);
            }
            resolve(results.id)
        })
    })
}
getUserId().then(function(id) {
    //ä¸€äº›å¤„ç†
}, function(error) {
    console.log(error)
})
</code></pre></div><blockquote><p>æœ‰äº†ä¹‹å‰å¤„ç†<code>fulfilled</code>çŠ¶æ€çš„ç»éªŒï¼Œæ”¯æŒé”™è¯¯å¤„ç†å˜å¾—å¾ˆå®¹æ˜“,åªéœ€è¦åœ¨æ³¨å†Œå›è°ƒã€å¤„ç†çŠ¶æ€å˜æ›´ä¸Šéƒ½è¦åŠ å…¥æ–°çš„é€»è¾‘</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>function Promise(fn) {
    var state = 'pending',
        value = null,
        callbacks = [];
    this.then = function (onFulfilled, onRejected) {
        return new Promise(function (resolve, reject) {
            handle({
                onFulfilled: onFulfilled || null,
                onRejected: onRejected || null,
                resolve: resolve,
                reject: reject
            });
        });
    };
    function handle(callback) {
        if (state === 'pending') {
            callbacks.push(callback);
            return;
        }
        var cb = state === 'fulfilled' ? callback.onFulfilled : callback.onRejected,
            ret;
        if (cb === null) {
            cb = state === 'fulfilled' ? callback.resolve : callback.reject;
            cb(value);
            return;
        }
        ret = cb(value);
        callback.resolve(ret);
    }
    function resolve(newValue) {
        if (newValue &amp;&amp; (typeof newValue === 'object' || typeof newValue === 'function')) {
            var then = newValue.then;
            if (typeof then === 'function') {
                then.call(newValue, resolve, reject);
                return;
            }
        }
        state = 'fulfilled';
        value = newValue;
        execute();
    }
    function reject(reason) {
        state = 'rejected';
        value = reason;
        execute();
    }
    function execute() {
        setTimeout(function () {
            callbacks.forEach(function (callback) {
                handle(callback);
            });
        }, 0);
    }
    fn(resolve, reject);
}
</code></pre></div><blockquote><p>ä¸Šè¿°ä»£ç å¢åŠ äº†æ–°çš„<code>reject</code>æ–¹æ³•ï¼Œä¾›å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼ŒåŒæ—¶æŠ½å‡ºäº†<code>resolve</code>å’Œ<code>reject</code>å…±ç”¨çš„éƒ¨åˆ†ï¼Œå½¢æˆ<code>execute</code>æ–¹æ³•</p></blockquote> <p>é”™è¯¯å†’æ³¡æ˜¯ä¸Šè¿°ä»£ç å·²ç»æ”¯æŒï¼Œä¸”éå¸¸å®ç”¨çš„ä¸€ä¸ªç‰¹æ€§ã€‚åœ¨<code>handle</code>ä¸­å‘ç°æ²¡æœ‰æŒ‡å®šå¼‚æ­¥æ“ä½œå¤±è´¥çš„å›è°ƒæ—¶ï¼Œä¼šç›´æ¥å°†<code>bridge promise</code>(<code>then</code>å‡½æ•°è¿”å›çš„<code>promise</code>ï¼ŒååŒ)è®¾ä¸º<code>rejected</code>çŠ¶æ€ï¼Œå¦‚æ­¤è¾¾æˆæ‰§è¡Œåç»­å¤±è´¥å›è°ƒçš„æ•ˆæœã€‚è¿™æœ‰åˆ©äºç®€åŒ–ä¸²è¡ŒPromiseçš„å¤±è´¥å¤„ç†æˆæœ¬ï¼Œå› ä¸ºä¸€ç»„å¼‚æ­¥æ“ä½œå¾€å¾€ä¼šå¯¹åº”ä¸€ä¸ªå®é™…åŠŸèƒ½ï¼Œå¤±è´¥å¤„ç†æ–¹æ³•é€šå¸¸æ˜¯ä¸€è‡´çš„</p> <div class="language- extra-class"><pre class="language-text"><code>//ä¾‹6
getUserId()
    .then(getUserJobById)
    .then(function (job) {
        // å¤„ç†job
    }, function (error) {
        // getUserIdæˆ–è€…getUerJobByIdæ—¶å‡ºç°çš„é”™è¯¯
        console.log(error);
    });
</code></pre></div><h3 id="_2-8-å¼‚å¸¸å¤„ç†"><a href="#_2-8-å¼‚å¸¸å¤„ç†" class="header-anchor">#</a> 2.8 å¼‚å¸¸å¤„ç†</h3> <blockquote><p>å¦‚æœåœ¨æ‰§è¡ŒæˆåŠŸå›è°ƒã€å¤±è´¥å›è°ƒæ—¶ä»£ç å‡ºé”™æ€ä¹ˆåŠï¼Ÿå¯¹äºè¿™ç±»å¼‚å¸¸ï¼Œå¯ä»¥ä½¿ç”¨<code>try-catch</code>æ•è·é”™è¯¯ï¼Œå¹¶å°†<code>bridge promise</code>è®¾ä¸º<code>rejected</code>çŠ¶æ€ã€‚<code>handle</code>æ–¹æ³•æ”¹é€ å¦‚ä¸‹</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>function handle(callback) {
    if (state === 'pending') {
        callbacks.push(callback);
        return;
    }
    var cb = state === 'fulfilled' ? callback.onFulfilled : callback.onRejected,
        ret;
    if (cb === null) {
        cb = state === 'fulfilled' ? callback.resolve : callback.reject;
        cb(value);
        return;
    }
    try {
        ret = cb(value);
        callback.resolve(ret);
    } catch (e) {
        callback.reject(e);
    }
}
</code></pre></div><blockquote><p>å¦‚æœåœ¨å¼‚æ­¥æ“ä½œä¸­ï¼Œå¤šæ¬¡æ‰§è¡Œ<code>resolve</code>æˆ–è€…<code>reject</code>ä¼šé‡å¤å¤„ç†åç»­å›è°ƒï¼Œå¯ä»¥é€šè¿‡å†…ç½®ä¸€ä¸ªæ ‡å¿—ä½è§£å†³</p></blockquote> <h3 id="_2-9-å®Œæ•´å®ç°"><a href="#_2-9-å®Œæ•´å®ç°" class="header-anchor">#</a> 2.9 å®Œæ•´å®ç°</h3> <div class="language- extra-class"><pre class="language-text"><code>// ä¸‰ç§çŠ¶æ€
const PENDING = &quot;pending&quot;;
const RESOLVED = &quot;resolved&quot;;
const REJECTED = &quot;rejected&quot;;
// promise æ¥æ”¶ä¸€ä¸ªå‡½æ•°å‚æ•°ï¼Œè¯¥å‡½æ•°ä¼šç«‹å³æ‰§è¡Œ
function MyPromise(fn) {
  let _this = this;
  _this.currentState = PENDING;
  _this.value = undefined;
  // ç”¨äºä¿å­˜ then ä¸­çš„å›è°ƒï¼Œåªæœ‰å½“ promise
  // çŠ¶æ€ä¸º pending æ—¶æ‰ä¼šç¼“å­˜ï¼Œå¹¶ä¸”æ¯ä¸ªå®ä¾‹è‡³å¤šç¼“å­˜ä¸€ä¸ª
  _this.resolvedCallbacks = [];
  _this.rejectedCallbacks = [];

  _this.resolve = function (value) {
    if (value instanceof MyPromise) {
      // å¦‚æœ value æ˜¯ä¸ª Promiseï¼Œé€’å½’æ‰§è¡Œ
      return value.then(_this.resolve, _this.reject)
    }
    setTimeout(() =&gt; { // å¼‚æ­¥æ‰§è¡Œï¼Œä¿è¯æ‰§è¡Œé¡ºåº
      if (_this.currentState === PENDING) {
        _this.currentState = RESOLVED;
        _this.value = value;
        _this.resolvedCallbacks.forEach(cb =&gt; cb());
      }
    })
  };

  _this.reject = function (reason) {
    setTimeout(() =&gt; { // å¼‚æ­¥æ‰§è¡Œï¼Œä¿è¯æ‰§è¡Œé¡ºåº
      if (_this.currentState === PENDING) {
        _this.currentState = REJECTED;
        _this.value = reason;
        _this.rejectedCallbacks.forEach(cb =&gt; cb());
      }
    })
  }
  // ç”¨äºè§£å†³ä»¥ä¸‹é—®é¢˜
  // new Promise(() =&gt; throw Error('error))
  try {
    fn(_this.resolve, _this.reject);
  } catch (e) {
    _this.reject(e);
  }
}

MyPromise.prototype.then = function (onResolved, onRejected) {
  var self = this;
  // è§„èŒƒ 2.2.7ï¼Œthen å¿…é¡»è¿”å›ä¸€ä¸ªæ–°çš„ promise
  var promise2;
  // è§„èŒƒ 2.2.onResolved å’Œ onRejected éƒ½ä¸ºå¯é€‰å‚æ•°
  // å¦‚æœç±»å‹ä¸æ˜¯å‡½æ•°éœ€è¦å¿½ç•¥ï¼ŒåŒæ—¶ä¹Ÿå®ç°äº†é€ä¼ 
  // Promise.resolve(4).then().then((value) =&gt; console.log(value))
  onResolved = typeof onResolved === 'function' ? onResolved : v =&gt; v;
  onRejected = typeof onRejected === 'function' ? onRejected : r =&gt; throw r;

  if (self.currentState === RESOLVED) {
    return (promise2 = new MyPromise(function (resolve, reject) {
      // è§„èŒƒ 2.2.4ï¼Œä¿è¯ onFulfilledï¼ŒonRjected å¼‚æ­¥æ‰§è¡Œ
      // æ‰€ä»¥ç”¨äº† setTimeout åŒ…è£¹ä¸‹
      setTimeout(function () {
        try {
          var x = onResolved(self.value);
          resolutionProcedure(promise2, x, resolve, reject);
        } catch (reason) {
          reject(reason);
        }
      });
    }));
  }

  if (self.currentState === REJECTED) {
    return (promise2 = new MyPromise(function (resolve, reject) {
      setTimeout(function () {
        // å¼‚æ­¥æ‰§è¡ŒonRejected
        try {
          var x = onRejected(self.value);
          resolutionProcedure(promise2, x, resolve, reject);
        } catch (reason) {
          reject(reason);
        }
      });
    }));
  }

  if (self.currentState === PENDING) {
    return (promise2 = new MyPromise(function (resolve, reject) {
      self.resolvedCallbacks.push(function () {
        // è€ƒè™‘åˆ°å¯èƒ½ä¼šæœ‰æŠ¥é”™ï¼Œæ‰€ä»¥ä½¿ç”¨ try/catch åŒ…è£¹
        try {
          var x = onResolved(self.value);
          resolutionProcedure(promise2, x, resolve, reject);
        } catch (r) {
          reject(r);
        }
      });

      self.rejectedCallbacks.push(function () {
        try {
          var x = onRejected(self.value);
          resolutionProcedure(promise2, x, resolve, reject);
        } catch (r) {
          reject(r);
        }
      });
    }));
  }
};
// è§„èŒƒ 2.3
function resolutionProcedure(promise2, x, resolve, reject) {
  // è§„èŒƒ 2.3.1ï¼Œx ä¸èƒ½å’Œ promise2 ç›¸åŒï¼Œé¿å…å¾ªç¯å¼•ç”¨
  if (promise2 === x) {
    return reject(new TypeError(&quot;Error&quot;));
  }
  // è§„èŒƒ 2.3.2
  // å¦‚æœ x ä¸º Promiseï¼ŒçŠ¶æ€ä¸º pending éœ€è¦ç»§ç»­ç­‰å¾…å¦åˆ™æ‰§è¡Œ
  if (x instanceof MyPromise) {
    if (x.currentState === PENDING) {
      x.then(function (value) {
        // å†æ¬¡è°ƒç”¨è¯¥å‡½æ•°æ˜¯ä¸ºäº†ç¡®è®¤ x resolve çš„
        // å‚æ•°æ˜¯ä»€ä¹ˆç±»å‹ï¼Œå¦‚æœæ˜¯åŸºæœ¬ç±»å‹å°±å†æ¬¡ resolve
        // æŠŠå€¼ä¼ ç»™ä¸‹ä¸ª then
        resolutionProcedure(promise2, value, resolve, reject);
      }, reject);
    } else {
      x.then(resolve, reject);
    }
    return;
  }
  // è§„èŒƒ 2.3.3.3.3
  // reject æˆ–è€… resolve å…¶ä¸­ä¸€ä¸ªæ‰§è¡Œè¿‡å¾—è¯ï¼Œå¿½ç•¥å…¶ä»–çš„
  let called = false;
  // è§„èŒƒ 2.3.3ï¼Œåˆ¤æ–­ x æ˜¯å¦ä¸ºå¯¹è±¡æˆ–è€…å‡½æ•°
  if (x !== null &amp;&amp; (typeof x === &quot;object&quot; || typeof x === &quot;function&quot;)) {
    // è§„èŒƒ 2.3.3.2ï¼Œå¦‚æœä¸èƒ½å–å‡º thenï¼Œå°± reject
    try {
      // è§„èŒƒ 2.3.3.1
      let then = x.then;
      // å¦‚æœ then æ˜¯å‡½æ•°ï¼Œè°ƒç”¨ x.then
      if (typeof then === &quot;function&quot;) {
        // è§„èŒƒ 2.3.3.3
        then.call(
          x,
          y =&gt; {
            if (called) return;
            called = true;
            // è§„èŒƒ 2.3.3.3.1
            resolutionProcedure(promise2, y, resolve, reject);
          },
          e =&gt; {
            if (called) return;
            called = true;
            reject(e);
          }
        );
      } else {
        // è§„èŒƒ 2.3.3.4
        resolve(x);
      }
    } catch (e) {
      if (called) return;
      called = true;
      reject(e);
    }
  } else {
    // è§„èŒƒ 2.3.4ï¼Œx ä¸ºåŸºæœ¬ç±»å‹
    resolve(x);
  }
}
</code></pre></div><h3 id="_2-10-å°ç»“"><a href="#_2-10-å°ç»“" class="header-anchor">#</a> 2.10 å°ç»“</h3> <p><strong>è¿™é‡Œä¸€å®šè¦æ³¨æ„çš„ç‚¹æ˜¯</strong>ï¼š<code>promise</code>é‡Œé¢çš„<code>then</code>å‡½æ•°ä»…ä»…æ˜¯æ³¨å†Œäº†åç»­éœ€è¦æ‰§è¡Œçš„ä»£ç ï¼ŒçœŸæ­£çš„æ‰§è¡Œæ˜¯åœ¨<code>resolve</code>æ–¹æ³•é‡Œé¢æ‰§è¡Œçš„ï¼Œç†æ¸…äº†è¿™å±‚ï¼Œå†æ¥åˆ†ææºç ä¼šçœåŠ›çš„å¤š</p> <blockquote><p>ç°åœ¨å›é¡¾ä¸‹<code>Promise</code>çš„å®ç°è¿‡ç¨‹ï¼Œå…¶ä¸»è¦ä½¿ç”¨äº†è®¾è®¡æ¨¡å¼ä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼</p></blockquote> <ul><li>é€šè¿‡<code>Promise.prototype.then</code>å’Œ<code>Promise.prototype.catch</code>æ–¹æ³•å°†è§‚å¯Ÿè€…æ–¹æ³•æ³¨å†Œåˆ°è¢«è§‚å¯Ÿè€…<code>Promise</code>å¯¹è±¡ä¸­ï¼ŒåŒæ—¶è¿”å›ä¸€ä¸ªæ–°çš„<code>Promise</code>å¯¹è±¡ï¼Œä»¥ä¾¿å¯ä»¥é“¾å¼è°ƒç”¨</li> <li>è¢«è§‚å¯Ÿè€…ç®¡ç†å†…éƒ¨<code>pending</code>ã€<code>fulfilled</code>å’Œ<code>rejected</code>çš„çŠ¶æ€è½¬å˜ï¼ŒåŒæ—¶é€šè¿‡æ„é€ å‡½æ•°ä¸­ä¼ é€’çš„<code>resolve</code>å’Œ<code>reject</code>æ–¹æ³•ä»¥ä¸»åŠ¨è§¦å‘çŠ¶æ€è½¬å˜å’Œé€šçŸ¥è§‚å¯Ÿè€…</li></ul></div> <!---->  </div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/principle-docs/comprehensive/02-setTimeoutå®ç°åŸç†å’Œä½¿ç”¨æ³¨æ„.html" class="prev">setTimeoutå®ç°åŸç†å’Œä½¿ç”¨æ³¨æ„</a></span> <span class="next"><a href="/principle-docs/comprehensive/04-æµè§ˆå™¨æ¸²æŸ“åŸç†.html">æµè§ˆå™¨æ¸²æŸ“åŸç†</a>
      â†’
    </span></p></div>  <div class="el-dialog__wrapper" style="display:none;"><div role="dialog" aria-modal="true" aria-label="è¯·å…ˆé˜…è¯»è´­ä¹°åè®®" class="el-dialog el-dialog--center" style="margin-top:15vh;width:30%;"><div class="el-dialog__header"><span class="el-dialog__title">è¯·å…ˆé˜…è¯»è´­ä¹°åè®®</span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><!----><div class="el-dialog__footer"><span class="dialog-footer"><button disabled="disabled" type="button" class="el-button el-button--danger is-disabled" style="width:100%;"><!----><!----><span>æˆ‘å·²é˜…è¯»ï¼ˆ8sï¼‰</span></button></span></div></div></div> <div class="el-dialog__wrapper" style="display:none;"><div role="dialog" aria-modal="true" aria-label="ä»˜è´¹é˜…è¯»" class="el-dialog" style="margin-top:15vh;width:30%;"><div class="el-dialog__header"><span class="el-dialog__title">ä»˜è´¹é˜…è¯»</span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><!----><div class="el-dialog__footer"><span class="dialog-footer"><button disabled="disabled" type="button" class="el-button el-button--danger is-disabled" style="width:100%;"><!----><!----><span>ç¡® å®š</span></button></span></div></div></div> <div class="el-dialog__wrapper" style="display:none;"><div role="dialog" aria-modal="true" aria-label="dialog" class="el-dialog" style="margin-top:15vh;width:30%;"><div class="el-dialog__header"><span class="el-dialog__title"></span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><!----><!----></div></div> <img src="data:image/png;base64,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" class="theme-float-btn"></main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.f60bfc341.js" defer></script><script src="/assets/js/6.7f8a8777.js" defer></script><script src="/assets/js/3.9d86cf58.js" defer></script><script src="/assets/js/88.fb19aa58.js" defer></script><script src="/assets/js/11.fb060006.js" defer></script>
  </body>
</html>
